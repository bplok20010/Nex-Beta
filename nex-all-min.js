$.browser||($.browser={},$.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,i,r){return jQuery.easing[jQuery.easing.def](e,t,n,i,r)},easeInQuad:function(e,t,n,i,r){return i*(t/=r)*t+n},easeOutQuad:function(e,t,n,i,r){return-i*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,r){return i*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,i,r){return i*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,r){return i*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,i,r){return-i*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,r){return i*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,r){return i*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,r){return i*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,i,r){return 0==t?n:i*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,i,r){return t==r?n+i:i*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,i,r){return 0==t?n:t==r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a))+n},easeOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+i+n},easeInOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(2==(t/=r/2))return n+i;if(a||(a=r*(.3*1.5)),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return 1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a))+n:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+i+n},easeInBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*(t/=r)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*((t=t/r-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?i/2*(t*t*(((o*=1.525)+1)*t-o))+n:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(e,t,n,i,r){return i-jQuery.easing.easeOutBounce(e,r-t,0,i,r)+n},easeOutBounce:function(e,t,n,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+n:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,i,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,i,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,i,r)+.5*i+n}}),function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),r=0,o=0,a=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(r=n.wheelDelta/120),n.detail&&(r=-n.detail/3),a=r,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(a=0,o=-1*r),void 0!==n.wheelDeltaY&&(a=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(o=-1*n.wheelDeltaX/120),i.unshift(t,r,o,a),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e,t,n){function i(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var r,o="hashchange",a=document,s=e.event.special,l=a.documentMode,d="on"+o in t&&(l===n||l>7);e.fn[o]=function(e){return e?this.bind(o,e):this.trigger(o)},e.fn[o].delay=50,s[o]=e.extend(s[o],{setup:function(){return d?!1:void e(r.start)},teardown:function(){return d?!1:void e(r.stop)}}),r=function(){function r(){var n=i(),a=f(c);n!==c?(h(c=n,a),e(t).trigger(o)):a!==c&&(location.href=location.href.replace(/#.*/,"")+a),s=setTimeout(r,e.fn[o].delay)}var s,l={},c=i(),u=function(e){return e},h=u,f=u;return l.start=function(){s||r()},l.stop=function(){s&&clearTimeout(s),s=n},e.browser.msie&&!d&&function(){var t,n;l.start=function(){t||(n=e.fn[o].src,n=n&&n+i(),t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||h(i()),r()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,a.onpropertychange=function(){try{"title"===event.propertyName&&(t.document.title=a.title)}catch(e){}})},l.stop=u,f=function(){return i(t.location.href)},h=function(n,i){var r=t.document,s=e.fn[o].domain;n!==i&&(r.title=a.title,r.open(),s&&r.write('<script>document.domain="'+s+'"</script>'),r.close(),t.location.hash=n)}}(),l}()}(jQuery,this),$.fn._display=function(e){var e=e||"nex-hide2show",t=$(this);return t.add(t.parents(":hidden")).filter(function(){return"none"==$(this).css("display")}).each(function(){$(this).addClass(e)})},$.fn._hidden=function(e){var e=e||"nex-hide2show";return this.each(function(t){$(this).removeClass(e)})},$.fn._width=function(e){if(void 0==e){var t=this[0];if(t==window||t==document||t==document.body)return this.width()||document.body.clientWidth;var n=$(t),i=n.width();return i||0}return this.width(e)},$.fn._height=function(e){if(void 0==e){var t=this[0];if(t==window||t==document||t==document.body)return this.height()||document.body.clientHeight;var n=($(t),$(t).height());return n||0}return this.height(e)},$.fn._outerWidth=function(e){if(void 0==e||e===!1||e===!0){var t=this[0];if(t==window||t==document||t==document.body)return this.width()||document.body.clientWidth;var n=($(t),this.outerWidth(!!e)||0);return n}return Nex.isIE,this.each(function(){var t=$(this);if($.support.boxModel){var n=t,i=e-(n.outerWidth()-n.width());i=0>i?0:i,n.width(i)}else t.width(e)})},$.fn._outerHeight=function(e){if(void 0==e||e===!1||e===!0){var t=this[0];if(t==window||t==document||t==document.body)return this.height()||document.body.clientHeight;var n=($(t),this.outerHeight(!!e)||0);return n}return Nex.isIE,this.each(function(){var t=$(this);if($.support.boxModel){var n=t,i=e-(n.outerHeight()-n.height());i=0>i?0:i,n.height(i)}else t.height(e)})},$.fn._position=function(e){var t;if(e===t){var n=this.eq(0),i=n.offsetParent();if(i.is("body")||i.is("html"))return n.offset();var r=n.offset(),o=i.offset(),a=parseFloat(i.css("borderLeftWidth"))||0,s=parseFloat(i.css("paddingLeft"))||0,l=parseFloat(i.css("borderTopWidth"))||0,d=parseFloat(i.css("paddingTop"))||0,c={top:r.top-o.top-l-d,left:r.left-o.left-a-s};return{top:c.top+i.scrollTop(),left:c.left+i.scrollLeft()}}return this.css(e)},$.fn._show=function(e){return this.removeClass("nex-hidden"),e&&$.isFunction(e)&&e.call(this),this},$.fn._hide=function(e){return this.addClass("nex-hidden"),e&&$.isFunction(e)&&e.call(this),this},$._isPlainObject=function(e){var t=$.isPlainObject(e);return t&&"_outerWidth"in e&&(t=!1),t},$._parseHTML=$.parseHTML=$.parseHTML||function(e,t,n){var i,r=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||document,(i=r.exec(e))?[t.createElement(i[1])]:(i=jQuery.buildFragment([e],$(t),n?null:[]),jQuery.merge([],i.fragment.childNodes))):null},jQuery.fn.extend({_removeStyle:function(e,t){e+="";var n=$.trim(e.toLowerCase());n=n.replace(/\s+/g,",").split(",");var e={};return $.each(n,function(t,n){e[n]=!0}),this.each(function(){var n=this.style.cssText;if(n){var i=n.split(";"),r={};$.each(i,function(e,t){if(t){var n=t.split(":");n.length&&(r[$.trim(n[0].toLowerCase())]=$.trim(n[1]))}});var o=[];for(var a in r){if(t){if(a in e)continue}else{var s=!1;for(var l in e)0===a.indexOf(l)&&(s=!0);if(s)continue}o.push(a+":"+r[a]+";")}this.style.cssText=o.join("")}})},_visible:function(e){var t;e=e===t?!0:e;var n=!!e;return this.each(function(){var e=$(this);n?e._removeStyle("visibility"):e.css("visibility","hidden")})}}),jQuery.support.selectstart=!1,jQuery.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".nex-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".nex-disableSelection")}}),void 0===jQuery.support.boxModel&&(jQuery.support.boxModel="CSS1Compat"===document.compatMode),jQuery(function(){var e=document.body,t=e.appendChild(t=document.createElement("div"));$.support.selectstart="onselectstart"in t,e.removeChild(t).style.display="none"}),function(e,t){function i(e){var t,n,i=document,e=e===n?!0:!1,r=i.getElementsByTagName("head")[0];try{a._b.c()}catch(o){if(o.sourceURL)return o.sourceURL;t=o.stack,!t&&window.opera&&(t=(String(o).match(/of linked script \S+/g)||[]).join(" "))}if(t)return t=t.split(/[@ ]/g).pop(),t="("===t[0]?t.slice(1,-1):t.replace(/\s/,""),t.replace(/(:\d+)?:\d+$/i,"");for(var s,l=e?r:i,d=l.getElementsByTagName("script"),c=d.length;s=d[--c];)if("interactive"===s.readyState)return s.src}function r(e){var e=e||{};return{cache1:{},cache2:{},helper:t.noop,ltag:e.ltag||"<%",rtag:e.rtag||"%>",simple:e.simple||!1,compile1:function(e,t,n){var i=this.cache1[e]?this.cache1[e]:new Function(n?"obj,"+n:"obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split(this.ltag).join("	").replace(new RegExp("((^|"+this.rtag+")[^	]*)'","g"),"$1\r").replace(new RegExp("	=(.*?)"+this.rtag,"g"),"',$1,'").split("	").join("');").split(this.rtag).join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return this.cache1[e]=i,t?i(t):i},compile2:function(e,t,n){var i=this.cache2[e]?this.cache2[e]:new Function(n?"obj,"+n:"obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split(this.ltag).join("	").replace(new RegExp("	(.*?)"+this.rtag,"g"),"',$1,'").split("	").join("');").split(this.rtag).join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return this.cache2[e]=i,t?i(t):i},compile:function(){return this.simple?this.compile2.apply(this,arguments):this.compile1.apply(this,arguments)}}}var o,s={},l=Object.prototype,d=l.toString,c=!0,u={toString:1};e.Nex=s,s.global=e;for(o in u)c=null;c&&(c=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),s.enumerables=c,s.apply=function(e,t,n){if(n&&s.apply(e,n),e&&t&&"object"==typeof t){var i,r,o;for(i in t)e[i]=t[i];if(c)for(r=c.length;r--;)o=c[r],t.hasOwnProperty(o)&&(e[o]=t[o])}return e},s.applyIf=function(e,t){var n;if(e)for(n in t)void 0===e[n]&&(e[n]=t[n]);return e};var h=navigator.userAgent.toLowerCase(),f=(/msie ([\w.]+)/.exec(h)||[],i(!1));f=f.split("/"),f.pop(),f=f.join("/"),t(document).ready(function(){if(s.isIE&&s.IEVer){var e=["nex-ie"],n=t(document.body);e.push("nex-ie"+s.IEVer),s.IEVer<8&&e.push("nex-ielt8"),s.IEVer<9&&e.push("nex-ielt9"),n.addClass(e.join(" "))}}),s.apply(s,{userAgent:h,aid:1,tabIndex:1,zIndex:99999,topzIndex:99999999,scrollbarSize:!1,resizeOnHidden:!0,easingDef:t.easing.def?t.easing.def:"swing",getTemplate:r,dirname:function(e){return e+="",e=e.split("/"),e.pop(),e=e.join("/")},baseUrl:f,getCurrentScriptUrl:function(){return this.baseUrl},template:r(),generateMixed:function(e){for(var e=e||6,t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",i=0;e>i;i++){var r=Math.ceil(35*Math.random());n+=t[r]}return n},unique:function(e){return this.uuid(e)},uuid:function(e){var t=s.generateMixed(e||6),n=t+"-"+s.aid++;return n},distArr:function(e){for(var t={},n=[],i=0;i<e.length;i++)t[e[i]]||(n.push(e[i]),t[e[i]]=!0);return n}}),s.apply(s,{isClass:function(e){return"function"==typeof e&&e.$isClass?!0:!1},isNexConstructor:function(e){return this.isClass(e)},isNex:function(e){return this.isInstance(e)},isInstance:function(e){return"object"==typeof e&&e.isInstance?!0:!1},isXtype:function(e){return"object"==typeof e&&"xtype"in e?!0:!1},isjQuery:function(e){return"object"===t.type(e)&&"_outerWidth"in e?!0:!1},clone:function(e,t){if(null===e||void 0===e)return e;if(void 0===t&&(t=!1),e.nodeType&&e.cloneNode)return t?e:e.cloneNode(!0);var n=d.call(e);if("[object Date]"===n)return new Date(e.getTime());var i,r,o,a,l;if("[object Array]"===n)for(i=e.length,a=[];i--;)a[i]=s.clone(e[i],t);else if("[object Object]"===n&&e.constructor===Object){a={};for(l in e)a[l]=s.clone(e[l],t);if(c)for(r=c.length;r--;)o=c[r],a[o]=e[o]}return a||e},typeOf:function(e){if(null===e)return"null";var t=typeof e;if("undefined"===t||"string"===t||"number"===t||"boolean"===t)return t;var n=d.call(e);switch(n){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if("function"===t)return"function";if("object"===t)return void 0!==e.nodeType?3===e.nodeType?/\S/.test(e.nodeValue)?"textnode":"whitespace":"element":"object";throw new Error('Failed to determine the type of the specified value "'+e+'". This is most likely a bug.')},isEmpty:function(e,t){return null===e||void 0===e||(t?!1:""===e)||s.isArray(e)&&0===e.length},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===d.call(e)},isDate:function(e){return"[object Date]"===d.call(e)},isObject:"[object Object]"===d.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===d.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===d.call(e)},isPlainObject:function(e){return t._isPlainObject?t._isPlainObject(e):t.isPlainObject(e)},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(e){return"[object Function]"===d.call(e)}:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isElement:function(e){return e?1===e.nodeType:!1},isTextNode:function(e){return e?"#text"===e.nodeName:!1},isDefined:function(e){return"undefined"!=typeof e},isPlainObject:function(e){return t._isPlainObject(e)},unDefined:function(e,t){return void 0===e?t:e}});var g=function(e){return e.test(s.userAgent)},p="CSS1Compat"==document.compatMode,v=function(e,t){var n;return e&&(n=t.exec(s.userAgent))?parseFloat(n[1]):0},m=document.documentMode,_=g(/opera/),x=_&&g(/version\/10\.5/),b=g(/\bchrome\b/),w=g(/webkit/),y=!b&&g(/safari/),C=y&&g(/applewebkit\/4/),D=y&&g(/version\/3/),S=y&&g(/version\/4/),$=y&&g(/version\/5/),N=!_&&g(/msie/),T=N&&(g(/msie 7/)&&8!=m&&9!=m||7==m),E=N&&(g(/msie 8/)&&7!=m&&9!=m||8==m),F=N&&(g(/msie 9/)&&7!=m&&8!=m||9==m),M=(N&&(g(/msie 10/)&&7!=m&&8!=m&&9!=m||10==m),N&&g(/msie 6/)),k=!w&&g(/gecko/),I=k&&g(/rv:1\.9/),A=k&&g(/rv:2\.0/),R=k&&g(/rv:5\./),z=I&&g(/rv:1\.9\.0/),H=I&&g(/rv:1\.9\.1/),P=I&&g(/rv:1\.9\.2/),O=g(/windows|win32/),B=g(/macintosh|mac os x/),L=g(/linux/),j=v(!0,/\bchrome\/(\d+\.\d+)/),W=v(!0,/\bfirefox\/(\d+\.\d+)/),V=v(N,/msie (\d+\.\d+)/),Y=v(_,/version\/(\d+\.\d+)/),G=v(y,/version\/(\d+\.\d+)/),U=v(w,/webkit\/(\d+\.\d+)/),q=/^https/i.test(window.location.protocol);try{document.execCommand("BackgroundImageCache",!1,!0)}catch(X){}var Q=function(){};Q.info=Q.warn=Q.error=s.emptyFn,s.apply(s,{SSL_SECURE_URL:q&&N?"javascript:''":"about:blank",USE_NATIVE_JSON:!1,isStrict:p,isIEQuirks:N&&!p,isOpera:_,isOpera10_5:x,isWebKit:w,isChrome:b,isSafari:y,isSafari3:D,isSafari4:S,isSafari5:$,isSafari2:C,IEVer:V,isIE:N,isIE6:M,isIE7:T,isIE8:E,isIE9:F,isGecko:k,isGecko3:I,isGecko4:A,isGecko5:R,isFF3_0:z,isFF3_5:H,isFF3_6:P,isFF4:W>=4&&5>W,isFF5:W>=5&&6>W,isLinux:L,isWindows:O,isMac:B,chromeVersion:j,firefoxVersion:W,ieVersion:V,operaVersion:Y,safariVersion:G,webKitVersion:U,isSecure:q,escapeRe:function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},log:Q,invoke:function(e,n){var i=[],r=Array.prototype.slice.call(arguments,2);return t.each(e,function(e,t){t&&"function"==typeof t[n]?i.push(t[n].apply(t,r)):i.push(void 0)}),i}}),s.apply(s,{htmlEncode:function(){var e,t,n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},i=[];for(e in n)i.push(e);return t=new RegExp("("+i.join("|")+")","g"),function(e){return e?String(e).replace(t,function(e,t){return n[t]}):e}}(),htmlDecode:function(){var e,t,n={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},i=[];for(e in n)i.push(e);return t=new RegExp("("+i.join("|")+"|&#[0-9]{1,5};)","g"),function(e){return e?String(e).replace(t,function(e,t){return t in n?n[t]:String.fromCharCode(parseInt(t.substr(2),10))}):e}}(),addCssRules:function(e,n,i,r){function o(e,t){return(t+"").toUpperCase()}function a(e){var t=/^-ms-/,n=/-([\da-z])/gi;return e.replace(t,"ms-").replace(n,o)}function s(e,t,n){var i,n=n===i?!0:n;return n?d.apply(this,[e,t]):l.apply(this,[e,t])}function l(t,n){var i=e.styleSheet?e.styleSheet:e.sheet,r=i.cssRules||i.rules;return i.addRule?i.addRule(t,n):i.insertRule(t+"{"+n+"}",r.length),s}function d(n,i){for(var r=e.styleSheet?e.styleSheet:e.sheet,o=r.cssRules||r.rules,d=null,c=0,u=o.length;u>c;c++)o[c].selectorText.toLowerCase()===n.toLowerCase()&&(d=o[c]);if(!d)return l(n,i);for(var h=(i+"").split(";"),f=0,g=h.length;g>f;f++){var p=h[f].split(":");d.style[t.trim(a(p[0]))]=p[1]}return s}return n?s(n,i,r):s},parseUrl:function(e){var n=/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/;if("object"===t.type(e))return e;var i=n.exec(e||"")||[];return{href:i[0]||"",hrefNoHash:i[1]||"",hrefNoSearch:i[2]||"",domain:i[3]||"",protocol:i[4]||"",doubleSlash:i[5]||"",authority:i[6]||"",username:i[8]||"",password:i[9]||"",host:i[10]||"",hostname:i[11]||"",port:i[12]||"",pathname:i[13]||"",directory:i[14]||"",filename:i[15]||"",search:i[16]||"",hash:i[17]||""}},monitor:function(e){var t;t=function(){var n;return t._callBefore.apply(this,arguments),n=e.apply(this,arguments),t._callAfter.apply(this,arguments),n};var n=[];return t._callBefore=function(){for(var e=0,t=n.length;t>e;e++){var i=n[e];i&&i.above&&i.fn.apply(this,arguments)}},t._callAfter=function(){for(var e=0,t=n.length;t>e;e++){var i=n[e];i&&(i.above||i.fn.apply(this,arguments))}},t.before=function(e){return n.push({above:!0,fn:e})-1},t.after=function(e){return n.push({above:!1,fn:e})-1},t.remove=function(e){return n[e]&&(n[e]=null)},t.beforeOnce=function(e){var n;n=t.before(function(){e.apply(this,arguments),t.remove(n)})},t.afterOnce=function(e){var n;n=t.after(function(){e.apply(this,arguments),t.remove(n)})},t}}),s.apply(s,{array_move:function(e,t,n,i){if(t==n)return e;var r=e,o=e=[].concat(r);e=[];for(var a=0,s=o.length;s>a;a++){var l=e.push(a);a==t?t=l-1:a==n&&(n=l-1)}var d=e[t];if(t>n){i||n++;for(var c=t;c>=0;c--){if(c==n){e[c]=d;break}e[c]=e[c-1]}}else if(n>t){i&&n--;for(var c=t;n>=c;c++)c==n?e[c]=d:e[c]=e[c+1]}var u=r;u.length=0;for(var h=0,s=e.length;s>h;h++)u.push(o[e[h]]);return e=u},array_splice:function(e,n){var i,r=this;if(!t.isArray(n))return n;var o=e;if(t.isArray(e)&&e.length<=1&&(e=e[0]),e===i)return n;if(!t.isArray(e)&&!t.isFunction(e))return isNaN(parseInt(e))?n:(n.splice(parseInt(e),1),n);var a=r.copy(n),e=t.isArray(e)?e:t.isFunction(e)?[]:[e],s={};return t.each(e,function(e,t){s[t]=!0}),n.length=0,t.each(a,function(e,i){if(t.isFunction(o)){var r=o.call(i,e,i);r===!0&&(s[e]=!0)}e in s||n.push(i)}),n},array_insert:function(e,n,i,r){var o,r=r===o?0:r;if(!t.isArray(i))return i;if(t.isArray(n)||(n=[n]),e===o)return i;var a=i.length;return a>e&&(n=r?n.concat([i[e]]):[i[e]].concat(n)),n=[e,1].concat(n),i.splice.apply(i,n),i},array_clear:function(e){return e.length=0,e},array_copy:function(e){return[].concat(e)},copyArray:function(e){return[].concat(e)},copy:function(e){return t.isArray(e)?[].concat(e):t.isPlainObject(e)?t.extend({},e):e},inArray:function(e,n){if("number"===t.type(e)&&(e+=""),n)for(var i=n.length,r=0;i>r;r++){var o=n[r];if("number"===t.type(o)&&(o+=""),r in n&&o===e)return r}return-1},str_number:function(e,n){var e=e+"";if("string"===t.type(e)){var i=e.split(".");if(i.length>1){var r=i[1].substring(0,n);e=""!==r?[i[0],r].join("."):i[0]}}return Number(e)},_checkYScrollEnd:function(e){var t=0,n=0,i=0;if(e===document.body||e===document||e===window)document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),n=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);else{if(!e.nodeType)return!1;t=e.scrollTop,n=e.clientHeight,i=e.scrollHeight}return n>=i?!1:t+n>=i?!0:!1},_checkXScrollEnd:function(e){var t=0,n=0,i=0;if(e===document.body||e===document||e===window)document.documentElement&&document.documentElement.scrollLeft?t=document.documentElement.scrollLeft:document.body&&(t=document.body.scrollLeft),n=document.body.clientWidth&&document.documentElement.clientHeight?document.body.clientWidth<document.documentElement.clientWidth?document.body.clientWidth:document.documentElement.clientWidth:document.body.clientWidth>document.documentElement.clientWidth?document.body.clientWidth:document.documentElement.clientWidth,i=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth);else{if(!e.nodeType)return!1;t=e.scrollLeft,n=e.clientWidth,i=e.scrollWidth}return n>=i?!1:t+n>=i?!0:!1},isScrollEnd:function(e,t){var n=this;return"left"==t?n._checkXScrollEnd(e):n._checkYScrollEnd(e)},hasScroll:function(e,n,i){var e=t(e)[0];if(i!==!0)if("left"===n){if("hidden"===t(e).css("overflow-x"))return!1}else if("hidden"===t(e).css("overflow-y"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[r]>0?!0:(e[r]=1,o=e[r]>0,e[r]=0,o)},getScrollbarSize:function(){if(!s.scrollbarSize){var e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",e.appendChild(t),s.scrollbarSize={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight},s.scrollbarSize.width=s.scrollbarSize.width||s.scrollbarSize.height,s.scrollbarSize.height=s.scrollbarSize.height||s.scrollbarSize.width,s.scrollbarSize.x=s.scrollbarSize.height,s.scrollbarSize.y=s.scrollbarSize.width,e.removeChild(t)}return s.scrollbarSize},util:{},addUtil:function(e,t){return s.setDefined("Nex.util."+e,t),this.util[e]=t},getUtil:function(e){return this.util[e]},extendUtil:function(e,t){return this.apply(this.util[e],t)},removeUtil:function(){return this.util[n]=null,delete this.util[n],this},mixins:{},addMixins:function(e,n){return s.setDefined("Nex.mixins."+e,n),n=t.isFunction(n)?n.call(this):n,this.mixins[e]=n},getMixins:function(e){return this.mixins[e]},extendMixins:function(e,t){return this.apply(this.mixins[e],t)},removeMixins:function(){return this.mixins[n]=null,delete this.mixins[n],this},when:function(){for(var e=[].slice.apply(arguments),n=[],i=0,r=e.length;r>i;i++){var o,a=e[i];if(s.isXtype(a)||s.isString(a)){var o=s.create(a);a=o&&o.getDeferred?o.getDeferred():null}s.isInstance(a)&&(a=a.getDeferred?a.getDeferred():null),a&&n.push(a)}return t.extend(t.when.apply(t,n),{success:function(){this.done.apply(this,arguments)},error:function(){this.fail.apply(this,arguments)},complete:function(){this.always.apply(this,arguments)}})},emptyFn:t.noop,error:function(e){var t,n=new Error(e===t?"":e);throw n}}),s.apply(s,{aliases:{},xtypes:{},classes:{},getClass:function(e){return this.classes[e]||this.aliases[e]||this.xtypes[e]},addClass:function(e,t){return this.classes[e]=t,s.setDefined(e,t),this},addXtype:function(e,t){return this.xtypes[e]=t,this},addAlias:function(e,t){return this.aliases[e]=t,s.setDefined(e,t),this},setDefined:function(e,t){return define(e,function(){return t}),this},createClass:function(){function e(e){var t=function(){};return t.prototype=e.prototype,t}return function(){var t=arguments[0],n=[].slice.call(arguments,1);if("function"!=typeof t)return null;var i=new(e(t));return t.apply(i,n),i}}(),create:function(){var e=[].slice.apply(arguments),t=e[0],n=e.slice(1),i=e.length;if(0>=i)return!1;if(s.isInstance(t))return t;if(s.isClass(t))return s.createClass.apply(s,[t].concat(n));if(s.isXtype(t)){var r=t,o=r.xtype;return delete r.xtype,t=s.getClass(o),t?s.isInstance(t)?t:s.createClass.apply(s,[t,r].concat(n)):!1}return s.isString(t)?(t=s.getClass(t),t?s.isInstance(t)?t:s.createClass.apply(s,[t].concat(n)):!1):!1},Create:function(){return this.create.apply(this,arguments)}})}(window,jQuery),function(){var e=[],t=Nex.enumerables,n=function(){},i=function(e){n.prototype=e;var t=new n;return n.prototype=null,t},r=function(){};Nex.chain=i,Nex.apply(r,{$className:"Nex.Base",$isClass:!0,xtype:"Nex.Base",superclass:null,extend:function(e){var t,n,o,a=e.prototype,s=this.$className||"";if(Nex.isObject(e))return void this.override(e);for(o in e)this[o]=e[o];if(this._optionsList=[],n=this.prototype=i(a),this.superclass=n.superclass=a,n.self=this,!e.$isClass){t=r.prototype;for(o in t)o in n&&(n[o]=t[o])}this.$className=s,n.$className=s},override:function(e){var n,i,r,o,a=this.prototype,s=[],l=function(e){return function(){return e.apply(this,arguments)}},d=this.$className||"";for(r in e)s.push(r);for(t&&s.push.apply(s,t),n=0,i=s.length;i>n;n++)r=s[n],e.hasOwnProperty(r)&&(o=e[r],"function"!=typeof o||o.$isClass||("undefined"!=typeof o.$owner&&(o=l(o)),o.$owner=this,o.$name=r),a[r]=o);return a.$className=d,a.self=this,this},addStatics:function(e){var t,n;for(n in e)e.hasOwnProperty(n)&&(t=e[n],this[n]=t);return this},addMembers:function(e){var n,i,r,o,a=this.prototype,s=[],l=this.$className||"";for(r in e)s.push(r);for(t&&s.push.apply(s,t),n=0,i=s.length;i>n;n++)r=s[n],e.hasOwnProperty(r)&&(o=e[r],"function"!=typeof o||o.$isClass||(o.$owner=this,o.$name=r),a[r]=o);return a.$className=l,a.self=this,this},addMember:function(e,t){var n={};return n[e]=t,this.addMembers(n),this},implement:function(){this.addMembers.apply(this,arguments)},borrow:function(e,t){var n,i,r,o,a,s=this.prototype,l=e.$isClass?e.prototype:(e=Nex.getClass(e))?e.prototype:{};for(t=$.isArray(t)?[].concat(t):[t],n=0,i=t.length;i>n;n++)r=t[n],a=l[r],"function"==typeof a?(o=function(){return a.apply(this,arguments)},o.$owner=this,o.$name=r,s[r]=o):s[r]=a;return s.self=this,this},setXtype:function(e){var t;return e===t?this:(this.xtype=e,Nex.addXtype(e,this),this)},setAliasName:function(e){var t=this;if(e){var n=$.trim(e).split(/\s+/g);$.each(n,function(e,n){Nex.setNamespace(n,t),Nex.addAlias(n,t)})}return t},_optionsList:[],setOptions:function(e){if(Nex.isObject(e)){var t=e;e=function(){return t}}return Nex.isFunction(e)&&this._optionsList.push(function(t,n){return e.call(this,t,n)}),this},getOptions:function(e){var t={},n=this._optionsList||[],i=this.getSuperClassOptions(e)||{};i=i.concat(n);var r=i.length;if(r)for(var o=0;r>o;o++){var a=i[o];Nex.apply(t,a.call(this,t,e||this))}return Nex.clone(t,!0)},getSuperClass:function(){return this.superclass?this.superclass.self:null},getSuperClassOptions:function(e){for(var t=this,n=[];t=t.getSuperClass();)n.push.apply(n,t._optionsList||[]);return n.reverse()},create:function(){return Nex.create.apply(Nex,[this].concat([].slice.apply(arguments)))}}),Nex.apply(r.prototype,{isInstance:!0,$className:"Nex.Base",self:r,superclass:null,callParent:function(t){var i,r=(i=this.callParent.caller)&&(i=i.$owner?i:i.caller)&&i.$owner.superclass[i.$name];return r=r||n,r.apply(this,t||e)},extend:function(e){var t=this,n=t.self;return e&&$.isPlainObject(e)&&n.override.call(t,e),t},addMixins:function(){var e=this,t=this.configs,n=[].slice.call(arguments,0),i=[],r={},o=0,a=n.length;if(!a)return e;for(;a>o;o++){var s=n[o];(!Nex.isString(s)||(s=Nex.getClass(s)))&&(Nex.isClass(s)?(i.push(function(e,t){return s.getOptions(t)}),Nex.apply(r,s.prototype||{})):Nex.isObject(s)&&(s.configs&&i.push(s.configs),delete s.configs,Nex.apply(r,s)))}if(Nex.applyIf(e,r),i.length){for(var l={},o=0,a=i.length;a>o;o++){var d=i[o];Nex.isFunction(d)&&Nex.apply(l,d(l,e)||{}),Nex.isObject(d)&&Nex.apply(l,Nex.clone(d,!0))}Nex.applyIf(t,l)}return e},initConfigs:function(e){var t=this,n=t.self,i=n.getOptions(t);Nex.isFunction(e)&&(e=e.call(t,i)||{});var r=Nex.apply({},e,i);if(t.configs=r,"mixins"in r){var o=r.mixins;delete r.mixins;var a=[];Nex.isPlainObject(o)?$.each(o,function(e,t){a.push(t)}):a=Nex.isArray(o)?o:[o],t.addMixins.apply(t,a)}var s=[];if(r.properties&&s.push(r.properties),r.override&&s.push(r.override),s.length){r.properties=null,r.override=null,delete r.properties,delete r.override;for(var l=0,d=s.length;d>l;l++){var c=s[l];c&&(Nex.isFunction(c)&&(c=c.call(t,r)),c&&Nex.isObject(c)&&t.extend(c))}}return r},C:function(e,t){if("undefined"==typeof e)return this.configs;if("undefined"==typeof t&&"object"!=typeof e)return this.configs[e];if($.isFunction(t))this.configs[e]=t.call(this,this.configs[e]);else if($.isPlainObject(e)){var n=e,i=this.configs;if(t)return $.extend(i,n),this;for(var r in n){var o=n[r],a=i[r];$.isArray(a)?a.push.apply(a,o):$.isPlainObject(a)?$.extend(a,o):i[r]=o}}else this.configs[e]=t;return this},set:function(){return this.C.apply(this,arguments)},get:function(){return this.C.apply(this,arguments)},setConfig:function(){return this.C.apply(this,arguments)},getConfig:function(){return this.C.apply(this,arguments)},constructor:function(e){return this.initConfigs.apply(this,arguments),this}}),Nex.Base=r,Nex.classes["Nex.Base"]=r}(),function(e){var t=function(){function e(){return this.constructor.apply(this,arguments)}return e},n=Nex.Base;Nex.apply(Nex,{baseChain:function(e){var i=(n.prototype,t());return n.extend.call(i,n),null===e&&(e=Nex.uuid()),e&&(i.$className=e,i.prototype.$className=e),i},extend:function(e,t,n){var i,r,o;if(2===arguments.length&&Nex.isObject(t)&&(n=t,t=null),i="function"==typeof e&&e.$isClass?e:Nex.getClass(e),i||(i=Nex.Class(e)),i.isInstance)throw new Error("class is isInstance");if(1===arguments.length)return i;n=Nex.apply({},n)||{},o=n.extend||t,delete n.extend,r=o&&"function"==typeof o&&o.$isClass?o:o?Nex.getClass(o):o,r&&i.extend(r);var a,s,l,d;"alias"in n&&n.alias&&(a=n.alias+"",delete n.alias),"xtype"in n&&n.xtype&&(s=n.xtype+"",delete n.xtype),"configs"in n&&n.configs&&(l=n.configs,delete n.configs),"mixins"in n&&n.mixins&&(d=n.mixins,delete n.mixins),l&&i.setOptions(l),i.setXtype(i.$className),i.override(n),this._setMixins(d,i);var c=!!i.prototype.singleton;return c&&(i=new i),
a&&this._setAliasName(a,i),!c&&i.$isClass&&this._setClassXtype(s,i),i},_setMixins:function(e,t){var n=[];Nex.isPlainObject(e)?$.each(e,function(e,t){n.push(t)}):n=Nex.isArray(e)?e:[e];var i=[],r={},o=0,a=n.length;if(a){for(;a>o;o++){var s=n[o];(!Nex.isString(s)||(s=Nex.getClass(s)))&&(Nex.isClass(s)?(i.push(function(e,t){return s.getOptions(t)}),Nex.apply(r,s.prototype||{})):Nex.isObject(s)&&(s.configs&&i.push(s.configs),delete s.configs,Nex.apply(r,s)))}Nex.applyIf(t.prototype,r),i.length&&t.setOptions(function(e,t){for(var e=e||{},t=t||this,n={},r=0,o=i.length;o>r;r++){var a=i[r];Nex.isFunction(a)&&Nex.apply(n,a(n,t)||{}),Nex.isObject(a)&&Nex.apply(n,Nex.clone(a,!0))}return Nex.applyIf(e,n)})}},_setAliasName:function(e,t){var n=$.trim(e).split(/\s+/g);$.each(n,function(e,n){n&&(Nex.setNamespace(n,t),Nex.addAlias(n,t))})},_setClassXtype:function(e,t){var n=$.trim(e).split(/\s+/g);$.each(n,function(e,n){n&&t.setXtype(n)})},namespace:function(t){var n,i=e,r=t+"";r=r.split(".");for(var o=0,a=r.length-1;a>o;o++){var s=r[o];s in i&&i[s]||(i[s]={}),i=i[s]}return i[r[o]]=i[r[o]]===n?{}:i[r[o]]},setNamespace:function(t,n){var i,r=e,o=t+"";n=n===i?{}:n,o=o.split(".");for(var a=0,s=o.length-1;s>a;a++){var l=o[a];l in r&&r[l]||(r[l]={}),r=r[l]}return r[o[a]]=n},getNamespace:function(t){var n,i=e,r=t+"";r=r.split(".");for(var o=0,a=r.length-1;a>o;o++){var s=r[o];if(!(s in i&&i[s]))return n;i=i[s]}return i[r[o]]},ns:function(){return this.namespace.apply(this,arguments)},Class:function(e,t,n){if(!arguments.length)throw new Error("className not exists!");var i=[];Nex.isObject(e)&&(t=e,e=null);var r=Nex.baseChain(e);return e=r.$className,this.classes[e]=r,Nex.setDefined(e,r),e&&(i[0]=e),t&&(i[1]=t),n&&(i[2]=n),this.setNamespace(e,this.extend.apply(this,i)),r},define:function(){return this.Class.apply(this,arguments)}})}(window),function(){Nex.define("Nex.EventObject",{xtype:"eventobject",configs:{context:null,stopOnFalse:!0,eventMaps:{},events:{},listeners:{}},initConfigs:function(e){var e=this.callParent(arguments);return e.self=this,this.initEvents(e),this.sysEvents(),this.bindConfigsEvnet(),e},initEvents:function(e){function t(e){if($.isPlainObject(e)&&!$.isEmptyObject(e))for(var t in e){var i=String(t),r=e[t],o=null;$.isPlainObject(r)&&!$.isEmptyObject(r)&&(o=r.scope||r.context||null,r=r.func||r.fn||r.callBack||r.callback),$.isFunction(r)&&r!==$.noop&&n.bind(i,r,o)}}var n=this,i=e.events?e.events:{};e.events={},t.call(n,i),t.call(n,e.listeners||{})},sysEvents:function(){var e=this;e.configs},bindConfigsEvnet:function(){var e=this,t=e.configs,n=(t.events?t.events:{},/^@?on[A-Z][\S|\.]*$/);for(var i in t)if(n.test(i)){var r=t[i],o=null;$.isPlainObject(r)&&!$.isEmptyObject(r)&&(o=r.context||r.scope||null,r=r.func||r.fn||r.callBack||r.callback),$.isFunction(r)&&r!==$.noop&&e.bind(i,r,o)}},$eventIndex:1,bind:function(e,t,n){if("undefined"==typeof e)return!1;if(""===e||"@"===e)return!1;var i=this,r=i.configs,o=r.events;if("object"===$.type(e)){var a=[];for(var s in e){var l=n,d=e[s];$.isPlainObject(d)&&!$.isEmptyObject(d)&&(l=d.scope||d.context||l,d=d.func||d.fn||d.callBack||d.callback);var c=i.bind(s,d,l);a.push(c)}return a}var u=String(e).split(/\s+|,/);if(u.length>1){for(var h=u.length,a=[],f=0;h>f;f++)u[f]&&a.push(i.bind(u[f],t,n));return a}var g=e.charAt(0);"@"===g&&(n=i,e=e.slice(1));var p=e.split(".");e=p[0],p=p.slice(1);var v=p.join(".");if(!e)return!1;if(e in r.eventMaps&&(e=r.eventMaps[e]),o[e]=o[e]||[],$.isFunction(o[e])&&(o[e]=[]),!$.isFunction(t)||t===$.noop)return!1;var f={scope:n?n:null,func:t,ext:v,_index:i.$eventIndex++};return o[e].push(f),f._index},on:function(){return this.bind.apply(this,arguments)},one:function(e,t,n){if("undefined"==typeof e)return!1;var t=t||$.noop,i=this,n=n?n:i,r=function(){i.unbind(r.id);var e=t.apply(this,arguments);return e},o=null;return o=i.bind(e,r,n),r.id=o,o},unbind:function(e,t){var n,i=this,r=i.configs,o=String(e).split(/\s+|,/);if(o.length>1){for(var a=o.length,s=0;a>s;s++)o[s]&&i.unbind(o[s]);return i}var l=r.events,t=t===n?!1:t;if("number"==typeof e){for(var d in l)i.unbind(d,e);return i}var c=String(e).split(".");e=c[0],c=c.slice(1);var u=c.join(".");if(""===e&&""!==u){for(var d in l)d&&i.unbind([d,u].join("."));return i}if(e in r.eventMaps&&(e=r.eventMaps[e]),!(e in l))return i;if($.isFunction(l[e]))return l[e]=[],i;var h=[];if(t===!1)if(""===u)l[e]=[];else for(var f=0;f<l[e].length;f++){var s=l[e][f];("object"!=typeof s||s.ext!==u)&&h.push(s)}else for(var f=0;f<l[e].length;f++){var s=l[e][f];("object"!=typeof s||s._index!==t)&&h.push(s)}return l[e]=h,i},off:function(){return this.unbind.apply(this,arguments)},lockEvent:function(e){var t=this,n=t._eventLocks||{};return n[e]=!0,t._eventLocks=n,!0},unLockEvent:function(e){var t=this,n=t._eventLocks||{};return n[e]=!1,t._eventLocks=n,!0},_denyEvent:!1,_eventLocks:null,_executeEventMaps:null,fireEvent:function(e,t){var n,i=this;if(!i._denyEvent){var r=i.configs,o=r.context||i,a=String(e).charAt(0),s=!1;if("@"===a&&(s=!0,e=String(e).slice(1)),e){e in r.eventMaps&&(e=r.eventMaps[e]);var l=r.events[e],t=t===n?[]:t;t=$.isArray(t)?t:"object"===$.type(t)&&"callee"in t&&"length"in t?t:[t];var d=i._eventLocks||{};if(!d[e]&&(i._executeEventMaps=i._executeEventMaps||{},!i._executeEventMaps[e])){i._executeEventMaps[e]=!0;var c=!0;if($.isArray(l))for(var u=l.length,h=0;u>h;h++){var f=l[h];if($.isPlainObject(f)?c=f.func.apply(f.scope||o,t):$.isFunction(f)&&(c=f.apply(i,t)),r.stopOnFalse&&c===!1)break}else $.isFunction(l)&&(c=l.apply(i,t));return i._executeEventMaps[e]=!1,c}}}},fire:function(){return this.fireEvent.apply(this,arguments)}})}(),function(){Nex.apply(Nex,{GET_CMPS_CLEAR:!1,RESIZE_DELAY:100,MAX_REMOVE_NUM:5}),Nex.define("Nex.ComponentManager",{singleton:!0,extend:"Nex.EventObject",constructor:function(){this.callParent(arguments),this.compRoot="root",this.components={},this._levelCmps={},this._autoResizeLevelCmps={},this.fireEvent("onCreate",[this.configs])},sysEvents:function(){this.callParent(arguments);var e=this;return $(function(){var t={width:$(window).width(),height:$(window).height()},n=0;$(window).unbind("resize.ComponentManager"),$(window).bind("resize.ComponentManager",function(){n&&(clearTimeout(n),n=0),n=setTimeout(function(){clearTimeout(n),n=0;var i=$(window).width(),r=$(window).height();(t.width!==i||t.height!==r)&&(t.width=i,t.height=r,e.fireEvent("onResize"),e.fireEvent("onBrowserResize"))},Nex.RESIZE_DELAY)})}),e.bind("onResize._sys",e._resize,e),e},_refreshCmps:function(e){var t=this,n=t.components,i=0;for(var r in n)t.isExists(r)||i++;return(e||i&&i>=Nex.MAX_REMOVE_NUM)&&t.cmpChange(),i},getCmp:function(e){var t,n=this;return e===t?(Nex.GET_CMPS_CLEAR&&n._refreshCmps(),n.components):(n.isExists(e),Nex.unDefined(n.components[e],null))},getGroup:function(e){var t,n=this;if(e===t)return[];var i=[],r=n.getCmp();if("*"===e)return $.each(r,function(e,t){i.push(t)}),i;if(e=$.trim(e+"").split(/\s+/g),!e)return i;for(var o in r){var a=r[o];if(a)for(var s=$.trim(a.C("groupName")+"").split(/\s+/g),l=String(s),d=0,c=e.length;c>d;d++){var u=e[d];if(s.length&&-1!==l.indexOf(u)){i.push(a);break}}}return i},register:function(e,t){Nex.isInstance(e)&&(t=e,e=t.configs.id),this.components[e]=t,this.cmpChange()},addCmp:function(e,t){this.register.apply(this,arguments)},cmpChange:function(){this.__disposed1=!1},removeCmp:function(e){var t=this.components[e];t&&(t.isInstance&&(t.onDestroy(),t.fireEvent("onDestroy")),this.components[e]=null,delete this.components[e])},isExists:function(e){var t=this,n=t.components[e];return n&&n.getDom().length?!0:(n&&n.C("autoDestroy")&&t.removeCmp(e),!1)},_getDomCmps:function(e){var e=$(e);if(!e.length)return!1;var t,n=this,i=[],r=e.closest(".nex-component-item");t=r.length?r.attr("id"):n.compRoot;for(var o=n.components,a=n.getLevelCmps(),s=a[t]||[],l=0,d=s.length;d>l;l++){var c=s[l],r=o[c.id];r&&i.push(r)}return i},resizeDom:function(e){var t=this._getDomCmps(e);if(t===!1)return this;for(var n=0;n<t.length;n++){var i=t[n];i&&i.isAcceptResize()&&i.resize()}return this},resize:function(e){return this._resize(e),this},refreshComponents:function(){this.refreshLevelCmps()},getChildrens:function(e){for(var t=this,n=[],i=t.components,r=t.getLevelCmps(),o=e||this.compRoot,a=r[o]||[],s=0,l=a.length;l>s;s++){var d=a[s],c=i[d.id];c&&n.push(c)}return n},getAllChildrens:function(e){var t=this,n=[],i=t.getChildrens(e);n=n.concat(i);for(var r=0,o=i.length;o>r;r++){var a=i[r];if(a){var e=a.C("id");n=n.concat(t.getAllChildrens(e))}}return n},getChildrensByDom:function(e){var t=this;return t._getDomCmps(e)||[]},getAllChildrensByDom:function(e){var t=this,n=[],i=t._getDomCmps(e)||[];n=n.concat(i);for(var r=0,o=i.length;o>r;r++){var a=i[r];if(a){var s=a.C("id");n=n.concat(t.getAllChildrens(s))}}return n},refreshLevelCmps:function(){return this.__disposed1=!1,this.getLevelCmps()},__disposed1:!1,getLevelCmps:function(){var e,t=this;if(t.__disposed1)return t._levelCmps;t._refreshCmps();var n=t.components,i=n;t._levelCmps={};var r=t._levelCmps;for(var o in i){var a=i[o];if(a){var s=t.compRoot,l=$("#"+o).parents(".nex-component-item:first");if(l.length){var d=l.attr("id"),c=n[d];c&&(s=d)}var u={id:o,pid:s};r[s]=r[s]===e?[]:r[s],r[s].push(u)}}return t.__disposed1=!0,t._levelCmps},_resize:function(e){var t,n=this,e=(n.components,e===t?n.compRoot:e),i=n.getChildrens(e);if($.isArray(i))for(var r=0;r<i.length;r++){var o=i[r];o&&o.isAcceptResize()&&o.resize()}},sendMessage:function(e,t,n,i){var r,o=this,a=o.getCmp(),n=Nex.unDefined(n,[]);if(n=$.isArray(n)?n:[n],i&&n.push(i),e===r)return!1;if("*"===e)for(var s in a){var l=a[s];l.isSleep()||l.fireEvent(t,n)}e=$.isArray(e)?e:[e];for(var d=0,c=e.length;c>d;d++){var u=e[d];Nex.isInstance(u)?u.isSleep()||u.fireEvent(t,n):(l=a[u],l&&(l.isSleep()||l.fireEvent(t,n)))}return!0},postMessage:function(e,t,n,i){var r=this;return setTimeout(function(){r.sendMessage(e,t,n,i)},0),!0},sendMessageByGroupName:function(e,t,n,i){var r,o=this;if(e===r)return!1;var a=o.getGroup(e),n=Nex.unDefined(n,[]);n=$.isArray(n)?n:[n],i&&n.push(i);for(var s=0,l=a.length;l>s;s++){var d=a[s];d.isSleep()||d.fireEvent(t,n)}return!0},sendMessageToGroup:function(){return this.sendMessageByGroupName.apply(this,arguments)},postMessageByGroupName:function(e,t,n,i){var r=this;return setTimeout(function(){r.sendMessageByGroupName(e,t,n,i)},0),!0},postMessageToGroup:function(){return this.postMessageByGroupName.apply(this,arguments)}}),$.each(["gc","removeComponent","removeServer","get","getCmp","getGroup","getChildrens","getAllChildrens","getChildrensByDom","getAllChildrensByDom","refreshComponents","resize","sendMessage","postMessage","sendMessageByGroupName","sendMessageToGroup","postMessageByGroupName","postMessageToGroup"],function(e,t){var n=Nex.ComponentManager,i={gc:"_refreshCmps",removeComponent:"removeCmp",removeServer:"removeCmp",get:"getCmp",resize:"_resize"},r={gc:!0,removeComponent:!0,removeServer:!0,resize:!0,sendMessage:!0,postMessage:!0,sendMessageByGroupName:!0,sendMessageToGroup:!0,postMessageByGroupName:!0,postMessageToGroup:!0};Nex[t]=function(){var e=n[i[t]||t].apply(n,arguments);return r[t]?this:e}}),jQuery.fn.extend({resizeCmp:function(){return this.each(function(){Nex.ComponentManager.resizeDom(this)})},sendMessage:function(e,t,n){var i=[].slice.apply(arguments);if(!i.length)return this;var r=!0;return"boolean"===$.type(i[i.length-1])&&(r=i[i.length-1],i.pop()),this.each(function(){var e=r?Nex.ComponentManager.getAllChildrensByDom(this):Nex.ComponentManager.getChildrensByDom(this);Nex.ComponentManager.sendMessage.apply(Nex.ComponentManager,[e].concat(i))})},postMessage:function(e,t,n){var i=[].slice.apply(arguments);if(!i.length)return this;var r=!0;return"boolean"===$.type(i[i.length-1])&&(r=i[i.length-1],i.pop()),this.each(function(){var e=r?Nex.ComponentManager.getAllChildrensByDom(this):Nex.ComponentManager.getChildrensByDom(this);Nex.ComponentManager.postMessage.apply(Nex.ComponentManager,[e].concat(i))})}})}(),function(){Nex.define("Nex.AbstractComponent",{extend:"Nex.EventObject",xtype:"abstractcomponent",_isInit:!1,configs:function(){return{prefix:"nex",id:"",renderTo:document.body,autoDestroy:!0,autoRender:!0,denyManager:!1,init:$.noop,renderTpl:"",renderData:{},renderSelectors:{},groupName:"",cacheData:{},tpl:{},template:Nex.getTemplate(),parent:null,deferred:$.Deferred?$.Deferred():null,views:{},plugins:[],defalutxType:"panel",defaults:{},html:"",items:[]}},getScrollbarSize:Nex.getScrollbarSize,isInit:function(){return this._isInit},constructor:function(){this.callParent(arguments);var e=this.configs;e.id=this.getId(),e.autoRender&&this.initRender()},rendered:!1,initRender:function(e,t){var n=this,i=this.configs;return this.rendered?this:(n._isInit=!0,n.initPlugins(),i.renderTo=this._undef(e,i.renderTo),i.renderAfter=this._undef(t,i.renderAfter),this.fireEvent("onStart",[i]),this.onStart(i),this.rendered=!0,i.denyManager||Nex.ComponentManager.register(n),this.initInstance(i),this)},_initPlugins:!1,initPlugins:function(){var e=this,t=this.configs,n=t.plugins||[];if(e._initPlugins)return e;e._initPlugins=!0;for(var i=0,r=n.length;r>i;i++)e.constructorPlugin(n[i]);return e},constructorPlugin:function(e){var t=e,e=Nex.create(e);return e&&"function"==typeof e.init?e.init(this):"function"==typeof t&&t(this),this},onStart:function(){},initInstance:function(e){var t=this,n=t.configs;t.onInitComponent(n),t.fireEvent("onInitComponent",[n]),t.initContainer(),t.initRenderTpl(),t.initComponent(n),t.initComponentSize(n),t.initRenderContent(n),t.onAfterRender(),t.fireEvent("onAfterRender",[n]),t.onCreate(n),t.fireEvent("onCreate",[n]),this._isInit=!1},initContainer:function(){},initRenderTpl:function(){},initComponent:function(){this.constructPlugins()},initComponentSize:function(){this.setSize()},initRenderContent:function(){},onInitComponent:function(){},onAfterRender:function(){},onCreate:function(){},constructPlugins:function(){},setSize:function(){},render:function(e,t){return this.rendered?this.renderTo.apply(this,arguments):this.initRender.apply(this,arguments),this},isRendered:function(){return this.rendered},_checkToRender:function(){this.rendered||this.render()},renderTo:function(){},_getId:function(){var e=this.configs;return e.prefix+ ++Nex.aid},getId:function(){var e=this.configs;return Nex.isEmpty(e.id)?this._getId():e.id},enableAutoResize:function(){return this.configs.autoResize=!0,this},disabledAutoResize:function(e){return this.configs.autoResize=!1,this},_undef:function(e,t){return void 0===e?t:e},resize:function(){var e=this,t=e.configs;setTimeout(function(){Nex.ComponentManager.fireEvent("onResize",[t.id])},0)},__ars:!0,isAcceptResize:function(){var e=this.configs;return e.autoResize&&this.__ars},setAcceptResize:function(e){var e=void 0===e?!0:e;return this.__ars=!!e,this},tpl:function(e,t){var n,i=this;if(i.configs,e===n&&(e=""),t===n&&(t={}),""===e)return e;var r=[].slice.apply(arguments,[1]),o=i.getTplFn(e);return o.apply(i,r)},getTplFn:function(e,t){var n=this,i=n.configs;return i.template?$.isFunction(e)?e:e in i.tpl&&i.tpl[e]?i.template.compile(i.tpl[e],null,t):e in n?n[e]:i.template.compile(e+"",null,t):$.isFunction(e)?e:e in n?n[e]:function(){return e}},denyEventInvoke:function(){var e,t=this;if(arguments.length){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n[0];r in t&&(t._denyEvent=!0,n.splice(0,1),e=t[r].apply(t,n),t._denyEvent=!1)}return e},methodInvoke:function(){var e,t=this,n=t._methodLocks||{};if(arguments.length){for(var i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);var o=i[0];if(n[o])return;o in t&&(i.splice(0,1),e=t[o].apply(t,i))}return e},lockMethod:function(e){var t=this,n=t._methodLocks||{};return n[e]=!0,t._methodLocks=n,!0},unLockMethod:function(e){var t=this,n=t._methodLocks||{};return n[e]=!1,t._methodLocks=n,!0},__sleep:!1,isSleep:function(){return this.__sleep},sleep:function(){return this.__sleep=!0,this},wakeup:function(){return this.__sleep=!1,!1},getParent:function(){var e=this.configs;if(null!==e.parent){if(Nex.isInstance(e.parent))return e.parent;var t=Nex.get(e.parent);if(t)return t}return null},removeCmp:function(e){var t=this.configs;Nex.ComponentManager.removeCmp(t.id)},destroy:function(){return this.removeCmp(),this},onDestroy:function(){},getDom:function(){return[]},getDeferred:function(){var e=this.configs;return e.deferred}})}(),function(){Nex.define("Nex.Component",{extend:"Nex.AbstractComponent",xtype:"component",_isInit:!1,configs:function(){return{prefix:"component-",tag:"div",renderTo:document.body,renderAfter:!0,autoDestroy:!0,autoResize:!1,selectionable:!0,autoSize:!1,width:"",height:"",realWidth:null,realHeight:null,_width:null,_height:null,__width:0,__height:0,maxWidth:0,maxHeight:0,minHeight:0,minWidth:0,disabledItems:!1,focusable:!0,tabIndex:!1,attrs:{},style:{},"class":"",containerCls:"nex-component",borderCls:"",uiPrefix:"nex-ui",ui:"defalut",uiCls:[],cls:"",cssText:""}},onStart:function(e){this.callParent(arguments),e.__width=e.width,e.__height=e.height},renderedContainer:!1,initContainer:function(){var e=this,t=e.configs;if(e.callParent(arguments),e.renderedContainer)return e;var n,i=$($.isWindow(t.renderTo)?document.body:t.renderTo),r=[t.containerCls,"nex-component-item"];if(t.border===!0&&r.push(t.borderCls),t.ui){var o=[t.uiPrefix,t.ui].join("-");r.push(o);var a=$.isArray(t.uiCls)?t.uiCls:[t.uiCls];$.each(a,function(e,t){t&&r.push([o,t].join("-"))})}t.cls&&r.push(t.cls),t["class"]&&r.push(t["class"]);var s=t.tag||"div";return n=$(document.createElement(s)),n.attr({id:t.id,"class":r.join(" ")}),t.renderAfter?i.append(n):i.prepend(n),t.views.container=n,e.el=n,t.cssText&&(n[0].style.cssText=t.cssText),n.attr(t.attrs).css(t.style),t.selectionable||e._disableSelection(),t.focusable&&t.tabIndex!==!1&&n.attr({tabIndex:t.tabIndex}),e.renderedContainer=!0,e},onContainerCreate:function(){},initRenderTpl:function(){var e=this,t=e.configs;e.callParent(arguments);var n=e.el,i=Nex.apply({},t.renderData,t),r=t.renderTpl;return r=Nex.isFunction(r)?r.call(e,i):Nex.isArray(t.renderTpl)?e.tpl(r.join(""),i):e.tpl(r+"",i),n.html(r),$.each(t.renderSelectors,function(i,r){t.views[i]=$(r,n),e[i]=t.views[i]}),e.onContainerCreate(n,t),e.fireEvent("onContainerCreate",[n,t]),e},initRenderContent:function(){return this.doRenderContent(),this},doRenderContent:function(){var e=this,t=e.configs,n=e.getBody();if(t.disabledItems)return n;var i=t.html;e.addComponent(n,i,null,t.defaults);var i=t.items;return e.addComponent(n,i,null,t.defaults),n},setSize:function(){return this.setContainerSize.apply(this,arguments)},setContainerSize:function(e,t){var n=this,i=n.configs;i.width=Nex.unDefined(e,i.width),i.height=Nex.unDefined(t,i.height);var r={width:i.width,height:i.height};return n.fireEvent("onSetContainerSize",[r,i]),n.el.css({width:r.width,height:r.height}),this},getContainer:function(){var e=this,t=e.configs;return t.views.container},getBody:function(){var e=this,t=e.configs;return t.views.container},_disableSelection:function(){this.el.disableSelection()},isExists:function(){var e=this,t=e.configs,n=e.getDom();return e.isRendering()?n.length?!0:(t.autoDestroy&&e.removeCmp(t.id),!1):!0},parseItems:function(e,t,n,i){var r,o=this,a=o.configs,n=n===r||null===n?!0:n,i=$.extend({xtype:a.defalutxType},i||{}),s=n?"append":"prepend";$.isFunction(t)&&!Nex.isClass(t)&&(t=t.call(o,e));var l=[],t=Nex.isArray(t)?t:[t];if(e&&t.length)for(var d=0;d<t.length;d++){var c=t[d];if(""!==c&&c!==r&&(!Nex.isFunction(c)||Nex.isClass(c)||(c=c.call(o,e,a),""!==c&&"boolean"!==$.type(c)&&"null"!==$.type(c)&&"undefined"!==$.type(c))))if(Nex.isPlainObject(c)&&!Nex.isInstance(c)&&(c=$.extend({},i,c)),Nex.isInstance(c))c.render(e,s),l.push(c);else if(Nex.isClass(c)||Nex.isXtype(c)){if(!Nex.Create)continue;var u;u=Nex.isXtype(c)?Nex.Create($.extend({parent:a.id},c,{renderTo:e,autoRender:!0})):Nex.Create(c,$.extend({},i,{renderTo:e,parent:a.id,autoRender:!0})),l.push(u),n||$(e)[s](u.getDom())}else if(Nex.isjQuery(c)||Nex.isElement(c))$(e)[s](c),l.push(c);else{c+="";var h=$._parseHTML(c);h=$(h).clone(),l.push(h),$(e)[s](h)}}return l},addComponent:function(e,t,n){return this.parseItems.apply(this,arguments)},addCmp:function(e,t,n){return this.parseItems.apply(this,arguments)},renderComponent:function(e,t,n,i){return this.parseItems(t,e,n,i)},renderTo:function(e,t){var n,i=this,r=this.configs,t=t===n?!0:t,o=t?"append":"prepend";if(!e)return i;if(!i.isExists())return i;var a=!1;if(Nex.isInstance(e)&&e.isExists()){var s=e.getBody();s[o](i.getEl()),a=!0}else{var l=$(e);l.length&&(l[o](i.getEl()),a=!0)}return r.autoResize&&a&&(i.resize(),Nex.ComponentManager.cmpChange()),i},getDom:function(){var e=this,t=e.configs;return $("#"+t.id)},getEl:function(){return this.el||this.getDom()},getChildrens:function(){var e=this.configs;return Nex.ComponentManager.getChildrens(e.id)},getAllChildrens:function(){var e=this.configs;return Nex.ComponentManager.getAllChildrens(e.id)},getParent:function(){var e=this.getDom(),t=this.configs,n=null;if(!e.length)return n;if(null!==t.parent){if(Nex.isInstance(t.parent))return t.parent;var i=Nex.get(t.parent);if(i)return i}var r=e.parent(".nex-component-item"),o=r.attr("id");return n=o?Nex.get(id):null,n?n:null},_checkYScrollEnd:function(e){return Nex._checkYScrollEnd(e)},_checkXScrollEnd:function(e){return Nex._checkXScrollEnd(e)},isScrollEnd:function(e,t){return Nex.isScrollEnd(e,t)},__getCalcSize:function(e,t){var n,i=this;return this.configs,$.isFunction(e)&&(e=e.call(i)),e===n&&(e=0),e=parseInt(e),isNaN(e)?0:e},_getCutWidth:function(){var e=this,t=this.configs,n=t.cutWidth;return e.__getCalcSize(n,0)},_getCutHeight:function(){var e=this,t=this.configs,n=t.cutHeight;return e.__getCalcSize(n,1)},_getMinWidth:function(){var e=this,t=this.configs,n=t.minWidth;return e.__getCalcSize(n,0)},_getMaxWidth:function(){var e=this,t=this.configs,n=t.maxWidth;return e.__getCalcSize(n,0)},_getMinHeight:function(){var e=this,t=this.configs,n=t.minHeight;return e.__getCalcSize(n,1)},_getMaxHeight:function(){var e=this,t=this.configs,n=t.maxHeight;return e.__getCalcSize(n,1)},removeCmp:function(){this.callParent(arguments),Nex.gc()},destroy:function(){return this.el.remove(),this.callParent(),this}})}(),define("Nex/Nex",["require"],function(e){return Nex}),define("Nex",["Nex/Nex"],function(e){return e}),define("Nex/util/SubmitForm",["require","exports","module","Nex"],function(e,t,n){e("Nex");var i={frame:function(e,t,n,i){var r="sf"+Nex.aid++,o=document.createElement("DIV");o.innerHTML='<iframe style="display:none" src="about:blank" id="'+r+'" name="'+r+"\" onload=\"Nex.getUtil('SubmitForm').loaded('"+r+"')\"></iframe>",document.body.appendChild(o);var a=document.getElementById(r);return e.setAttribute("target",r),a.isXML=!!n,a.docRoot=i||"body",a.onComplete=function(e){t&&"function"==typeof t&&t(e),o.parentNode&&o.parentNode.removeChild(o)},o.abort=function(){this.parentNode&&this.parentNode.removeChild(this)},o},submit:function(e,t,n,i){"object"!=typeof e&&(e=document.getElementById(e));var r=this.frame(e,t,n,i);return e.submit(),r},loaded:function(e){function t(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}var n=document.getElementById(e);if(n){var i,r="";try{i=t(n)}catch(o){r=",cross-origin"}if(i){if("about:blank"==i.location.href)return;if(n.isXML)try{r=n.contentWindow.document.XMLDocument.text}catch(o){try{r=n.contentWindow.document.documentElement.firstChild.wholeText}catch(o){try{r=n.contentWindow.document.documentElement.firstChild.nodeValue}catch(o){r=",cross-origin"}}}else{var a=i.getElementsByTagName(n.docRoot)[0];a&&(r=a.textContent?a.textContent:a.innerText)}}"function"==typeof n.onComplete&&n.onComplete(r)}}};return Nex.addUtil("SubmitForm",i),i}),define("Nex/Ajax",["require","Nex/util/SubmitForm"],function(e){e("Nex/util/SubmitForm");var t=Nex.define("Nex.Ajax",{extend:"Nex.AbstractComponent",xtype:"ajax",configs:function(e){return{prefix:"nexajax-",autoDestroy:!1,sendType:"ajax",responseXML:!1,docRoot:"body",injectFields:"",fileFields:"",ajax:null,_data:{},data:{},_qdata:{},dataFilter:null,events:{}}}});return $.each(["get","post"],function(e,n){t[n]=function(e,t,i,r){return $.isFunction(t)&&(r=r||i,i=t,t=void 0),this.create({type:n,url:e,data:t,success:i,dataType:r})}}),t.addStatics({when:function(){return Nex.when.apply(Nex,arguments)},getScript:function(e,t){return this.get(e,null,t,"script")},getJSON:function(e,t,n){return this.get(e,t,n,"json")},request:function(e){return this.create(e)}}),t.override({initComponent:function(){function e(e){var e=e&&"object"==typeof e?e:s;return Nex.applyIf(e,s)}var t=this,n=this.configs;t.callParent(arguments),n._beforeSend=n.beforeSend||null,n._error=n.error||null,n._success=n.success||null,n._abort=n.abort||null,n._complete=n.complete||null,$.isPlainObject(n.data)?n.data=$.extend({},n._data,n.data,n._qdata):"string"==typeof n.data&&"string"==typeof n._qdata&&(n.data=n.data.length?"&"+n._qdata:n._qdata);t.getDeferred();if(n.beforeSend=function(){t.doBeforeSend.apply(t,arguments)},n.success=function(){t.doSuccess.apply(t,arguments)},n.error=function(){t.doError.apply(t,arguments)},n.complete=function(){t.doComplete.apply(t,arguments)},t.fireEvent("onAjaxReady",[n]),n.sendType=(n.sendType+"").toLowerCase(),$.isFunction(n.url)){n.ajax=$.Deferred?$.Deferred():n.url;var i=function(e){var i=Nex.unDefined(i,"success"),r=Nex.unDefined(r,null);n.success.apply(t,[e,"success",null]),n.complete.call(t,r,i)},r=function(e,i){var r=Nex.unDefined(e,"error"),i=Nex.unDefined(i,null);n.error.apply(t,[null,r,i]),n.complete.call(t,null,r)},o=n.beforeSend.call(t,null,n);if(o!==!1){var a=$.extend({dataFilter:null},n);delete a.beforeSend,delete a.dataFilter,delete a.success,delete a.error,delete a.complete,setTimeout(function(){var e={abort:function(){r(this,"canceled",null)}};n.ajax=e;var o,s=n.url.apply(t,[a.data,i,r,a]);s!==o&&(s===!1?r("error",null):i(s,"success"))},0)}}else{var a=$.extend({},n);delete a.sendType,a.beforeSend=function(e){return n.beforeSend.call(t,e,n)},a.dataFilter=null,delete a.dataFilter;var s={abort:function(e){a.error(this,"canceled",null),a.complete(this,e,null)}},l=Nex.isFunction(n.sendType)?n.sendType:t[n.sendType+"Send"];Nex.isFunction(n.sendType)?setTimeout(function(){n.ajax=e(l.call(t,a))},0):n.ajax=e((l||t.sendAjax).call(t,a))}},doBeforeSend:function(){for(var e=this,t=this.configs,n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=e.fireEvent("onBeforeSend",n);if(r===!1)return r;var o;return $.isFunction(t._beforeSend)&&(o=t._beforeSend.apply(e,n)),o===!1?!1:void e.fireEvent("onAjaxStart",n)},isSuccess:!1,doSuccess:function(){var e=this,t=this.configs,n=e.getDeferred(),i=[].slice.apply(arguments);if(!e.isSuccess&&(e.isSuccess=!0,e._customAbort!==!0&&e.fireEvent("onSuccessHook",i)!==!1&&($.isFunction(t.dataFilter)&&(i[0]=t.dataFilter.call(e,i[0],t.dataType||"html")),!e.isError))){var r=e.fireEvent("onSuccess",i);r!==!1&&$.isFunction(t._success)&&t._success.apply(e,i),n&&n.resolveWith.apply(n,[t.context||e,i])}},isError:!1,doError:function(){var e=this,t=this.configs,n=e.getDeferred(),i=[].slice.apply(arguments);if(!e.isError&&(e.isError=!0,e._customAbort!==!0)){1===i.length&&(i[2]=i[0]),i[0]=e.getXHR(),i[1]=i[1]||"error";var r=i[1];if(-1!==$.inArray(r,["timeout","canceled"])){var o=[].concat(i);o[1]=r,e.fireEvent("onAbort",o)!==!1&&$.isFunction(t._abort)&&t._abort.apply(e,o)}var a=e.fireEvent("onError",i);a!==!1&&$.isFunction(t._error)&&t._error.apply(e,i),n&&n.rejectWith.apply(n,[t.context||e,i])}},isComplete:!1,doComplete:function(){var e=this,t=this.configs,n=[].slice.apply(arguments);if(!e.isComplete&&(e.isComplete=!0,e._customAbort!==!0)){n[0]=e.getXHR(),e.fireEvent("onAjaxStop",n);var i=e.fireEvent("onComplete",n);i!==!1&&$.isFunction(t._complete)&&t._complete.apply(e,n)}},_customAbort:!1,abort:function(e){var t=this,n=arguments;if(n.length&&$.isFunction(e))for(var i=0,r=n.length;r>i;i++)$.isFunction(n[i])&&this.bind("onAbort.deferred",n[i]);else{var o=t.getAjax();o&&o.abort&&o.abort(e||"canceled"),t._customAbort=!0}return t},ajaxSend:function(e){return $.ajax(e)},formEnctypeReg:/^\s*(application\/x-www-form-urlencoded|multipart\/form-data|text\/plain)/i,getFormEnctype:function(e){var t=this.formEnctypeReg.exec(e+"");return t?t[1]:"application/x-www-form-urlencoded"},formSend:function(e){function t(){p&&p.each(function(){var e=$(this),t=e.data("_$restore");e.removeData("_$restore"),t.after(e),t.remove()})}var n=this,i=this.configs,r=0,e=$.extend({timeout:0},$.ajaxSettings,e),o=i.id+"_submitform",a=(e.type+"").toLowerCase();a=-1===Nex.inArray(a,["get","post"])?"post":a,console.log(n.getFormEnctype(e.contentType));var s=['<div class="nex-hidden" style="width:0px;height:0px;overflow:hidden;">','<form id="',o,'" autocomplete="off" novalidate="novalidate" method="',a,'" action="',$.trim(e.url),'" enctype="',n.getFormEnctype(e.contentType),'"></form>',"</div>"],l=$(s.join(""));$(document.body).append(l);var d=document.getElementById(o);if(e.beforeSend(d)===!1)return l.remove(),null;var c=Nex.parseUrl(e.url),u=[];if(c.search&&u.push(c.search),Nex.isObject(e.data)){var h=$.param(e.data,!!e.traditional);h&&u.push(h)}else e.data&&!Nex.isEmpty(e.data)&&u.push(e.data);var f=[];u.length&&$.each(u.join("&").split("&"),function(e,t){var t=t.split("=");t.length&&f.push(['<input type="hidden" autocomplete="off" name="',decodeURIComponent(t[0]),'" value="',decodeURIComponent(Nex.unDefined(t[1],"")),'">'].join(""))});var g=$(d);f.length&&g.append($(f.join("")));var p=null;e.injectFields&&(p=$(e.injectFields),p.each(function(){var e=$(this),t=e.clone();e.data("_$restore",t),e.after(t),g.append(e)}));var v,m=Nex.getUtil("SubmitForm");return v=m.submit(d,function(i){r&&clearTimeout(r);var o=n.ajaxConvert(i,e.dataType||"html");"parsererror"===o.state?e.error(v,"parsererror",o.error):e.success(o.data,"success",v),e.complete(v,o.state),t()},i.responseXML,i.docRoot),d.abort=function(t){r&&clearTimeout(r),v.abort(),e.error(v,t,null),e.complete(v,t)},e.timeout>0&&(r=setTimeout(function(){r=0,d.abort("timeout")},e.timeout)),d},fileSend:function(e){var t=this;return e.fileFields&&(e.injectFields=$(e.injectFields).add($(e.fileFields))),e.type="post",e.contentType="multipart/form-data",t.formSend(e)},getAjax:function(){return this.C("ajax")},getXHR:function(){return this.C("ajax")},getConverters:function(){var e=$.ajaxSettings.converters,t={"*":e["* text"],text:e["* text"],html:function(e){return e},json:e["text json"],xml:e["text xml"],script:e["text script"]};return t},ajaxConvert:function(e,t){var n,i=this.getConverters(),t=(t+"").toLowerCase();t=i[t]?t:"*";try{n=i[t](e)}catch(r){return{state:"parsererror",error:r}}return{state:"success",data:n}},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onComplete",e._removeAjax,e),e},_removeAjax:function(){this.configs.autoDestroy=!0,this.configs.context=null,this.removeCmp()},done:function(e){for(var t=this.getDeferred(),n=arguments,i=0,r=n.length;r>i;i++)$.isFunction(n[i])&&("pending"===t.state()?this.bind("onSuccess.deferred",n[i]):t.done(n[i]));return this},success:function(){return this.done.apply(this,arguments),this},fail:function(){for(var e=this.getDeferred(),t=arguments,n=0,i=t.length;i>n;n++)$.isFunction(t[n])&&("pending"===e.state()?this.bind("onError.deferred",t[n]):e.fail(t[n]));return this},error:function(){return this.fail.apply(this,arguments),this},then:function(e,t,n){var i=this.getDeferred();return $.isFunction(e)&&("pending"===i.state()?this.bind("onSuccess.deferred",e):i.done(e)),$.isFunction(t)&&("pending"===i.state()?this.bind("onError.deferred",t):i.fail(e)),this},always:function(){for(var e=this.getDeferred(),t=arguments,n=0,i=t.length;i>n;n++)$.isFunction(t[n])&&("pending"===e.state()?this.bind("onComplete.deferred",t[n]):e.always(t[n]));return this},complete:function(){return this.always.apply(this,arguments)}}),t}),function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){
function n(e,t,n){var i=u[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var n=d(),i=n._rgba=[];return t=t.toLowerCase(),g(l,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),l=r.space||"rgba";return s?(o=n[l](s),n[c[l].cache]=o[c[l].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,o.transparent),n):o[t]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=d.support={},f=e("<p>")[0],g=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,g(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),d.fn=e.extend(d.prototype,{parse:function(r,a,s,l){if(r===t)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=e(r).css(a),a=t);var u=this,h=e.type(r),f=this._rgba=[];return a!==t&&(r=[r,a,s,l],h="array"),"string"===h?this.parse(i(r)||o._default):"array"===h?(g(c.rgba.props,function(e,t){f[t.idx]=n(r[t.idx],t)}),this):"object"===h?(r instanceof d?g(c,function(e,t){r[t.cache]&&(u[t.cache]=r[t.cache].slice())}):g(c,function(t,i){var o=i.cache;g(i.props,function(e,t){if(!u[o]&&i.to){if("alpha"===e||null==r[e])return;u[o]=i.to(u._rgba)}u[o][t.idx]=n(r[e],t,!0)}),u[o]&&e.inArray(null,u[o].slice(0,3))<0&&(u[o][3]=1,i.from&&(u._rgba=i.from(u[o])))}),this):void 0},is:function(e){var t=d(e),n=!0,i=this;return g(c,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],g(r.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return g(c,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var i=d(e),r=i._space(),o=c[r],a=0===this.alpha()?d("transparent"):this,s=a[o.cache]||o.to(a._rgba),l=s.slice();return i=i[o.cache],g(o.props,function(e,r){var o=r.idx,a=s[o],d=i[o],c=u[r.type]||{};null!==d&&(null===a?l[o]=d:(c.mod&&(d-a>c.mod/2?a+=c.mod:a-d>c.mod/2&&(a-=c.mod)),l[o]=n((d-a)*t+a,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=d(t)._rgba;return d(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();return t&&n.push(~~(255*i)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),l=Math.min(i,r,o),d=s-l,c=s+l,u=.5*c;return t=l===s?0:i===s?60*(r-o)/d+360:r===s?60*(o-i)/d+120:60*(i-r)/d+240,n=0===d?0:.5>=u?d/c:d/(2-c),[Math.round(t)%360,n,u,null==a?1:a]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},g(c,function(i,r){var o=r.props,a=r.cache,l=r.to,c=r.from;d.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var r,s=e.type(i),u="array"===s||"object"===s?i:arguments,h=this[a].slice();return g(o,function(e,t){var i=u["object"===s?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=n(i,t)}),c?(r=d(c(h)),r[a]=h,r):d(h)},g(o,function(t,n){d.fn[t]||(d.fn[t]=function(r){var o,a=e.type(r),l="alpha"===t?this._hsla?"hsla":"rgba":i,d=this[l](),c=d[n.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=e.type(r)),null==r&&n.empty?this:("string"===a&&(o=s.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),d[n.idx]=r,this[l](d)))})})}),d.hook=function(t){var n=t.split(" ");g(n,function(t,n){e.cssHooks[n]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=i(r)))){if(r=d(o||r),!h.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=d(t.elem,n),t.end=d(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return g(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]])for(i=r.length;i--;)n=r[i],"string"==typeof r[n]&&(o[e.camelCase(n)]=r[n]);else for(n in r)"string"==typeof r[n]&&(o[n]=r[n]);return o}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,a,s){var l=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",d=l.children?a.find("*").addBack():a;d=d.map(function(){var t=e(this);return{el:t,start:n(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),d=d.map(function(){return this.end=n(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),d=d.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,d.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(n){return function(i,r,o,a,s){return"boolean"==typeof r||r===t?o?e.effects.animateClass.call(this,r?{add:i}:{remove:i},o,a,s):n.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},r,o,a)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function i(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,o;for(o=0;o<i.length;o++)null!==i[o]&&(r=e.data(n+i[o]),r===t&&(r=""),e.css(i[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=n.complete,s=n.mode;(r.is(":hidden")?"hide"===s:"show"===s)?(r[s](),i()):a.call(r[0],n,i)}var n=i.apply(this,arguments),r=n.mode,o=n.queue,a=e.effects.effect[n.effect];return e.fx.off||!a?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e,t){var n=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,r){var o,a,s,l=e(this),d=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,t.mode||"hide"),u=t.direction||"up",h=n.test(u),f=h?"height":"width",g=h?"top":"left",p=i.test(u),v={},m="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),d):e.effects.save(l,d),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),a=o[f](),s=parseFloat(o.css(g))||0,v[f]=m?a:0,p||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),v[g]=m?s:a+s),m&&(o.css(f,0),p||o.css(g,s+a)),o.animate(v,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,d),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),d="hide"===l,c="show"===l,u=t.direction||"up",h=t.distance,f=t.times||5,g=2*f+(c||d?1:0),p=t.duration/g,v=t.easing,m="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,x=a.queue(),b=x.length;for((c||d)&&s.push("opacity"),e.effects.save(a,s),a.show(),e.effects.createWrapper(a),h||(h=a["top"===m?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[m]=0,a.css("opacity",0).css(m,_?2*-h:2*h).animate(o,p,v)),d&&(h/=Math.pow(2,f-1)),o={},o[m]=0,i=0;f>i;i++)r={},r[m]=(_?"-=":"+=")+h,a.animate(r,p,v).animate(o,p,v),h=d?2*h:h/2;d&&(r={opacity:0},r[m]=(_?"-=":"+=")+h,a.animate(r,p,v)),a.queue(function(){d&&a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}),b>1&&x.splice.apply(x,[1,0].concat(x.splice(b,g+1))),a.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),d="show"===l,c=t.direction||"vertical",u="vertical"===c,h=u?"height":"width",f=u?"top":"left",g={};e.effects.save(a,s),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),r="IMG"===a[0].tagName?i:a,o=r[h](),d&&(r.css(h,0),r.css(f,o/2)),g[h]=d?o:0,g[f]=d?0:o/2,r.animate(g,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){d||a.hide(),e.effects.restore(a,s),e.effects.removeWrapper(a),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),s="show"===a,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:s?1:0};e.effects.save(r,o),r.show(),e.effects.createWrapper(r),i=t.distance||r["top"===d?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(d,"pos"===c?-i:i),u[d]=(s?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+i,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,n){function i(){x.push(this),x.length===u*h&&r()}function r(){f.css({visibility:"visible"}),e(x).remove(),p||f.hide(),n()}var o,a,s,l,d,c,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=u,f=e(this),g=e.effects.setMode(f,t.mode||"hide"),p="show"===g,v=f.show().css("visibility","hidden").offset(),m=Math.ceil(f.outerWidth()/h),_=Math.ceil(f.outerHeight()/u),x=[];for(o=0;u>o;o++)for(l=v.top+o*_,c=o-(u-1)/2,a=0;h>a;a++)s=v.left+a*m,d=a-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*m,top:-o*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:_,left:s+(p?d*m:0),top:l+(p?c*_:0),opacity:p?0:1}).animate({left:s+(p?0:d*m),top:l+(p?0:c*_),opacity:p?1:0},t.duration||500,t.easing,i)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,n){var i,r,o=e(this),a=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"hide"),l="show"===s,d="hide"===s,c=t.size||15,u=/([0-9]+)%/.exec(c),h=!!t.horizFirst,f=l!==h,g=f?["width","height"]:["height","width"],p=t.duration/2,v={},m={};e.effects.save(o,a),o.show(),i=e.effects.createWrapper(o).css({overflow:"hidden"}),r=f?[i.width(),i.height()]:[i.height(),i.width()],u&&(c=parseInt(u[1],10)/100*r[d?0:1]),l&&i.css(h?{height:0,width:c}:{height:c,width:0}),v[g[0]]=l?r[0]:c,m[g[1]]=l?r[1]:0,i.animate(v,p,t.easing).animate(m,p,t.easing,function(){d&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),n()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,r),n()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,n){var i,r=e(this),o=e.effects.setMode(r,t.mode||"show"),a="show"===o,s="hide"===o,l=a||"hide"===o,d=2*(t.times||5)+(l?1:0),c=t.duration/d,u=0,h=r.queue(),f=h.length;for((a||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),i=1;d>i;i++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing),r.queue(function(){s&&r.hide(),n()}),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,d+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,n){var i=e(this),r=e.effects.setMode(i,t.mode||"hide"),o="hide"===r,a=parseInt(t.percent,10)||150,s=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:n,percent:o?a:100,from:o?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),r=e.extend(!0,{},t),o=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),s=t.direction||"both",l=t.origin,d={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},c={y:"horizontal"!==s?a/100:1,x:"vertical"!==s?a/100:1};r.effect="size",r.queue=!1,r.complete=n,"effect"!==o&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:d),r.to={height:d.height*c.y,width:d.width*c.x,outerHeight:d.outerHeight*c.y,outerWidth:d.outerWidth*c.x},r.fade&&("show"===o&&(r.from.opacity=0,r.to.opacity=1),"hide"===o&&(r.from.opacity=1,r.to.opacity=0)),i.effect(r)},e.effects.effect.size=function(t,n){var i,r,o,a=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],d=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(a,t.mode||"effect"),g=t.restore||"effect"!==f,p=t.scale||"both",v=t.origin||["middle","center"],m=a.css("position"),_=g?s:l,x={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===f?(a.from=t.to||x,a.to=t.from||i):(a.from=t.from||("show"===f?x:i),a.to=t.to||("hide"===f?x:i)),o={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===p||"both"===p)&&(o.from.y!==o.to.y&&(_=_.concat(u),a.from=e.effects.setTransition(a,u,o.from.y,a.from),a.to=e.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(_=_.concat(h),a.from=e.effects.setTransition(a,h,o.from.x,a.from),a.to=e.effects.setTransition(a,h,o.to.x,a.to))),("content"===p||"both"===p)&&o.from.y!==o.to.y&&(_=_.concat(c).concat(d),a.from=e.effects.setTransition(a,c,o.from.y,a.from),a.to=e.effects.setTransition(a,c,o.to.y,a.to)),e.effects.save(a,_),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),v&&(r=e.effects.getBaseline(v,i),a.from.top=(i.outerHeight-a.outerHeight())*r.y,a.from.left=(i.outerWidth-a.outerWidth())*r.x,a.to.top=(i.outerHeight-a.to.outerHeight)*r.y,a.to.left=(i.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),("content"===p||"both"===p)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),d=s.concat(u).concat(h),a.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};g&&e.effects.save(n,d),n.from={height:i.height*o.from.y,width:i.width*o.from.x,outerHeight:i.outerHeight*o.from.y,outerWidth:i.outerWidth*o.from.x},n.to={height:i.height*o.to.y,width:i.width*o.to.x,outerHeight:i.height*o.to.y,outerWidth:i.width*o.to.x},o.from.y!==o.to.y&&(n.from=e.effects.setTransition(n,u,o.from.y,n.from),n.to=e.effects.setTransition(n,u,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=e.effects.setTransition(n,h,o.from.x,n.from),n.to=e.effects.setTransition(n,h,o.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){g&&e.effects.restore(n,d)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),e.effects.restore(a,_),g||("static"===m?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,n){var i=parseInt(n,10),r=e?a.to.left:a.to.top;return"auto"===n?r+"px":i+r+"px"})})),e.effects.removeWrapper(a),n()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,d=t.times||3,c=2*d+1,u=Math.round(t.duration/c),h="up"===s||"down"===s?"top":"left",f="up"===s||"left"===s,g={},p={},v={},m=r.queue(),_=m.length;for(e.effects.save(r,o),r.show(),e.effects.createWrapper(r),g[h]=(f?"-=":"+=")+l,p[h]=(f?"+=":"-=")+2*l,v[h]=(f?"-=":"+=")+2*l,r.animate(g,u,t.easing),i=1;d>i;i++)r.animate(p,u,t.easing).animate(v,u,t.easing);r.animate(p,u,t.easing).animate(g,u/2,t.easing).queue(function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}),_>1&&m.splice.apply(m,[1,0].concat(m.splice(_,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var i,r=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),s="show"===a,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};e.effects.save(r,o),r.show(),i=t.distance||r["top"===d?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(d,c?isNaN(i)?"-"+i:-i:i),u[d]=(s?c?"+=":"-=":c?"-=":"+=")+i,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,o),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),a=e("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,d=r.offset(),c={top:d.top-s,left:d.left-l,height:r.innerHeight(),width:r.innerWidth()},u=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-s,left:u.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),n()})}}(jQuery),define("Nex/effects/Effects",function(){}),define("Nex/container/AbstractContainer",["require","Nex"],function(e){return e("Nex"),Nex.define("Nex.container.AbstractContainer",{extend:"Nex.Component",alias:"Nex.AbstractContainer",xtype:"abstractcontainer",configs:function(e){return{prefix:"abscontainer",autoResize:!0,containerCls:e.containerCls+" nex-abscontainer"}}})}),define("Nex/container/Container",["require","Nex/effects/Effects","Nex/container/AbstractContainer"],function(e){e("Nex/effects/Effects"),e("Nex/container/AbstractContainer");var t=Nex.define("Nex.container.Container",{extend:"Nex.container.AbstractContainer",alias:"Nex.Container",xtype:"container",configs:function(e){return{prefix:"nexcontainer-",autoScroll:!1,_checkScrollBar:!1,_hasBodyView:!1,_initSetSize:!1,tabIndex:-1,hideMode:"offsets",animate:!1,animDuration:200,animEasing:Nex.easingDef,_effect:{},effect:{},showEffect:{},hideEffect:{},showFn:null,hideFn:null,showMethod:"fadeIn",hideMethod:"fadeOut",overCls:"",width:"auto",height:"auto",checkAutoSize:!1,border:!1,borderCls:"nex-container-border",borderStyle:"",containerCls:[e.containerCls,"nex-container"].join(" "),autoScrollCls:"nex-container-auto-scroll",autoWidthCls:"nex-container-auto-width",autoHeightCls:"nex-container-auto-height",_initMethod:[],padding:null,margin:null,overflow:"",_vviews:{},_hviews:{},loadMsg:"Loading...",loadContainer:null,denyEvents:!1}}});return Nex.Html=t,t.override({initComponent:function(){var e=this,t=this.configs,n=t._initMethod;if(e.callParent(arguments),n.length)for(var i=0,r=n.length;r>i;i++){var o=n[i];o&&($.isFunction(o)?o.call(e):"string"===$.type(o)&&$.isFunction(e[o])&&e[o].call(e))}},initRenderContent:function(){var e=this,t=this.configs;return e.callParent(arguments),t.checkAutoSize&&e._checkAutoSize(),this},sysEvents:function(){var e=this,t=e.configs;return e.callParent(arguments),e.bind("onStart._sys",function(){t.autoSize&&(t.width="auto",t.height="auto")},e),e.bind("onCreate._sys",function(){e._setAutoScrollCls(),e._setScrollEvent()},e),e.bind("onMouseEnter._sys",e._setOverCls,e),e.bind("onMouseLeave._sys",e._unsetOverCls,e),e},onContainerCreate:function(e,t){var n=this;n.callParent(arguments),n._setBorder(),n._setPadding(),n._setMargin(),n._setOverflow(),t._initSetSize&&n._initSetContainerSize(),n.setContainerEvent()},_setHeightAuto:function(){var e=this,t=e.configs,n=(t.views,e.getBody()),i=e.el;i.css("height",""),n&&n.css("height","")},_setWidthAuto:function(){var e=this,t=e.configs,n=(t.views,e.getBody()),i=e.el;i.css("width",""),n&&n.css("width","")},getResizeWH:function(){var e=this,t=e.configs,n=(t.views,e.el),i=$(t.renderTo),r=i._width(),o=i._height(),a={width:r,height:o};e.fireEvent("onGetRenderToSize",[a,t]),r=a.width,o=a.height;var s=!0;if(t.pWidth===r&&t.pHeight===o&&t._isResize&&(s=!1),!s)return{width:t._width,height:t._height,isChange:s};t.pWidth=r,t.pHeight=o;var l=0===parseFloat(t.width)?r:t.width,d=0===parseFloat(t.height)?o:t.height;-1!=t.width.toString().indexOf("%")&&(l=parseFloat(t.width)*r/100),-1!=t.height.toString().indexOf("%")&&(d=parseFloat(t.height)*o/100);e.getBody();return("auto"===l||isNaN(parseFloat(l)))&&(e.__containerCreate||e._setWidthAuto(),l=n._outerWidth()),("auto"===d||isNaN(parseFloat(d)))&&(e.__containerCreate||e._setHeightAuto(),d=n._outerHeight()),{width:parseInt(l),height:parseInt(d),isChange:s}},checkSize:function(e,t){var n=this,i=n.configs;n._getCutHeight(i.cutHeight),n._getCutWidth(i.cutWidth);t-=isNaN(parseFloat(i.cutHeight))?0:i.cutHeight,e-=isNaN(parseFloat(i.cutWidth))?0:i.cutWidth;var r=n._getMinWidth(),o=n._getMinHeight(),a=n._getMaxHeight(),s=n._getMaxWidth();return s>0&&(e=Math.min(e,s)),a>0&&(t=Math.min(t,a)),r>0&&(e=Math.max(e,r)),o>0&&(t=Math.max(t,o)),{width:parseInt(isNaN(e)?i.pWidth:e),height:parseInt(isNaN(t)?i.pHeight:t)}},clearContainerSizeCache:function(){var e=this;e._containerWidth=null,e._containerHeight=null},setContainerSize:function(e,t){var n,i=this,r=i.configs,o=i.el;r.width=e===n||null===e?r.width:e,r.height=t===n||null===t?r.height:t;var a=i.getResizeWH(),s=i.checkSize(a.width,a.height);if(i.fireEvent("onSetContainerSize",[s,r]),!a.isChange)return!1;var l=String(r.width).toLowerCase(),d=String(r.height).toLowerCase();return"auto"!==d&&"auto"!==l&&i._containerWidth&&i._containerHeight&&i._containerWidth===s.width&&i._containerHeight===s.height?!1:(r._width=s.width,r._height=s.height,"auto"===l&&a.width!==s.width&&(l=s.width),"auto"===d&&a.height!==s.height&&(d=s.height),r.realWidth=l,r.realHeight=d,o.removeClass(r.autoHeightCls+" "+r.autoWidthCls),"auto"!==l?o._outerWidth(r._width):(o.css("width",""),o.addClass(r.autoWidthCls)),"auto"!==d?o._outerHeight(r._height):(o.css("height",""),o.addClass(r.autoHeightCls)),i._containerWidth=s.width,i._containerHeight=s.height,!0)},isAutoHeight:function(){var e=this.configs;return"auto"===e.realHeight||""===e.realHeight?!0:!1},isAutoWidth:function(){var e=this.configs;return"auto"===e.realWidth||""===e.realWidth?!0:!1},__resizeTimer:0,setSize:function(e,t,n){var i,r=this,o=r.el,a=r.configs;Nex.isObject(e)&&(n=t,t=e.height,e=e.width),n=n===i?!0:n;var s=r.setContainerSize(e,t);return s&&(r.setViewSize(),r.isInit()||(r.onSizeChange(),r.fireEvent("onSizeChange",[o,a])),Nex.ComponentManager&&!r.isInit()&&n&&(r.__resizeTimer&&clearTimeout(r.__resizeTimer),r.__resizeTimer=setTimeout(function(){Nex.ComponentManager.fireEvent("onResize",[a.id])},0))),r.isInit()||r.fireEvent("onResize",[a]),s},setViewSize:function(){var e=this,t=e.configs,n=e.getBody();e.methodInvoke("doSetViewSize"),e.onSetViewSize(),e.fireEvent("onSetViewSize",[t]);var i=!0;if(t._hasBodyView||(i=!1),i){if(t._checkScrollBar)var r=e.hasScroll(n,"left"),o=e.hasScroll(n,"top"),a=e.getScrollbarSize(),s=n._width()-(o?a.y:0),l=n._height()-(r?a.x:0);else var s=n._width(),l=n._height();t._vbodyWidth&&t._vbodyHeight&&t._vbodyWidth==s&&t._vbodyHeight==l&&(i=!1)}return i&&(t._vbodyWidth=s,t._vbodyHeight=l,e.isInit()||(e.onViewSizeChange(),e.fireEvent("onViewSizeChange",[t]))),i},doSetViewSize:function(){},resize:function(e){var t,n=this,i=n.configs;n.__rt=n.__rt||0,n.__rt&&clearTimeout(n.__rt),n.__rt=setTimeout(function(){i._isResize=!0,n.setSize(t,t,e),i._isResize=!1},0)},refreshViewSize:function(){return this.setViewSize.apply(this,arguments)},resetSize:function(e,t,n){return this.setSize(e,t,n)},onSizeChange:function(e,t){},onSetViewSize:function(){},onViewSizeChange:function(){},_loadCounter:0,showLoading:function(e){var t=this,n=t.configs,e=t._undef(e,n.loadMsg),i=null;$.isFunction(n.loadContainer)&&(i=n.loadContainer.call(t)),i=i||t.getBody(),t._loadCounter++;var r=$("#"+n.id+"-laoding-mask-wraper");if(r.length){var o=$("#"+n.id+"-laoding-mask-msg");return o.html(e),t.resizeLoadMask(),t}var a=$('<div id="'+n.id+'-laoding-mask-wraper" class="nex-loading-mask-wraper"><div id="'+n.id+'-mask" class="nex-loading-mask"></div><div id="'+n.id+'-laoding-mask-msg" class="nex-loading-mask-msg">'+e+"</div><div>");return $(i).append(a),a.click(function(e){e.stopPropagation(),e.preventDefault()}),t.resizeLoadMask(),t},resizeLoadMask:function(){var e=this,t=e.configs;if(e.isAutoWidth()&&Nex.isIE6){var n=$("#"+t.id+"-laoding-mask-wraper");n._outerHeight(n.outerHeight())}var i=$("#"+t.id+"-laoding-mask-msg"),r=i.outerWidth();return i.css("marginLeft",-r/2+"px"),e},hideLoading:function(e){var t=this,n=t.configs;
return t._loadCounter--,t._loadCounter=t._loadCounter<0?0:t._loadCounter,t._loadCounter<=0&&$("#"+n.id+"-laoding-mask-wraper").remove(),t},setWidth:function(e){return this.setSize(e),this},setHeight:function(e){var t;return this.setSize(t,e),this},getWidth:function(){return this.el.outerWidth()||0},getHeight:function(){return this.el.outerHeight()||0},width:function(e){var t;if(e===t)return this.getWidth();var n=String(e).charAt(0);if("+"===n||"-"===n){e=e.slice(1);var i=this.getWidth();e="+"==n?i+parseInt(e):i-parseInt(e)}this.setWidth(e)},height:function(e){var t;if(e===t)return this.getHeight();var n=String(e).charAt(0);if("+"===n||"-"===n){e=e.slice(1);var i=this.getHeight();e="+"==n?i+parseInt(e):i-parseInt(e)}this.setHeight(e)},_getDiffHeight:function(){return this.el._outerHeight()-this.getBody()._height()},_getDiffWidth:function(){return this.el._outerWidth()-this.getBody()._width()},_getAutoSize:function(){var e=this.getBody();$.effects.save(e,["overflow","width","height","position"]);var t=this._getDiffHeight(),n=this._getDiffWidth();e.css({overflow:"hidden",width:"",height:"",position:"absolute"}),Nex.isIE6&&e._removeStyle("width height");var i={height:t+e._height(),width:n+e._width()};return $.effects.restore(e,["width","height","position"]),i},autoSetHeight:function(){return this.height(this._getAutoSize().height),$.effects.restore(this.getBody(),["overflow"]),this},autoSetWidth:function(){return this.width(this._getAutoSize().width),$.effects.restore(this.getBody(),["overflow"]),this},autoSetSize:function(){return this.setSize(this._getAutoSize()),$.effects.restore(this.getBody(),["overflow"]),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},autoSize:function(){return this.setSize("auto","auto"),this},autoHeight:function(){var e;return this.setSize(e,"auto"),this},autoWidth:function(){var e;return this.setSize("auto",e),this},getScrollView:function(){return this.getBody()},onScroll:function(){},onScrollLeft:function(){},onScrollTop:function(){},_setScrollEvent:function(){var e=this,t=e.configs,n=e.getScrollView(),i=function(n,i){var r={left:$(this).scrollLeft(),top:$(this).scrollTop()};e.onScroll(r,this,i,t),e.onScrollLeft(r.left,this,i,t),e.onScrollTop(r.top,this,i,t);var o=e.fireEvent(n,[r,this,i,t]);o===!1&&(i.stopPropagation(),i.preventDefault())};if(t.denyEvents!==!0){var r={"scroll.html":function(n){i.call(this,"onScroll",n);var r=$(this);r.scrollTop()<=0?e.fireEvent("onScrollTopStart",[this,n,t]):r.scrollLeft()<=0&&e.fireEvent("onScrollLeftStart",[this,n,t]),e.isScrollEnd(this,"top")&&e.fireEvent("onScrollTopEnd",[this,n,t]),e.isScrollEnd(this,"left")&&e.fireEvent("onScrollLeftEnd",[this,n,t])}};n.unbind("scroll.html"),n.bind(r)}},setContainerEvent:function(){var e=this,t=e.configs,n=e.getContainer();if(t.denyEvents===!0)return!1;if($.isFunction(t.denyEvents))return t.denyEvents.call(e),!1;var i=function(n,i){var r=e.fireEvent(n,[this,i,t]);r===!1&&(i.stopPropagation(),i.preventDefault())},r={"focusin.html":function(e){i.call(this,"onFocusin",e)},"focusout.html":function(e){i.call(this,"onFocusout",e)},"focus.html":function(e){i.call(this,"onFocus",e)},"blur.html":function(e){i.call(this,"onBlur",e)},"click.html":function(e){i.call(this,"onClick",e)},"dblclick.html":function(e){i.call(this,"onDblClick",e)},"keydown.html":function(e){i.call(this,"onKeyDown",e)},"keyup.html":function(e){i.call(this,"onKeyUp",e)},"keypress.html":function(e){i.call(this,"onKeyPress",e)},"mousewheel.html":function(e){i.call(this,"onMouseWheel",e)},"mouseenter.html":function(e){i.call(this,"onMouseEnter",e)},"mouseleave.html":function(e){i.call(this,"onMouseLeave",e)},"mouseover.html":function(e){i.call(this,"onMouseOver",e)},"mouseout.html":function(e){i.call(this,"onMouseOut",e)},"mousedown.html":function(e){i.call(this,"onMouseDown",e)},"mouseup.html":function(e){i.call(this,"onMouseUp",e)},"contextmenu.html":function(e){i.call(this,"onContextMenu",e)}};return $.isArray(t.denyEvents)&&$.each(t.denyEvents,function(e,t){delete r[t]}),n.unbind(".html"),n.bind(r),e.fireEvent("onSetContainerEvent",[n,t]),!0},__containerCreate:!1,_containerWidth:null,_containerHeight:null,_initSetContainerSize:function(){var e=this;e.configs;e.__containerCreate=!0,e.setContainerSize(),e.__containerCreate=!1,e._containerWidth=null,e._containerHeight=null},_checkAutoSize:function(){var e=this,t=e.configs;if(!e.rendered)return!1;if("auto"===t.width||"auto"===t.height){var n=e.setSize();if(n)return!0}return!1},_autoSize:function(){var e=this,t=e.configs;if(!e.rendered)return this;var n=e._checkAutoSize();return!n&&t._checkScrollBar&&e.methodInvoke("setViewSize"),this},addChild:function(e,t){var n=this.getBody(),i=this.configs;return this._checkToRender(),this.addComponent(n,e,t,i.defaluts),this},_add:function(e,t){return this._insert.apply(this,arguments)},add:function(e,t){return this.insert.apply(this,arguments)},append:function(e){return this.insert(e,!0)},prepend:function(e){return this.insert(e,!1)},_insert:function(e,t){var n=this,i=n.C(),r=n.getBody();n._checkToRender();var o=n.addComponent(r,e,t,i.defaluts);return i.__insertVt&&clearTimeout(i.__insertVt),i.__insertVt=setTimeout(function(){n._autoSize()},0),o},insert:function(e,t){var n=this,i=n.configs,r=n._insert.apply(n,arguments);return n.fireEvent("onAddComponent",[r,i]),r},_empty:function(){var e=this,t=e.configs,n=e.getBody();return n.empty(),Nex.gc(),t.__insertVt&&clearTimeout(t.__insertVt),t.__insertVt=setTimeout(function(){e._autoSize()},0),e},empty:function(){var e=this,t=e.configs,n=e._empty.apply(e,arguments);return e.fireEvent("onClearComponent",[t]),n},_html:function(e,t){this._empty(),this._insert(e,t)},html:function(e,t){return this.empty(),this.insert(e,t),this},update:function(){return this.html.apply(this,arguments)},removeAll:function(){return this.empty.apply(this,arguments)},_setOverCls:function(){var e=this,t=e.configs,n=this.el;t.overCls&&n.addClass(t.overCls)},_unsetOverCls:function(){var e=this,t=e.configs,n=this.el;t.overCls&&n.removeClass(t.overCls)},_setBorder:function(){var e=this.configs,t=this.el;e.border&&"string"===$.type(e.border)&&t.css("border",e.border),e.borderStyle&&"object"==typeof e.borderStyle&&t.css(e.borderStyle)},_setPadding:function(){var e=this,t=e.configs,n=e.el;null!==t.padding&&n.css("padding",t.padding)},_setMargin:function(){var e=this,t=e.configs,n=e.el;null!==t.margin&&n.css("margin",t.margin)},_setOverflow:function(){var e=this,t=e.configs,n=e.el;t.overflow&&n.css("overflow",t.overflow)},_setAutoScrollCls:function(){var e=this,t=e.configs,n=e.getBody();t.autoScroll&&n.addClass(t.autoScrollCls)},focus:function(){var e,t=this,n=this.configs;return(e=t.getBody())&&((n.tabIndex===!1||null===n.tabIndex)&&e.attr({tabIndex:-1}),e.focus()),t},scrollLeft:function(e){var t,n=this;return n.scrollBy(e,t),n},scrollToLeftEnd:function(){var e=this,t=$(e.getScrollView())[0];if(!t)return e;var n=t.clientWidth,i=t.scrollWidth;if(n>=i)return e;var r=i-n;return e.scrollLeft(r),e},scrollTop:function(e){var t,n=this;return n.scrollBy(t,e),n},scrollToTopEnd:function(){var e=this,t=$(e.getScrollView())[0];if(!t)return e;var n=t.clientHeight,i=t.scrollHeight;if(n>=i)return e;var r=i-n;return e.scrollTop(r),e},scrollBy:function(e,t,n,i){var r,o=this,i=(this.configs,i||$.noop),a=o.getScrollView(),s={};if(e!==r&&(s.scrollLeft=e),t!==r&&(s.scrollTop=t),!$.isEmptyObject(s))if(n===r||0>=n||!n){for(var l in s)a[l](s[l]);i.call(o,a)}else a.animate(s,Math.abs(n),function(){i.call(o,a)});return o},setStyle:function(e){return this.el.css(e||{}),this},setBorder:function(e){return this.el.css("border",e),this},addCls:function(e){return this.el.addClass(e),this},addClass:function(e){return this.addCls(e),this},removeCls:function(e){return this.el.removeClass(e),this},removeClass:function(e){return this.removeCls(e),this},_normalizeArguments:function(e,t,n,i){return $.isPlainObject(e)&&(t=e,e=e.effect),e={effect:e},null==t&&(t={}),$.isFunction(t)&&(i=t,n=null,t={}),("number"==typeof t||$.fx.speeds[t])&&(i=n,n=t,t={}),$.isFunction(n)&&(i=n,n=null),t&&$.extend(e,t),n=n||t.duration,e.duration=$.fx.off?0:"number"==typeof n?n:n in $.fx.speeds?$.fx.speeds[n]:$.fx.speeds._default,e.complete=i||t.complete,e},_standardAnimationOption:function(e){return!e||"number"==typeof e||$.fx.speeds[e]?!0:"string"!=typeof e||$.effects.effect[e]?$.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0},_getStandardAnimationOption:function(e,t,n){var i={};return"object"!=typeof e||e.effect||(i=e),("number"==typeof e||$.fx.speeds[e])&&(i.duration=e),"string"!=typeof e||$.effects.effect[e]||(i.duration=e in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default),"string"!=typeof t||$.isFunction(t)||(i.easing=t in $.easing?t:"def"in $.easing?$.easing.def:"swing"),$.isFunction(t)&&(i.complete=t),$.isFunction(n)&&(i.complete=n),i},hidden:!1,isVisible:function(){return!this.hidden},isHidden:function(){return this.hidden},_defaultShow:function(e){var t=this,n=this.configs,i=t.el,r=function(){i.show()},o=function(){i._show()},a=function(){i._visible(!0)};switch(n.hideMode){case"display":r();break;case"offsets":o();break;case"visibility":a();break;default:r()}return i.show(),$.isFunction(e)&&e(),t},_defaultHide:function(e){var t=this,n=this.configs,i=t.el,r=function(){i.hide()},o=function(){i._hide()},a=function(){i._visible(!1)};switch(n.hideMode){case"display":r();break;case"offsets":o();break;case"visibility":a();break;default:r()}return t.setAcceptResize(!1),$.isFunction(e)&&e(),t},_animShow:function(e,t,n){var i=this,r=this.configs,o=i.el,t=t||{},a="effect"in t;return a&&(t.mode="show"),$.isFunction(e)&&(t.complete=e),o.stop(!0,!0),a?o.effect(t):o[r.showMethod].call(o,t),i},_animHide:function(e,t,n){var i=this,r=this.configs,o=i.el,t=t||{},a="effect"in t;return a&&(t.mode="hide"),$.isFunction(e)&&(t.complete=e),o.stop(!0,!0),a?o.effect(t):o[r.hideMethod].call(o,t),i},_getAnimateOptions:function(){var e=this,t=[].slice.apply(arguments);"boolean"==typeof t[0]&&t.shift();var n=e._standardAnimationOption.apply(e,t)?e._getStandardAnimationOption.apply(e,t):e._normalizeArguments.apply(e,t);return n},_showBeforeEffect:function(){var e=this.el;e._show(),e.hide()},isShowing:!1,onBeforeShow:function(){},show:function(e){var t,n=this,i=this.configs,r=(n.el,[].slice.apply(arguments)),o="boolean"==typeof r[0]?r[0]:i.animate;if("boolean"==typeof r[0]&&r.shift(),n.isVisible())return n;if(n.fireEvent("onBeforeShow",[i])===!1)return n;n.onBeforeShow(i),n.fireEvent("onStartShow",[i]),n.hidden=!1,n.isShowing=!0,n._checkToRender();var a=function(){n.isShowing=!1,n.setAcceptResize(!0),i.autoResize&&n.resetSize(),n.fireEvent("onShow",[i])};t=n._getAnimateOptions.apply(n,r),t=$.extend({duration:i.animDuration,easing:i.animEasing},i._effect,i.effect,i.showEffect,t);var s=t.complete;t.complete=function(){a(),$.isFunction(s)&&s.call(n)};var l=$.isFunction(i.showFn)?i.showFn:o?n._animShow:n._defaultShow;return n._showBeforeEffect(),l.call(n,t.complete,t,r),n},onBeforeHide:function(){},_hideBeforeEffect:function(){},hide:function(e){var t,n=this,i=this.configs,r=(n.el,[].slice.apply(arguments)),o="boolean"==typeof r[0]?r[0]:i.animate;if("boolean"==typeof r[0]&&r.shift(),n.rendered&&n.isHidden())return n;if(n.fireEvent("onBeforeHide",[i])===!1)return n;if(!n.rendered)return n;n.onBeforeHide(i),n.fireEvent("onStartHide",[i]),n.hidden=!0,n.setAcceptResize(!1);var a=function(){n.fireEvent("onHide",[i])};t=n._getAnimateOptions.apply(n,r),t=$.extend({duration:i.animDuration,easing:i.animEasing},i._effect,i.effect,i.hideEffect,t);var s=t.complete;t.complete=function(){a(),$.isFunction(s)&&s.call(n)};var l=$.isFunction(i.hideFn)?i.hideFn:o?n._animHide:n._defaultHide;return n._hideBeforeEffect(),l.call(n,t.complete,t,r),n},effect:function(){return this.el.effect.apply(this.el,arguments),this}}),t}),define("Nex/ProgressBar",["require","Nex/container/Container"],function(e){e("Nex/container/Container");var t=Nex.define("Nex.ProgressBar","Nex.container.Container",{xtype:"progressbar",configs:function(e){return{prefix:"nexprogressbar-",tabIndex:!1,disabledItems:!0,denyEvents:!0,containerCls:e.containerCls+" nex-progress",width:200,height:16,fontSize:null,bgColor:[],textColor:[],value:0,text:"<%=value%>%",_defText:"&nbsp;",animate:!1,animEasing:"easeOutCubic",animDuration:500}}});return t.override({_setPadding:function(){},initComponent:function(){var e=this,t=this.configs,n=this.el;e.callParent(arguments);var i=Math.max(Math.min(parseFloat(t.value,10)||0,100),0);t.value=i,Nex.isEmpty(t.text)&&(t.text=t._defText);var r=e.tpl(t.text,{value:t.value}),o=['<div id="',t.id,'_bg" class="nex-progress-text nex-progress-bg">',r,"</div>",'<div id="',t.id,'_bar" class="nex-progress-bar" style="width:',i,'%;">','<div id="',t.id,'_text" class="nex-progress-text">',r,"</div>","</div>"];n.html(o.join("")),e.setBackColor(t.bgColor),e.setTextColor(t.textColor),e.setFontSize(t.fontSize)},doSetViewSize:function(){var e=this,t=this.configs,n=e.el,i=$("#"+t.id+"_bg"),r=$("#"+t.id+"_bar"),o=$("#"+t.id+"_text");if(e.isAutoWidth())i._removeStyle("width"),o._removeStyle("width");else{var a=n._width();i._outerWidth(a),o._outerWidth(a)}if(e.isAutoHeight())i._removeStyle("height"),r._removeStyle("height"),o._removeStyle("height");else{var s=n._height();i._outerHeight(s),r._outerHeight(s),o._outerHeight(s)}},setBackColor:function(e){var t=this.configs,n=$("#"+t.id+"_bg"),i=$("#"+t.id+"_bar"),e=Nex.isArray(e)?e:[e];return e[0]&&n.css("backgroundColor",e[0]),e[1]&&i.css("backgroundColor",e[1]),this},setTextColor:function(e){var t=this.configs,n=$("#"+t.id+"_bg"),i=$("#"+t.id+"_text"),e=Nex.isArray(e)?e:[e];return e[0]&&n.css("color",e[0]),e[1]&&i.css("color",e[1]),this},setFontSize:function(e){var t=this.configs,n=$("#"+t.id+"_bg"),i=$("#"+t.id+"_text");return e&&(n.css("fontSize",e),i.css("fontSize",e)),this},getProgress:function(){return this.configs.value},setProgress:function(){return this.updateProgress.apply(this,arguments)},getValue:function(){return this.configs.value},setValue:function(){return this.updateProgress.apply(this,arguments)},updateText:function(e){var t=this,n=this.configs;Nex.isDefined(e)?n.text=e:e=n.text,e=t.tpl(e,{value:n.value});var i=$("#"+n.id+"_bg"),r=$("#"+n.id+"_text");return i.html(e),r.html(e),t},updateProgress:function(e,t,n){var i=this,r=this.configs,o=$("#"+r.id+"_bar"),e=Math.max(Math.min(parseFloat(Nex.unDefined(e,r.value),10)||0,100),0),n=Nex.unDefined(Nex.isBoolean(t)?t:n,r.animate);return r.value!=e&&i.fireEvent("onProgressChange",[e]),r.value=e,o.stop(!0,!0),n?o.animate({width:e+"%"},r.animDuration,r.animEasing):o.css("width",e+"%"),Nex.isDefined(t)&&!Nex.isBoolean(t)?i.updateText(t):i.updateText(),i},_wt:0,wait:function(e){var t=this,n=this.configs,e=$.extend({duration:2e3,text:"",easing:"swing"},e||{});if(!e.duration)return t;var i=!1;clearTimeout(t._wt);var r=function(){return i?(t.updateProgress(0,"",!1),void clearTimeout(t._wt)):(t.updateProgress(0,"",!1),n.animDuration=e.duration,n.animEasing=e.easing,t.updateProgress(1e3,e.text,!0),void(t._wt=setTimeout(function(){r()},e.duration)))};return r(),function(e){i=!0,r(),e&&t.updateText(e)}}}),t}),define("Nex/panel/Panel",["require","Nex/container/Container"],function(e){e("Nex/container/Container");var t=Nex.define("Nex.panel.Panel",{extend:"Nex.container.Container",alias:"Nex.Panel",xtype:"panel",configs:function(e,t){return{prefix:"nexpanel-",autoDestroy:!0,autoResize:!0,_hasBodyView:!0,_checkScrollBar:!1,border:!0,borderCls:[e.borderCls,"nex-panel-border"].join(" "),containerCls:[e.containerCls,"nex-panel"].join(" "),autoScrollCls:[e.autoScrollCls,"nex-panel-auto-scroll"].join(" "),autoWidthCls:[e.autoWidthCls,"nex-panel-auto-width"].join(" "),autoHeightCls:[e.autoHeightCls,"nex-panel-auto-height"].join(" "),autoScroll:!1,tabIndex:-1,showShadow:!1,shadowCls:"nex-panel-shadow",toolbarCls:"",tbar:null,bbar:null,rbar:null,lbar:null,tools:[],toolsItems:null,toolTipsTag:"title",closable:!1,closeToRemove:!0,closeFn:null,animCollapse:!0,durationCollapse:200,easingCollapse:"easeOutQuad",collapsible:!1,collapsed:!1,collapsedCls:"",title:"",showHeader:"auto",headerSelectionable:!0,bodySelectionable:!0,footerCls:"",footerItems:null,items:[],renderTo:document.body,views:{},headerCls:"",icon:"",iconCls:"",iconTag:"span",minWidth:function(){var e=this.getHeader();if(!e)return 0;var t=0;return $(".nex-window-tools,.nex-panel-title-icon,.nex-panel-title-text",e).each(function(){t+=$(this).width()||0}),t},bodyPadding:null,bodyCls:"",bodyStyle:{},autoSize:!1,width:"auto",height:"auto"}}});return t.override({initComponent:function(){this.callParent(arguments),this.initPanel()},initPanel:function(){var e=this;this.configs;return e.initStyleSheet(),e.initCss(),e.setHeader(),e.setBody(),e.setToolbars(),e.setFooter(),e},onCreate:function(){this.callParent(arguments),this._afterCreate()},onContainerCreate:function(e,t){var n=this;n.callParent(arguments),n._setShadow(e,t)},_afterCreate:function(){var e=this,t=e.configs;t.collapsed&&e.collapse(!1)},_setShadow:function(e,t){t.showShadow&&e.addClass(t.shadowCls)},_getIconTpl:function(e){var t=this.configs;return"<"+t.iconTag+' class="nex-panel-icon nex-panel-title-icon '+t.iconCls+'" style="'+e+'"></'+t.iconTag+">"},initStyleSheet:function(){var e=this,t=e.el,n=this.configs;if(n.views.stylesheet)return e;var i=$('<style id="'+n.id+'_stylesheet" type="text/css"></style>');return n.views.stylesheet=i,t.append(i),e},getStyleSheet:function(){return this.configs.views.stylesheet},addCssRules:function(e,t){var n=this,i=this.configs,r=n.getStyleSheet().get(0),o=[].slice.apply(arguments),a=1==o.length,t=a?e:t;return r&&(a?e=["#"+i.id]:(e=e.split(","),$.each(e,function(t,n){e[t]="#"+i.id+" "+n})),Nex.addCssRules(r,e.join(","),t)),n},initCss:function(){},renderedHeader:!1,setHeader:function(){var e=this,t=this.configs,n=t.views.container,i=t.showHeader;if(t.tools=$.isArray(t.tools)?t.tools:[t.tools],"auto"==i&&(i=t.toolsItems||t.tools.length||t.title||t.icon||t.iconCls?!0:!1),i===!1)return e;if(this.renderedHeader)return e;var r="";if(t.icon||t.iconCls){var o="";t.icon&&(o="background-image:url("+t.icon+")"),r=e._getIconTpl(o)}var a=$('<div class="nex-panel-header '+t.headerCls+'" id="'+t.id+'_header"><div class="nex-panel-tools"></div><div class="nex-panel-header-title">'+r+'<span class="nex-panel-title-text"></span></div></div>');t.views.header=a,t._vviews.header=a,n.prepend(a),this.renderedHeader=!0,t.headerSelectionable||a.disableSelection(),t.title&&e.addComponent($(".nex-panel-title-text",a),t.title);e._setTools();return e.onHeaderCreate(a,t),e.fireEvent("onHeaderCreate",[a,t]),i||e._hideHeader(),e.setHeaderEvent(a,t),e},onHeaderCreate:function(){},setHeaderEvent:function(e,t){var n=this,i=function(e,i){var r=n.fireEvent(e,[this,i,t]);r===!1&&(i.stopPropagation(),i.preventDefault())};e.unbind(".ph"),e.bind({"click.ph":function(e){i.call(this,"onHeaderClick",e)},"dblclick.ph":function(e){i.call(this,"onHeaderDblClick",e)},"mouseover.html":function(e){i.call(this,"onHeaderMouseOver",e)},"mouseout.html":function(e){i.call(this,"onHeaderMouseOut",e)},"mousedown.html":function(e){i.call(this,"onHeaderMouseDown",e)},"mouseup.html":function(e){i.call(this,"onHeaderMouseUp",e)},"contextmenu.ph":function(e){i.call(this,"onHeaderContextMenu",e)}}),$(">.nex-panel-tools",e).bind({click:function(e){e.stopPropagation(),e.preventDefault(),$(document).trigger("click",[e])}}),n.fireEvent("onSetHeaderEvent",[e,t])},_setSysTools:function(e){var t=this,n=this.configs,i=n.views.header,r=$(">.nex-panel-tools",i);return n.collapsible&&(e.push({iconCls:"tools-collapse-icon",handler:function(){t.toggleCollapse()}}),t.unbind(".collapse"),t.bind("onCollapse.collapse",function(){$(">.tools-collapse-icon",r).addClass("tools-expand-icon")},t),t.bind("onExpand.collapse",function(){$(">.tools-collapse-icon",r).removeClass("tools-expand-icon")},t)),n.closable&&e.push({iconCls:"tools-close-icon",handler:function(){t.close()}}),e},_setTools:function(){var e=this,t=this.configs,n=t.views.header,i=$(">.nex-panel-tools",n);t.toolsItems&&e.addComponent(i,t.toolsItems);var r=t.tools;r=e._setSysTools(r);for(var o=0;o<r.length;o++){var a={icon:"",iconCls:"",tips:"",attrs:null,disabled:!1,handler:null,callback:null,callBack:null},s=t.tools[o];if("object"==typeof s){s=$.extend(a,s);var l="";s.icon&&(l="background-image:url("+s.icon+")");var d=$('<a class="nex-panel-icon '+s.iconCls+'" hideFocus=true href="javascript:void(0)" style="'+l+'"></a>');i.append(d),s.disabled&&d.addClass("nex-panel-icon-disabled"),s.tips&&d.attr(t.toolTipsTag,Nex.htmlEncode(s.tips)),s.attrs&&d.attr(s.attrs),function(t,n){n.click(function(i){if(!n.hasClass("nex-panel-icon-disabled")){var r;if($.isFunction(t.handler)){var o=t.handler.call(e,n,i);o===!1&&(r=o)}if($.isFunction(t.callBack)){var o=t.callBack.call(e,n,i);o===!1&&(r=o)}if($.isFunction(t.callback)){var o=t.callback.call(e,n,i);o===!1&&(r=o)}r===!1&&(i.stopPropagation(),i.preventDefault())}})}(s,d)}}return e},_headerHasShow:!0,_showHeader:function(){var e=this,t=this.configs,n=t.views.header;return e.rendered?e.renderedHeader?(n._show().show(),this._headerHasShow=!0,t._vviews.header=n,this):(t.showHeader=!0,e.setHeader(),e):(t.showHeader=!0,e)},_hideHeader:function(){var e=this,t=this.configs,n=t.views.header;return e.renderedHeader?(n._hide().hide(),this._headerHasShow=!1,t._vviews.header=null,this):e},showHeader:function(){return this._showHeader().methodInvoke("resetViewSize"),this},hideHeader:function(){return this._hideHeader().methodInvoke("resetViewSize"),this},renderedBody:!1,setBody:function(){var e=this,t=e.configs;if(this.renderedBody)return e;var n=t.views.container,i=$('<div class="nex-panel-body '+t.bodyCls+'" id="'+t.id+'_body"></div>');return t.views.body=i,n.append(i),this.renderedBody=!0,i.css(t.bodyStyle),i.css("padding",t.bodyPadding),t.bodySelectionable||i.disableSelection(),e.bindBodyEvents(),e.onBodyCreate(i,t),e.fireEvent("onBodyCreate",[i,t]),e},onBodyCreate:function(){},renderedToolbars:!1,setToolbars:function(){var e=this,t=e.configs;if(this.renderedToolbars)return e;if(t.tbar){var n=$.isArray(t.tbar)?t.tbar:[t.tbar];e._setToolbar(n,"top")}if(t.bbar){var i=$.isArray(t.bbar)?t.bbar:[t.bbar];e._setToolbar(i,"bottom")}if(t.lbar){var r=$.isArray(t.lbar)?t.lbar:[t.lbar];e._setToolbar(r,"left")}if(t.rbar){var o=$.isArray(t.rbar)?t.rbar:[t.rbar];e._setToolbar(o,"right")}return this.renderedToolbars=!0,e.fireEvent("onToolbarCreate",[t]),e},_setToolbar:function(e,t){var n=this,i=n.configs,r=["top","bottom","left","right"],o=i.views.body;t=-1===$.inArray(t,r)?"top":t;var a=i.id+"_toolbar_"+t,s=$("#"+a);if(!s.length)switch(s=$('<div class="nex-panel-toolbar nex-panel-toolbar-'+t+" "+i.toolbarCls+'" id="'+a+'"></div>'),"top"===t?o.before(s):o.after(s),t){case"top":i.views.tbar=s,i._vviews.tbar=s;break;case"bottom":i.views.bbar=s,i._vviews.bbar=s;break;case"left":i.views.lbar=s,i._hviews.lbar=s;break;case"right":i.views.rbar=s,i._hviews.rbar=s}var l=n.addComponent(s,e);return $.each(l,function(e,t){Nex.isInstance(t)&&t.C("parent",i.id)}),n},_setHorizontalView:function(e,t){var n=this.configs;return n._hviews[e]=t,self},_setVerticalView:function(e,t){var n=this.configs;return n._vviews[e]=t,self},_removeHorizontalView:function(e){var t=this.configs;return t._hviews[e]=null,delete t._hviews[e],self},_removeVerticalView:function(e){var t=this.configs;return t._vviews[e]=null,delete t._vviews[e],self},setHorizontalView:function(e,t){return this._setHorizontalView(e,t),this.resetViewSize(),this},setVerticalView:function(e,t){return this._setHorizontalView(e,t),this.resetViewSize(),this},removeHorizontalView:function(e){return this._removeHorizontalView(e),this.resetViewSize(),this},removeVerticalView:function(e){return this._removeVerticalView(e),this.resetViewSize(),this},_getDiffWidth:function(){var e=this.configs,t=this.callParent(arguments);return t+(e.views.rbar?e.views.rbar._outerWidth():0)},doSetViewSize:function(){var e=this,t=this.configs,n=e.el,i=e.getBody();if(e.callParent(arguments),e.isAutoWidth())i._removeStyle("width");else{var r=0;$.each(t._hviews,function(e,t){t&&(r+=t._outerWidth())}),i._outerWidth(n._width()-r)}if(e.isAutoHeight())i._removeStyle("height");else{var o=0;$.each(t._vviews,function(e,t){t&&(o+=t._outerHeight())}),i._outerHeight(n._height()-o)}var a=i._position();if(t.views.lbar){var s=t.views.lbar;i.css("marginLeft",s._outerWidth()),s._outerHeight(i._outerHeight()),s.css({left:parseFloat(n.css("paddingLeft"))||0,top:a.top})}if(t.views.rbar){var s=t.views.rbar;s._outerHeight(i._outerHeight()),s.css({right:parseFloat(n.css("paddingRight"))||0,top:a.top})}},bindBodyEvents:function(){},renderedFooter:!1,setFooter:function(){var e=this,t=e.C(),n=t.views.container;if(this.renderedFooter)return e;if(!t.footerItems)return e;var i=t.footerItems,r=$('<div class="nex-panel-footer '+t.footerCls+'" id="'+t.id+'_footer"></div>');return t.views.footer=r,t._vviews.footer=r,n.append(r),this.renderedFooter=!0,e.addComponent(r,i),e.onFooterCreate(r,t),e.fireEvent("onFooterCreate",[r,t]),e},onFooterCreate:function(){},setTitle:function(e,t){var n=this,i=this.configs,r=i.title;if(!n.rendered||!n.renderedHeader)return i.title=e,n;var o=n.getHeader(),a=$(".nex-panel-title-text",o);return i.title=e,a.empty(),t&&Nex.gc(),n.addComponent(a,e),n.fireEvent("onTitleChange",[e,r,i]),n},setIcon:function(e){var t=this,n=this.configs,i=n.icon;if(!t.rendered||!t.renderedHeader)return n.icon=e,t;var r=t.getHeader(),o=$(".nex-panel-title-icon",r);return o.length||(o=$(t._getIconTpl()),$(".nex-panel-header-title",r).prepend(o)),n.icon=e,o.css("backgroundImage","url("+e+")"),t.fireEvent("onIconChange",[e,i,n]),t},setIconCls:function(e){var t=this,n=this.configs,i=n.iconCls;if(!t.rendered||!t.renderedHeader)return n.iconCls=e,t;var r=t.getHeader(),o=$(".nex-panel-title-icon",r);return o.length||(o=$(t._getIconTpl()),$(".nex-panel-header-title",r).prepend(o)),o.removeClass(i),n.iconCls=e,o.addClass(e),t.fireEvent("onIconClsChange",[e,i,n]),t},getHeader:function(){var e=this.configs;return e.views.header||null},getBody:function(){var e=this.configs;return e.views.body},getFooter:function(){var e=this.configs;return e.views.footer},getToolbar:function(e){var t=this.configs,n={top:"tbar",bottom:"bbar",left:"lbar",right:"rbar"};return t.views[n[e]]},_close:function(e,t){this.hide(t)},close:function(){var e=this,t=this.configs,n=e._getAnimateOptions.apply(e,arguments),i=function(){t.closeToRemove&&e.destroy(),e.fireEvent("onClose",[t])},r=n.complete;return n.complete=function(){$.isFunction(r)&&r.call(e),i()},this.fireEvent("onBeforeClose",[t])!==!1&&($.isFunction(t.closeFn)?t.closeFn(n.complete,n,arguments):this._close(n.complete,n,arguments)),e},remove:function(){return this.configs.closeToRemove=!0,this.close()},onSizeChange:function(){this.callParent(arguments);var e=this.el;if(this.collapsed){var t=e.height();e.data("__resetHeight__",t)}this.collapsed&&(this.collapsed=!1,this.collapse(!1))},isCollapsingOrExpanding:!1,collapsed:!1,expand:function(e){var t=this,n=this.configs;if(!t.collapsed)return t;if(t.fireEvent("onBeforeExpand",[n])===!1)return t;t.fireEvent("onExpanding",[n]),e=t._undef(e,n.animCollapse);var i=t.el,r=t.getHeader();i.stop(!0,!0),t.collapsed=!1;var o=t._headerHasShow&&r?r.outerHeight():0,a=function(){t.resetSize(),t.setAcceptResize(!0),i.removeClass("nex-panel-collapsed "+n.collapsedCls),t.fireEvent("onExpand",[n])};return e?i.animate({height:i.data("__resetHeight__")||o},n.durationCollapse,n.easingCollapse,function(){a()}):(i.height(i.data("__resetHeight__")||o),a()),t},collapse:function(e){var t=this,n=this.configs;if(t.collapsed)return t;if(t.fireEvent("onBeforeCollapse",[n])===!1)return t;t.fireEvent("onCollapsing",[n]),e=t._undef(e,n.animCollapse);var i=t.el,r=t.getHeader();i.stop(!0,!0),t.collapsed=!0;var o=i.height();i.data("__resetHeight__",o),t.setAcceptResize(!1);var a=t._headerHasShow&&r?r.outerHeight():0,s=function(){t.fireEvent("onCollapse",[n])};return i.addClass("nex-panel-collapsed "+n.collapsedCls),e?i.animate({height:a},n.durationCollapse,n.easingCollapse,function(){s()}):(i.height(a),s()),t},toggleCollapse:function(e){var t=this;this.configs;return t.collapsed?t.expand(e):t.collapse(e),t}}),t}),define("Nex/form/Manager",["require","Nex"],function(e){e("Nex");var t=Nex.define("Nex.form.Manager",{singleton:!0,extend:"Nex.EventObject",alias:"Nex.FormManager",configs:function(e){return{fieldList:{}}},isExists:function(e){return $("#"+e).length?!0:!1},add:function(e){var t=this.configs;t.fieldList[Nex.isInstance(e)?e.configs.id:e]=!0},remove:function(e){var t=this.configs;t.fieldList[Nex.isInstance(e)?e.configs.id:e]=null,delete t.fieldList[Nex.isInstance(e)?e.configs.id:e]},get:function(e,t){var n,i=this.configs;if(e===n)return[];var t=Nex.unDefined(t,"default"),r=[],o=i.fieldList;for(var a in o){var s=Nex.getCmp(a);if(s){var l=s.configs,d=l.name,c=String(l.group).split(/\s+|,/);String(d)===String(e)&&-1!==$.inArray(String(t),c)&&r.push(s)}else delete o[a]}return r},find:function(){var e=[];return e=this.get.apply(this,arguments),e.length?e[0]:null},getVal:function(e,t,n){var i=this;("string"!==$.type(t)||""===t)&&(t="default");var r=i.get.apply(i,[e,t]),o=[],n=Nex.unDefined(n,!1);if($.isArray(r)){$.each(r,function(){var e=this.val();""!==e&&o.push(e)});var a={},s=!1;return $.each(o,function(t,n){$._isPlainObject(n)?(s=!0,$.each(n,function(e,t){a[e]=a[e]||[],a[e].push(t)})):(a[e]=a[e]||[],a[e].push(n))}),s?(o=a,$._isPlainObject(o)&&$.each(o,function(e,t){t=t||[],t[e]=n?t:t.join(",")})):(a[e]=a[e]||[],o=n?a[e]:a[e].join(",")),o}return{}},getValue:function(){return this.getVal.apply(this,arguments)},setVal:function(e,t,n){var i=this,r=i.get.apply(i,[arguments[1],arguments[2]]);return $.isArray(r)?($.each(r,function(t,n){$.isArray(e)?this.val(Nex.unDefined(e[t],"")):this.val(e)}),!0):null},setValue:function(){return this.setValue.apply(this,arguments)},getGroup:function(e,t,n){var i=this,r=this.configs,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),n=Nex.unDefined(n,!1),o=r.fieldList,a=[],s={},l=[];for(var d in o){var c=Nex.getCmp(d);if(c){var u=c.configs,h=u.name,f=u.disabled;if(t||!f){var g=String(u.group).split(/\s+|,/);-1!==$.inArray(String(e),g)&&(l.push(c),n?s[h]||a.push(h):a.push(c),s[h]=!0)}}else delete o[d]}return a.call=function(){var e=[].slice.apply(arguments);if(!e.length)return i;var t=e[0];return e.splice(0,1),$.each(l,function(n,i){i[t]&&$.isFunction(i[t])&&i[t].apply(i,e)}),i},a},getGroupName:function(e,t){return this.getGroup.apply(this,[e,t,!0])},getGroupVal:function(e,t,n){var i=this,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),r=i.getGroupName(e,t),o={};return $.each(r,function(t,r){var a=i.getVal(r,e,n);$._isPlainObject(a)?$.extend(o,a):o[r]=a}),o},getGroupValue:function(){return this.getGroupVal.apply(this,arguments)},setGroupVal:function(e,t){var n=this,e=e||{};return $.isPlainObject(e)&&!$.isEmptyObject(e)&&$.each(e,function(e,i){n.setVal(i,e,t)}),n},setGroupValue:function(){return this.setGroupVal.apply(this,arguments)},checkGroup:function(e,t){for(var n,i=this,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),r=i.getGroup(e,t),o=[],a=0;a<r.length;a++){var s=r[a];n=s.checkVal(),n===!1&&o.push(s.C("name"))}return o.length?o:!0},valid:function(e,t){var n=this,i=n.checkGroup(e,t);return i===!0?!0:!1},checkField:function(e,t){var n=this,i=n.get.apply(n,arguments);i=$.isArray(i)?i:[i];var r=!0;return $.each(i,function(e,t){t.checkVal()||(r=!1)}),r},resetGroup:function(e,t){for(var n=this,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),i=n.getGroup(e,t),r=0;r<i.length;r++){var o=i[r];o.reset()}return n},reset:function(){return this.resetGroup.apply(this,arguments)}});return t}),define("Nex/util/Validate",["require","Nex"],function(e){e("Nex");var t={required:function(e,t){return $.trim(e).length>0},email:function(e,t){return 0==$.trim(e).length||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e);
},url:function(e,t){return 0==$.trim(e).length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},ip:function(e,t){return 0==$.trim(e).length||/^[\d\.]{7,15}$/.test(e)},qq:function(e,t){return 0==$.trim(e).length||/^[1-9]\d{4,12}$/.test(e)},currency:function(e,t){return 0==$.trim(e).length||/^\d+(\.\d+)?$/.test(e)},mobile:function(e,t){return 0==$.trim(e).length||/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}?$|15[89]\d{8}?$/.test(e)},phone:function(e,t){return 0==$.trim(e).length||/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/.test(e)},number:function(e,t){return 0==$.trim(e).length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return 0==$.trim(e).length||/^\d+$/.test(e)},creditcard:function(e,t){if(0==$.trim(e).length)return!0;if(/[^0-9 \-]+/.test(e))return!1;var n=0,i=0,r=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var a=e.charAt(o);i=parseInt(a,10),r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10===0},rangelength:function(e,t){if(0==$.trim(e).length)return!0;var n=e.split(",").length;return n>=t[0]&&n<=t[1]},min:function(e,t){return 0==$.trim(e).length?!0:e>=t},max:function(e,t){return 0==$.trim(e).length?!0:t>=e},range:function(e,t){return 0==$.trim(e).length?!0:e>=t[0]&&e<=t[1]},equalTo:function(e,t){var n=$(t);return e===n.val()}};return Nex.addUtil("Validate",t),t}),define("Nex/showat/ShowAt",["require","Nex"],function(e){e("Nex");var t=Nex.define("Nex.showat.ShowAt",{extend:"Nex.AbstractComponent",alias:"Nex.ShowAt Nex.showAt",xtype:"showAt showat",configs:function(){return{prefix:"showAt-",denyManager:!0,autoShow:!1,el:null,at:null,parent:null,autoRegion:!0,visibleable:!0,visibleEdge:0,visibleEdgeLT:0,offsetX:0,offsetY:0,zAlign:"y",xAlign:"center",yAlign:"center",animate:null}}});return t.override({initComponent:function(e){var t=this;this.configs;t.callParent(arguments),t.parseSource().parseEl()},parseSource:function(){var e=this,t=e.configs,n=$(t.el);if(t.parent)if(t.parent!==window&&t.parent!==document)if(t.parent=$(t.parent),t.parent.length){var i=t.parent.css("position");"static"===i&&t.parent.css("position","relative")}else t.parent=null;else t.parent=$(document.body);if(!t.parent)if(n.is(":hidden")){var r=n._display("nex-hide2display");t.parent=n.offsetParent(),r._hidden("nex-hide2display")}else t.parent=n.offsetParent();return t.parent=t.parent.is("html")?$(document.body):t.parent,e},parseEl:function(){var e=this,t=e.configs;return null===t.at?(t.at=t.parent,t.at.is("body")&&(t.at=window)):$(t.at).is("body")&&(t.at=window),t.at=t.at===document?window:t.at,e},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onCreate",e._checkToShow,e),e},_checkToShow:function(){var e=this,t=e.configs;t.autoShow&&e.show()},getRender:function(e){var t,n=this,i=n.configs,r=e===t?i.parent:$(e);return r.is("body")||r.is("html")?window:r[0]},getOffset:function(e){var t,n=this,i=(n.configs,n.getRender());if($._isPlainObject(e)&&(e.left=e.left===t?0:e.left,e.top=e.top===t?0:e.top),$.isWindow(i)){if(Nex.isPlainObject(e))return $.extend({},e);var r=$(e).offset(),o=$(window).scrollLeft(),a=$(window).scrollTop();return r?r:{left:o,top:a}}var i=$(i),o=i.scrollLeft(),s=parseFloat(i.css("borderLeftWidth"))||0,l=parseFloat(i.css("paddingLeft"))||0,a=i.scrollTop(),d=parseFloat(i.css("borderTopWidth"))||0,c=parseFloat(i.css("paddingTop"))||0,r={left:0,top:0},u=i.offset(),h=r;return h=Nex.isPlainObject(e)?$.extend({},e):$(e).offset()||r,r={left:h.left-u.left-s-l,top:h.top-u.top-d-c},{left:o+r.left,top:a+r.top}},getShowSpace:function(e,t){var n,i=this,r=i.configs;r.at===n&&t&&(e=t);var e=i._undef(e,r.at),t=i._undef(t,r.parent),o=$(e),a=i.getRender(t),s=$(a).width(),l=$(a).height(),d=i.getOffset(e),c=$(a).scrollLeft(),u=$(a).scrollTop(),h={top:d.top-u,left:d.left-c};return h.bottom=l-h.top-($._isPlainObject(e)?0:o._outerHeight()),h.right=s-h.left-($._isPlainObject(e)?0:o._outerWidth()),h},checkSpace:function(e,t,n,i){var r=this,o=(r.configs,r.getShowSpace());if(o[e]<=0)return!1;var a=!0;switch(e){case"bottom":a=t.height>o.bottom?!1:!0;break;case"top":a=t.height>o.top?!1:!0;break;case"right":a=t.width>o.right?!1:!0;break;case"left":a=t.width>o.left?!1:!0}return a},adaptRegion:function(e,t,n){var i=this,r=i.configs,o=r.zAlign.toLowerCase(),a=r.xAlign.toLowerCase(),s=r.yAlign.toLowerCase(),l=i.getShowSpace(),d=i.fireEvent("onBeforeAdaptRegion",[r]);if(d===!1)return!1;if("y"===o){if("center"===s)return;var c=i.checkSpace(s,e,t,n);if(c===!1){var u="bottom"===s?"top":"bottom",c=i.checkSpace(u,e,t,n);c?r.yAlign=u:l.bottom>l.top?r.yAlign="bottom":l.bottom<l.top&&(r.yAlign="top")}}else{if("center"===a)return;var c=i.checkSpace(a,e,t,n);if(c===!1){var h="right"===a?"left":"right",c=i.checkSpace(h,e,t,n);c?r.xAlign=h:l.left>l.right?r.yAlign="left":l.left<l.right&&(r.yAlign="right")}}i.fireEvent("onAdaptRegion",[r])},hasScrollBarX:function(e){return Nex.hasScroll(e,"left")},hasScrollBarY:function(e){return Nex.hasScroll(e)},adaptPosition:function(e){var t=this,n=t.configs,i=t.getRender(),r=$(i).width(),o=$(i).height();if(!$.isWindow(i)){var a=t.getScrollbarSize();t.hasScrollBarX(i)&&(o-=a.width),t.hasScrollBarY(i)&&(r-=a.height)}var s=$(i).scrollLeft(),l=$(i).scrollTop(),d=t.getWidth(n.el),c=t.getHeight(n.el),u=n.visibleEdge,h=n.visibleEdgeLT,f=r+s-e.left-d,g=o+l-e.top-c;return f=u>f?f-u:0,g=u>g?g-u:0,e.left=e.left+f-s<h?s+h:e.left+f,e.top=e.top+g-l<h?l+h:e.top+g,t.fireEvent("onAdaptPosition",[e,n]),e},getWidth:function(e){var t=this;t.configs;return $._isPlainObject(e)?0:$(e)._outerWidth()},getHeight:function(e){var t=this;t.configs;return $._isPlainObject(e)?0:$(e)._outerHeight()},x_innerleft:function(e,t,n){var i=this,r=i.configs;return t.left+r.offsetX},x_innerright:function(e,t,n){var i=this,r=i.configs;return t.left+(t.width-e.width)-r.offsetX},y_innertop:function(e,t,n){var i=this,r=i.configs;return t.top+r.offsetY},y_innerbottom:function(e,t,n){var i=this,r=i.configs;return t.top+(t.height-e.height)-r.offsetY},x_left:function(e,t,n){var i=this,r=i.configs,o=r.zAlign.toLowerCase();return"y"===o?t.left+r.offsetX:t.left-e.width-r.offsetX},x_center:function(e,t,n){var i=this;i.configs;return t.left+(t.width-e.width)/2},x_right:function(e,t,n){var i=this,r=i.configs,o=r.zAlign.toLowerCase();return"y"===o?t.left+(t.width-e.width)-r.offsetX:t.left+t.width+r.offsetX},y_top:function(e,t,n){var i=this,r=i.configs,o=r.zAlign.toLowerCase();return"y"===o?t.top-e.height-r.offsetY:t.top-(e.height-t.height)-r.offsetY},y_center:function(e,t,n){var i=this,r=i.configs;r.zAlign.toLowerCase();return t.top+(t.height-e.height)/2},y_bottom:function(e,t,n){var i=this,r=i.configs,o=r.zAlign.toLowerCase();return"y"===o?t.top+t.height+r.offsetY:t.top+r.offsetY},fixPosition:function(e,t){return e},unFixPosition:function(e,t){return e},getShowPos:function(){var e=this,t=e.configs,n=t.el.is(":hidden"),i=null;n&&(i=t.el._display("nex-hide2display"));var r=e.getRender(),o=$(r).scrollLeft(),a=$(r).scrollTop(),s={left:o,top:a},l=e.getOffset(t.el);l.width=e.getWidth(t.el),l.height=e.getHeight(t.el);var d=e.getOffset(t.at);d.width=e.getWidth(t.at),d.height=e.getHeight(t.at),t.autoRegion&&e.adaptRegion(l,d,s);var c=function(n){var i=null;return i=n in t?t[n]:n in e?e[n]:n in window?window[n]:function(){return{left:0,top:0}}},u="x_"+t.xAlign.toLowerCase(),h="y_"+t.yAlign.toLowerCase(),f={left:c(u).call(e,l,d,s),top:c(h).call(e,l,d,s)},g=!1;t.visibleable&&(g=e.adaptPosition(f)),e.fireEvent("onGetPosition",[p,t]);var p=g?g:f;return p=e.fixPosition(p,t),n&&i&&i._hidden("nex-hide2display"),p},showAtPos:function(e,t){},showAtEl:function(e,t){},show:function(){var e=this,t=this.configs,n=e.fireEvent("onBeforeShow",[r,t]);if(n===!1)return!1;var i=function(){e.fireEvent("onShow",[r,t])};if($.isFunction(t.animate)){var r=e.getShowPos();t.animate.call(e,t.el,r,i)}else{var o=$(t.el),a=$(t.el).css("position");("static"===a||"relative"===a)&&o.css("position","absolute");var r=e.getShowPos();o.css(r).show(),i()}}}),$.fn.showAt=function(e,t){var n,i,t=t===n?{}:t;e===n?i={}:$._isPlainObject(e)?i=e:(i={at:e},$.extend(i,t));var r=[];return this.each(function(){i.el=$(this),i.autoShow=!0;var e=Nex.Create("showAt",i);r.push(e)}),1===r.length?r[0]:r},t}),define("Nex/mixins/DropDown",["require","Nex","Nex/showat/ShowAt"],function(e){return e("Nex"),e("Nex/showat/ShowAt"),Nex.define("Nex.mixins.DropDown",{dropdownzIndex:999999+Nex.zIndex,configs:function(e){return{multiSplit:",",textKey:"text",valueKey:"value",splitChr:["-",",",";","|"],dropdownHideToRemove:!1,dropdownItems:[],dropdownItemDefault:{},dropdownLoadMsg:"...",dropdownLoadWidth:0,dropdownLoadShowAt:{},dropdownAnim:!1,dropdownDuration:200,dropdownEasing:"easeOutQuad",dropdownMode:1,dropdownBorder:!0,dropdownPadding:0,dropdownAutoScroll:!1,dropdownEmptyMsg:"",dropdownCls:"",dropdownShowAt:{},dropdownHeight:"auto",dropdownWidth:"auto",dropdownMaxHeight:0,dropdownMinHeight:0,dropdownMaxWidth:0,dropdownMinWidth:0,dropdownSelectionable:!0,dropdownEdge:5,dropdownItemsFilter:null,dropdownItemFilter:null,dropdownItemFormat:null,dropdownItemNoWrap:!0,dropdownItemTips:!1,dropdownItemTipsTag:"title",dropdownItemTipsFilter:null,dropdownOtherHeight:0,dropdownOtherWidth:0,dropdownSingleSelect:!0,dropdownHideOnClick:!0,dropdownHideOnBlur:!0,dropdownShadowShow:!0,dropdownResetPosDuration:200,dropdownItemTpl:'<div id="<%=id%>" <%=tips%> value="<%=value%>" class="nex-form-dropdown-item <%=selected?"nex-form-dropdown-item-selected":""%> <%=disabled?"nex-form-dropdown-item-disabled":""%> <%=nowrap?"nex-form-dropdown-item-nowrap":""%> <%=cls%>"><%=text%></div>',dropdownItemSplitLineTpl:'<div class="nex-form-item-separator"><div class="nex-form-line-h"></div></div>',"@onDestroy._sysdp":function(){this.destroyDropDown()}}},_getElOffset:function(e){var t=this,n=(t.configs,$(e).offset()),i=$(window).scrollLeft(),r=$(window).scrollTop();return n?n:{left:i,top:r}},_getShowAtSpace:function(e){var t=this,e=(t.configs,Nex.unDefined(e,t.getDropDownShowAt())),n=$(e),i=$(window).width(),r=$(window).height(),o=$._isPlainObject(e)?e:t._getElOffset(n),a=$(window).scrollLeft(),s=$(window).scrollTop(),l={top:o.top-s,left:o.left-a};return l.bottom=r-l.top-($._isPlainObject(e)?0:n._outerHeight()),l.right=i-l.left-($._isPlainObject(e)?0:n._outerWidth()),l},getDropDownItems:function(){var e=this.configs;return e.dropdownItems||[]},getDropDownItemDefault:function(){var e=this.configs;return e.dropdownItemDefault},__itemId:1,_parseItemData:function(e){var t=this,n=t.configs,i=n.valueKey,r=n.textKey;if(Nex.isPlainObject(e)&&e.__id)return e;var o={};return Nex.isArray(e)&&e.length?(o[i]=e[0],o[r]=Nex.unDefined(e[1],e[0])):Nex.isPlainObject(e)?(o=$.extend({},e),o[i]=Nex.unDefined(e[i],e[r]),o[r]=Nex.unDefined(e[r],o[i]),o[i]=Nex.unDefined(o[i],""),o[r]=Nex.unDefined(o[r],"")):(o[i]=e+"",o[r]=o[i],-1!==Nex.inArray(o[i],n.splitChr)&&(o.__splitLine=!0)),"__id"in o||(o.__id=n.id+"_item_"+t.__itemId++),$.extend(o,t.getDropDownItemDefault(),o),o},isSplitLine:function(e){var e=e||{};return e.__splitLine?!0:!1},setDropDownItems:function(e){var t=this.configs;e&&(t.dropdownItems=$.isArray(e)?e.concat([]):e),1==t.dropdownMode&&$.isArray(t.dropdownItems)&&$.each(t.dropdownItems,function(e,n){t.dropdownItems[e]=self._parseItemData(n)});var n=self.getDropDown();return n.length&&e&&this.resetDropDownList(t.dropdownItems),t.dropdownItems},getDropDownItemData:function(e,t){var n,i=this,r=i.configs,t=t===n?!0:t,o=i.getDropDownItems(),a=e;if(e===n)return null;"string"===$.type(e)?(e=e.split(r.multiSplit),e.length>1&&(a=e)):"array"!==$.type(e)&&(e=[e]);var s={};$.each(e,function(e,t){s[t]=!0});var l=[];return $.each(o,function(e,n){if($.isPlainObject(n)){var i=n.value;i in s&&l.push(t?n:e)}}),1===l.length&&"array"!==$.type(a)?l[0]:l},getDropDownItemIndex:function(e){return this.getDropDownItemData(e,!1)},getDropDownItemDataById:function(e){var t,n=this,i=(n.configs,{}),r=n.getDropDownItems();return e===t?i:($.each(r,function(t,n){if($.isPlainObject(n)){var r=n.__id;return r===e?(i=n,!1):void 0}}),i)},getDropDownShowAt:function(){return this.getContainer()},showDropDownLoading:function(e,t){var n=this,i=n.configs,e=e||i.dropdownLoadMsg,r=n.getDropDownShowAt(),o=$("#"+i.id+"_dropdown_loading");if(n.__ddt&&clearTimeout(n.__ddt),o.length)o.html(i.dropdownLoadMsg);else{o=$('<div id="'+i.id+'_dropdown_loading" class="nex-form-dropdown-loading">'+e+"</div>"),$(document.body).append(o);var a=r._outerWidth(),s=o._outerWidth(),l=$.isFunction(i.dropdownLoadWidth)?i.dropdownLoadWidth.call(n,i):i.dropdownLoadWidth;l>0?o._outerWidth(l):a>s&&o._outerWidth(a)}return o.showAt($.extend({at:r,xAlign:"left",yAlign:"bottom",offsetY:-1},i.dropdownLoadShowAt)),$.isFunction(t)&&t.call(n,o),o},__ddt:0,hideDropDownLoading:function(e){var t=this,n=t.configs,i=$("#"+n.id+"_dropdown_loading");return i.length&&(t.__ddt=setTimeout(function(){i.hide(e),t.__ddt=0},0)),t},getDropDown:function(){var e=this,t=e.configs;return $("#"+t.id+"_dropdown")},getDropDownBody:function(){var e=this,t=e.configs;return $("#"+t.id+"_dropdown_body")},getDropDownListItems:function(){var e=this.getDropDownBody();return $(">.nex-form-dropdown-item",e)},getDropDownListSelectedItems:function(){var e=this.getDropDownBody();return $(">.nex-form-dropdown-item-selected",e)},getDropDownListDisabledItems:function(){var e=this.getDropDownBody();return $(">.nex-form-dropdown-item-disabled",e)},createDropDown:function(){var e=this,t=e.configs,n=e.fireEvent("onBeforeCreateDropDwon",[t]);if(n===!1)return e;var i=$("#"+t.id+"_dropdown");if(i.length)return i;var r=[];return r.push('<div id="'+t.id+'_dropdown" class="nex-form-dropdown '+(t.dropdownBorder?"nex-form-dropdown-border":"")+" "+t.dropdownCls+'" tabindex="-1">'),r.push('<div id="'+t.id+'_dropdown_body" class="nex-form-dropdown-body " tabindex="-1" >'),r.push("</div>"),r.push("</div>"),i=$(r.join("")).appendTo(document.body),t.dropdownSelectionable||i.disableSelection(),t.dropdownPadding>0&&$("#"+t.id+"_dropdown_body").css("padding",t.dropdownPadding),e._setDropDownEvent(),e.fireEvent("onCreateDropDwon",[i,t]),i},getDropDownSelectedValue:function(){return null},__dropdownMode:1,createDropDownList:function(e){var t,n=this,i=this.getDropDownSelectedValue(),r=n.configs,o=[],a=r.valueKey,s=r.textKey,e=Nex.unDefined(e,n.getDropDownItems()),l={items:e},d=n.fireEvent("onBeforeCreateDropDwonList",[l,r]);if(d===!1)return n;e=l.items;var c=$("#"+r.id+"_dropdown");c.length||(c=n.createDropDown());var u=$("#"+r.id+"_dropdown_body");if(u.removeClass("nex-form-dropdown-m1 nex-form-dropdown-m2 nex-form-dropdown-auto-scroll"),$.isArray(e)&&1==r.dropdownMode){n.__dropdownMode=1,u.addClass("nex-form-dropdown-m1");var h={};null!==i&&$.each(String(i).split(r.multiSplit),function(e,t){h[t]=!0});for(var f=e.length,g=0;f>g;g++){var p=n._parseItemData(e[g]);h[p[a]]?p.selected=!0:p.selected=!1,e[g]=p;var v=$.extend({id:e[g].__id,cls:"",selected:!1,disabled:!1,nowrap:r.dropdownItemNoWrap,tips:""},p);if(r.dropdownItemTips){var m=[r.dropdownItemTipsTag,'="'],_=Nex.unDefined(v.tips,v[s]);$.isFunction(r.dropdownItemTipsFilter)&&(_=r.dropdownItemTipsFilter.call(n,_,v)),_&&(_=Nex.htmlEncode(_)),v.tipsMsg=_,v.tipsTag=r.dropdownItemTipsTag,m.push(_),m.push('"'),v.tips=m.join("")}if(v.text=v[s],v.value=Nex.htmlEncode(v[a]),r.dropdownItemFilter&&$.isFunction(r.dropdownItemFilter)){var d=r.dropdownItemFilter.call(n,v);if(d===!1)continue;d!==t&&(v=d)}r.dropdownItemFormat&&$.isFunction(r.dropdownItemFormat)&&(v.text=r.dropdownItemFormat.call(n,v.text,v)||v.text);var d=n.fireEvent("onBeforeDropDownItemCreate",[v,r]);if(d!==!1){var x="";x=n.isSplitLine(v)?n.tpl(r.dropdownItemSplitLineTpl,v):n.tpl(r.dropdownItemTpl,v);var b={itemTpl:x,itemData:v};n.fireEvent("onDropDownItemCreate",[b,r]),o.push(b.itemTpl)}}f||""==r.dropdownEmptyMsg||o.push(r.dropdownEmptyMsg),u.html(o.join(""))}else n.__dropdownMode=2,u.addClass("nex-form-dropdown-m2"),r.dropdownAutoScroll&&u.addClass("nex-form-dropdown-auto-scroll"),u.html(""),Nex.gc(),n.addComponent(u,e);return n.fireEvent("onCreateDropDwonList",[c,n.__dropdownMode,r]),c},resetDropDownList:function(e){var t=this,n=this.configs,e=this._undef(e,this.getDropDownItems());if($.isFunction(n.dropdownItemsFilter)){var i=n.dropdownItemsFilter.call(t,e);if(i===!1)return t;i!==undef&&(e=i)}var r={items:e},o=t.fireEvent("onResetDropDownList",[r,n]);if(o===!1)return t;e=r.items,$.isArray(e)?t.__CItems=e:t.__CItems.length=0;t.createDropDownList(e);return t.setDropDownSize(),t.__DP_isShow&&t.resetDropDownPos(),t},__CItems:[],_bindCloseDropDownEvents:function(){var e=this,t=(this.getDropDownItems(),e.configs);e.__unbindDropDown(),t.dropdownHideOnBlur&&($(document).bind("mousewheel.dropdown_"+t.id+" contextmenu.dropdown_"+t.id+" mousedown.dropdown_"+t.id,function(n){var i=n.target||n.srcElement;$(i).is("#"+t.id)||$(i).is("#"+t.id+"_dropdown")||$(i).parents("#"+t.id+"_dropdown,#"+t.id).length||e.hideDropDown()}),$(window).bind("resize.dropdown_"+t.id,function(){e.hideDropDown()})),$(document).bind("keydown.dropdown_"+t.id,function(n){var i=$("#"+t.id+"_dropdown_body"),r=i.find(">.nex-form-dropdown-item-over:last"),o=!1;if(r.length||(r=i.find(">.nex-form-dropdown-item-selected:last"),r.length||(r=i.find(">.nex-form-dropdown-item:first"),o=!0)),r.length){var a=r;switch(n.keyCode){case 38:for(i.find(">.nex-form-dropdown-item").removeClass("nex-form-dropdown-item-over");;){var s=o?r:r.prev();if(s.length){if(!s.hasClass("nex-form-dropdown-item")){r=s;continue}if(s.hasClass("nex-form-dropdown-item-disabled")){if(r=s,o)break;o=!1;continue}r=s,a=s}else if(s=a,!s.hasClass("nex-form-dropdown-item")){r=s,o=!1;break}o=!1;var l=s.length?s:a,d=l.attr("id"),c=e.__getItemData(d),u=e.fireEvent("onDropDownItemForward",[c,l[0],n,t]);u!==!1&&l.addClass("nex-form-dropdown-item-over"),c&&e.scrollToItem(c);break}break;case 40:for(i.find(">.nex-form-dropdown-item").removeClass("nex-form-dropdown-item-over");;){var h=o?r:r.next();if(o=!1,h.length){if(!h.hasClass("nex-form-dropdown-item")){r=h;continue}if(h.hasClass("nex-form-dropdown-item-disabled")){r=h;continue}r=h,a=h}else if(h=a,!h.hasClass("nex-form-dropdown-item")){r=h,o=!1;break}var l=h.length?h:a,d=l.attr("id"),c=e.__getItemData(d),u=e.fireEvent("onDropDownItemForward",[c,l[0],n,t]);u!==!1&&l.addClass("nex-form-dropdown-item-over"),c&&e.scrollToItem(c);break}break;case 13:e.__dp_click(i.find(">.nex-form-dropdown-item-over"),n)}}})},setDropDownList:function(e){return this.__DP_isShow?this.resetDropDownList(e):0,this},resetDropDownSizeAndPos:function(){this.__DP_isShow&&(this.resetDropDownSize(),this.resetDropDownPos())},__DP_isShow:!1,showDropDown:function(e,t){var n,i=this,r=i.configs,o=e?!0:!1,e=this._undef(e,this.getDropDownItems());if(i.__DP_isShow&&o)return i.resetDropDownList(e),i;if($.isFunction(r.dropdownItemsFilter)){var a=r.dropdownItemsFilter.call(i,e);if(a===!1)return i;a!==n&&(e=a)}var s={items:e},l=i.fireEvent("onBeforeDropDownShow",[s,r]);if(l===!1)return i;if(!r.dropdownHideToRemove){var d=i.getDropDown();if(d.length){if(1==i.__dropdownMode){var c=i.getDropDownSelectedValue();null!==c&&i.dropdownSelectItems(c)}return i.setDropDownSize(),i._showDropDown(null,d),i}}e=s.items,i.__CItems=[],$.isArray(e)?i.__CItems=e:i.__CItems.length=0;var d=$("#"+r.id+"_dropdown");d.length||(d=i.createDropDown()),$.isArray(e)&&1==r.dropdownMode?i.__dropdownMode=1:(i.__dropdownMode=2,i._setDropDownSize2());var d=i.createDropDownList(e);return 1==i.__dropdownMode&&i._setDropDownSize1(),i._showDropDown(t,d),i},_showDropDown:function(e,t){var n=this,i=n.configs,r=function(){n.fireEvent("onDropDownShow",[i]),$.isFunction(e)&&e.call(n),i.dropdownShadowShow&&n.dropdownShadowShow(),n.__DP_isShow=!0,n._bindCloseDropDownEvents()};if(1==n.__dropdownMode){var o=$("#"+i.id+"_dropdown_body").find(">.nex-form-dropdown-item-selected:last");o.length&&n.scrollToItemById(o.attr("id"))}var a=t||n.getDropDown();n.__DP_isShow=!0;var s=Nex.mixins.DropDown.dropdownzIndex+2;return n.dropdownzIndex=s,a.css("zIndex",s),i.dropdownAnim?n._animateDropDownShow(r):n._defaultDropDownShow(r),n},removeDropDown:function(){return this.hideDropDown.apply(this,arguments)},hideDropDown:function(e){var t,n=this,i=n.configs,t=function(){i.dropdownShadowShow&&n.hideDropDownShadow(),n.fireEvent("onDropDownHide",[i]),$.isFunction(e)&&e.call(n),n.__DP_isShow=!1},r=n.fireEvent("onBeforeDropDownHide",[i]);return r===!1?n:(n.__DP_isShow=!1,n.unsetDropDownEvent(),i.dropdownAnim?n._animateDropDownHide(t):n._defaultDropDownHide(t),n)},__unbindDropDown:function(){var e=this.configs;$(document).unbind(".dropdown_"+e.id),$(window).unbind(".dropdown_"+e.id)},isDropDownCreate:function(){var e=this.configs,t=$("#"+e.id+"_dropdown");return t.length?!0:!1},isDropDownShow:function(){return this.__DP_isShow},toggleDropDown:function(e){var t=this;t.configs;return t.__DP_isShow?t.hideDropDown(e):t.showDropDown(e),t},_getDropDownOtherHeight:function(){return this.configs.dropdownOtherHeight},_getDropDownOtherWidth:function(){return this.configs.dropdownOtherWidth},__DP_autoWidth:!1,__DP_autoHeight:!1,_setDropDownSize1:function(){var e=this,t=e.configs,n=e.getDropDownShowAt(),i=e._getShowAtSpace(n);i.bottom-=t.dropdownEdge,i.top-=t.dropdownEdge,i.left-=t.dropdownEdge,i.right-=t.dropdownEdge;var r=$("#"+t.id+"_dropdown"),o=$("#"+t.id+"_dropdown_body"),a=(parseInt(r.css("paddingTop"))||0)+(parseInt(r.css("paddingBottomWidth"))||0)+(parseInt(r.css("borderTop"))||0)+(parseInt(r.css("borderBottomWidth"))||0),s=(parseInt(r.css("paddingLeft"))||0)+(parseInt(r.css("paddingRight"))||0)+(parseInt(r.css("borderLeftWidth"))||0)+(parseInt(r.css("borderRightWidth"))||0);o._removeStyle("width height");var l=$(window).width()-t.dropdownEdge,d=$.isFunction(t.dropdownWidth)?t.dropdownWidth.call(e,t):t.dropdownWidth,c=$.isFunction(t.dropdownHeight)?t.dropdownHeight.call(e,t):t.dropdownHeight;"auto"==d&&r._removeStyle("width"),"auto"==c&&r._removeStyle("height"),d="auto"==d?0:d,c="auto"==c?0:c;var u=!1,h=!1,f=o.outerHeight()+a,g=c>0?c:f,p=$.isFunction(t.dropdownMaxHeight)?t.dropdownMaxHeight.call(e,t):t.dropdownMaxHeight,v=$.isFunction(t.dropdownMinHeight)?t.dropdownMinHeight.call(e,t):t.dropdownMinHeight;g=Math.min(g,Math.max(i.bottom,i.top)),v>0&&(g=Math.max(g,v)),p>0&&(g=Math.min(g,p)),u=!0,0!=c||g!=f?(u=!1,r._outerHeight(g),o._outerHeight(r.height()-e._getDropDownOtherHeight())):r._removeStyle("height");var m=o.outerWidth()+s,_=d>0?d:m,x=$.isFunction(t.dropdownMaxWidth)?t.dropdownMaxWidth.call(e,t):t.dropdownMaxWidth,b=$.isFunction(t.dropdownMinWidth)?t.dropdownMinWidth.call(e,t):t.dropdownMinWidth;if(b=b>0?b:n._outerWidth(),_=Math.max(_,b),_=Math.min(_,l),x>0&&(_=Math.min(_,x)),h=!0,0!=d||_!=m)h=!1,r._outerWidth(_),o._outerWidth(r.width()-e._getDropDownOtherWidth());else{r._removeStyle("width");var w=Nex.hasScroll(o,"top");if(w){h=!1;var y=e.getScrollbarSize();_+=y.y+e._getDropDownOtherWidth(),_=Math.min(_,l),r._outerWidth(_),o._outerWidth(r.width())}}return e.__DP_autoWidth=h,e.__DP_autoHeight=u,e.fireEvent("onSetDropDownSize",[r,1,t]),e},_setDropDownSize2:function(){var e=this,t=e.configs,n=e.getDropDownShowAt(),i=$("#"+t.id+"_dropdown"),r=$("#"+t.id+"_dropdown_body"),o=$(window).width()-t.dropdownEdge,a=$(window).height()-t.dropdownEdge,s=$.isFunction(t.dropdownWidth)?t.dropdownWidth.call(e,t):t.dropdownWidth,l=$.isFunction(t.dropdownHeight)?t.dropdownHeight.call(e,t):t.dropdownHeight;inputW=n._outerWidth(),0==s&&(s=inputW),l=parseInt(l,10),l=isNaN(l)?0:l;var d=!1,c=!1;return 0==l||"auto"==l?(i._removeStyle("height"),r._removeStyle("height"),d=!0,i.outerHeight()>a&&(i._outerHeight(a),r._outerHeight(i.height()-e._getDropDownOtherHeight()),d=!1)):(d=!1,i._outerHeight(l),r._outerHeight(i.height()-e._getDropDownOtherHeight())),"auto"==s?(c=!0,i._removeStyle("width"),r._removeStyle("width"),i.outerWidth()>o&&(c=!1,i._outerHeight(o),r._outerHeight(i.width()-e._getDropDownOtherWidth()))):(c=!1,s=parseInt(s,10),s=isNaN(s)?inputW:s,i._outerWidth(s),r._outerWidth(i.width()-e._getDropDownOtherWidth())),e.__DP_autoWidth=c,e.__DP_autoHeight=d,e.fireEvent("onSetDropDownSize",[i,2,t]),e},setDropDownSize:function(){var e=this;e.configs;return 2==e.__dropdownMode?e._setDropDownSize2():e._setDropDownSize1()},resetDropDownSize:function(){return this.setDropDownSize()},__dp_click:function(e,t){var n=this,i=this.configs,r=$(e),o=r.attr("id"),a=n.__getItemData(o);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var s=n.fireEvent("onDropDownItemClick",[a,e,t,i]);s!==!1&&n._dropdownItemsSelect(a,e,t)}},dropdownSelectItems:function(e){var t=this,n=this.configs,i=n.multiSplit,r=$("#"+n.id+"_dropdown_body"),o=String(e).split(i),a={};return $.each(o,function(e,t){a[t]=!0}),$(">.nex-form-dropdown-item",r).each(function(){var e=$(this).attr("value");e in a?$(this).addClass("nex-form-dropdown-item-selected"):$(this).removeClass("nex-form-dropdown-item-selected")}),t},_dropdownItemsSelect:function(e,t,n){var i=this,r=this.configs,o=$(t),a=o.hasClass("nex-form-dropdown-item-selected");if(r.dropdownSingleSelect){if(a)return;i.unselectDropDownAll(),o.addClass("nex-form-dropdown-item-selected"),r.dropdownHideOnClick&&i.hideDropDown(),i.fireEvent("onDropDownItemSelected",[e,t,n,r]),i.fireEvent("onDropDownItemSelectedChange",[e[r.valueKey],e[r.textKey],e,t,n,r])}else{var s=r.multiSplit,l=$("#"+r.id+"_dropdown_body"),d=[],c=[];a?(o.removeClass("nex-form-dropdown-item-selected"),i.fireEvent("onDropDownItemUnSelected",[e,t,n,r])):(o.addClass("nex-form-dropdown-item-selected"),i.fireEvent("onDropDownItemSelected",[e,t,n,r])),$(">.nex-form-dropdown-item-selected",l).each(function(){d.push($(this).attr("value"))}),$.each(d,function(e,t){var n=i.__getItemData(t,!1);n?c.push(n[r.textKey]):c.push(t)}),i.fireEvent("onDropDownItemSelectedChange",[d.join(s),c.join(s),e,t,n,r])}},__getItemData:function(e,t){var n=this,i=this.getDropDownItems(),r=n.configs,t=Nex.unDefined(t,!0),o=null;return $.each(i.concat(n.__CItems),function(n,i){if($.isPlainObject(i)){var a=t?i.__id:i[r.valueKey];return String(a)===String(e)?(o=i,!1):void 0}}),o},_setDropDownEvent:function(){var e=this,t=e.configs,n=$("#"+t.id+"_dropdown_body"),i=function(t){return e.__getItemData(t)},r=function(t){e.__dp_click(this,t)};return n.undelegate(">.nex-form-dropdown-item").delegate(">.nex-form-dropdown-item",{mouseenter:function(n){var r=$(this),o=r.attr("id"),a=i(o);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var s=e.fireEvent("onDropDownItemOver",[a,this,n,t]);s!==!1&&r.addClass("nex-form-dropdown-item-over")}},mouseleave:function(n){var r=$(this),o=r.attr("id"),a=i(o);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var s=e.fireEvent("onDropDownItemOut",[a,this,n,t]);s!==!1&&r.removeClass("nex-form-dropdown-item-over")}},click:r}),e.unsetDropDownEvent(),e.fireEvent("onSetDropDownEvent",[t]),e},scrollToItem:function(e){var t=this,n=t.configs,i=t.getDropDownItems(),r="";"object"==typeof e&&(e=e[n.valueKey]);for(var o=0;o<i.length;o++)if(i[o].value+""==e+""){r=i[o].__id;break}if(!r)return t;var a=$("#"+n.id+"_dropdown_body");if(!a.length)return t;var s=a.offset(),l=a._outerHeight(),d=$("#"+r);if(!d.length)return t;var c=d.offset(),u=d._outerHeight(),h=0;s.top>c.top?h=s.top-c.top:s.top+l<c.top+u&&(h=s.top+l-(c.top+u));var f=0;return f=a.scrollTop()-h,a.scrollTop(f),t},scrollToItemById:function(e){var t=this,n=(t.configs,t.__getItemData(e));return n&&t.scrollToItem(n),t},unsetDropDownEvent:function(){var e=this,t=e.configs;return e.fireEvent("onUnsetDropDownEvent",[t]),e.__unbindDropDown(),e},unselectDropDownAll:function(){var e=this,t=e.configs,n=e.getDropDownItems();return $.each(n.concat(e.__CItems),function(e,t){"object"==typeof t&&(t.selected=!1)}),$("#"+t.id+"_dropdown_body").find(">.nex-form-dropdown-item-selected").removeClass("nex-form-dropdown-item-selected"),e},__DP_ShowAlign:"bottom",_defaultDropDownShow:function(e){var t,n=this,i=n.configs,r=$("#"+i.id+"_dropdown");t=$.isFunction(e)?e:null,r._show(),r._visible(!0);var o=n.getDropDownShowAt();return r.showAt($.extend({at:o,visibleEdge:i.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0,autoShow:!0,"onShow.dropdown":function(e,t){n.__DP_ShowAlign=t.yAlign,r.removeClass("nex-form-dropdown-"+t.yAlign),r.addClass("nex-form-dropdown-"+t.yAlign)}},i.dropdownShowAt)),$.isFunction(t)&&t.call(n,r),n},resetDropDownPos:function(){var e=this,t=e.configs,n=$("#"+t.id+"_dropdown"),i=e.getDropDownShowAt(),r=Nex.Create("showAt",$.extend({at:i,visibleEdge:t.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0},t.dropdownShowAt,{el:n,autoShow:!1})),o=r.getShowPos(),a=r.C("yAlign");e.__DP_ShowAlign=a;var s=null;return t.dropdownShadowShow&&(s=e.getDropDownShadow(),s.hide()),n.stop(!0,!0).animate(o,t.dropdownResetPosDuration,function(){t.dropdownShadowShow&&s&&s.show(),e.resetDropDownShadow()}),e},_defaultDropDownHide:function(e){var t=this,n=t.configs;t.__DP_isShow=!1;var i=$("#"+n.id+"_dropdown");return i.stop(!0,!0)._visible(!1)._hide(),n.dropdownHideToRemove&&i.remove(),$.isFunction(e)&&e.call(t),t},_animateDropDownShow:function(e){var t,n=this,i=n.configs,r=$("#"+i.id+"_dropdown"),o=$("#"+i.id+"_dropdown_body");t=$.isFunction(e)?e:null,r._show(),r._visible(!0);var a=n.getDropDownShowAt(),s=Nex.Create("showAt",$.extend({at:a,visibleEdge:i.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0,"onShow.dropdown":function(e,t){n.__DP_ShowAlign=t.yAlign,r.removeClass("nex-form-dropdown-"+t.yAlign),r.addClass("nex-form-dropdown-"+t.yAlign)}},i.dropdownShowAt,{el:r,autoShow:!1})),l=s.getShowPos(),d=s.C("yAlign");n.__DP_ShowAlign=d,r.removeClass("nex-form-dropdown-"+d),r.addClass("nex-form-dropdown-"+d);var c=r.height(),u=r.outerHeight();n.__DP_autoWidth&&r.width(r.width()),r.height(0),o.addClass("nex-form-dropdown-anim-"+d);var h=function(){n.__DP_ShowAlign=d,r.removeClass("nex-form-dropdown-"+d),r.addClass("nex-form-dropdown-"+d),o.removeClass("nex-form-dropdown-anim-"+d),n.__DP_autoWidth&&r._removeStyle("width"),n.__DP_autoHeight&&r._removeStyle("height"),$.isFunction(t)&&t.call(n,r)};if("bottom"===d)r.css(l),r.stop(!0,!0).animate({height:c},i.dropdownDuration,i.dropdownEasing,h);else{var f={left:l.left,top:l.top+u};r.css(f),r.stop(!0,!0).animate({height:c,top:l.top},i.dropdownDuration,i.dropdownEasing,h)}return n},_animateDropDownHide:function(e){return this._defaultDropDownHide.apply(this,arguments)},dropdownShadowShow:function(){var e=this,t=e.configs,n=e.fireEvent("onBeforeDropDownShadowShow",[t]);if(n===!1)return e;var i=$("#"+t.id+"_dropdown_shadow");i.length||(i=$('<div id="'+t.id+'_dropdown_shadow" class="nex-form-dropdown-shadow">'+(Nex.IEVer<=8?'<iframe style="width:99%;height:99%;"></iframe>':"")+"</div>").appendTo(document.body)),i.show();var r=e.getDropDown();return i._width(r.outerWidth()),i._height(r.outerHeight()),i.css(r.offset()).css("zIndex",e.dropdownzIndex-1),e.fireEvent("onDropDownShadowShow",[t]),i.removeClass("nex-form-dropdown-shadow-top nex-form-dropdown-shadow-bottom"),
i.addClass("nex-form-dropdown-shadow-"+e.__DP_ShowAlign),e},resetDropDownShadow:function(){var e=this,t=e.configs,n=$("#"+t.id+"_dropdown_shadow"),i=e.getDropDown();return n._width(i.outerWidth()),n._height(i.outerHeight()),n.css(i.offset()),n.removeClass("nex-form-dropdown-shadow-top nex-form-dropdown-shadow-bottom"),n.addClass("nex-form-dropdown-shadow-"+e.__DP_ShowAlign),e},hideDropDownShadow:function(){var e=this,t=e.configs,n=e.fireEvent("onBeforeDropDownShadowHide",[t]);if(n===!1)return e;var i=$("#"+t.id+"_dropdown_shadow");return t.dropdownHideToRemove?i.remove():i.hide(),e.fireEvent("onDropDownShadowHide",[t]),e},getDropDownShadow:function(){var e=this,t=e.configs;return $("#"+t.id+"_dropdown_shadow")},destroyDropDown:function(){this.isDropDownShow()&&this.hideDropDown();var e=this.getDropDown(),t=this.getDropDownShadow();return e.remove(),t.remove(),this.__DP_isShow=!1,this.__unbindDropDown(),this}})}),define("Nex/form/AbstractForm",["require","Nex/form/Manager","Nex/util/Validate","Nex/container/Container","Nex/mixins/DropDown"],function(e){e("Nex/form/Manager"),e("Nex/util/Validate"),e("Nex/container/Container"),e("Nex/mixins/DropDown");var t=Nex.define("Nex.form.AbstractForm","Nex.container.Container",{alias:"Nex.Form Nex.form.AbstractForm",xtype:"form abstractform",mixins:["Nex.mixins.DropDown"]});return Nex.form.Form=t,t.addStatics({FormManager:Nex.FormManager,dropdownzIndex:999999+Nex.zIndex}),t.setOptions(function(e){return{prefix:"nexform-",renderTo:document.body,disabledItems:!0,autoDestroy:!0,autoResize:!0,_hasBodyView:!1,_checkScrollBar:!1,denyEvents:!0,autoWidthCls:[e.autoWidthCls,"nex-form-auto-width"].join(" "),autoHeightCls:[e.autoHeightCls,"nex-form-auto-height"].join(" "),borderCls:[e.borderCls,"nex-form-border"].join(" "),containerCls:[e.containerCls,"nex-form"].join(" "),autoScroll:!1,autoScrollCls:"",autoFocus:!1,tabIndex:!1,multiSplit:",",__inputType:"text",showLabel:"auto",labelCls:"",labelStyle:{},labelvAlign:"top",labelPosition:"left",labelAlign:"left",labelText:"",labelWidth:80,showPlaceholder:!0,placeholder:"",autocomplete:"off",display:"inline",group:"default",name:"",value:"",_value:"",inputTextChangeEvent:"onChange",triggerBtnsPosition:"inner",triggerBtns:[],triggerBtnSelection:!1,triggerToFocus:!1,cleanBtn:!1,cleanDefault:"",inputAttrs:{},formater:null,getFormater:null,setFormater:null,renderer:{},_renderer:{},rendererDef:"_default_",validator:Nex.formValid||{},rules:[],showVaildMsg:!0,vaildMsgPosition:"right",validMsg:"",validMsgOnFocus:"",validErrorMsg:"",validSuccessMsg:"",messages:{},validErrorCls:"nex-form-valid-error",validSuccessCls:"nex-form-valid-success",textKey:"text",valueKey:"value",items:[],splitChr:["-",",",";","|"],_item:{cls:"",text:"",value:"",readOnly:!1,disabled:!1,selected:!1,title:"",display:"inline-block"},itemDefault:{},showItemsLoading:!1,_ajaxOptions:{dataType:"json",type:"GET"},ajaxOptions:{},width:150,height:"auto",autoValidDelay:50,autoValidEvents:["onChange","onBlur","onPaste"],disabled:!1,readOnly:!1,cls:"",overCls:"",focusCls:"",disabledCls:"",readonlyCls:"",dropdownMinWidth:0,tpl:{inputTpl:'<div <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> value="" class="nex-form-field nex-form-field-<%=type%>"></div>',formTpl:'<table id="<%=id%>-inner" class="nex-field nex-form-inner" cellspacing="0" cellpadding="0" ><tbody><tr id="<%=id%>-inputRow"><td class="nex-form-inner-body" id="<%=id%>-body-td"><div id="<%=id%>-body" class="nex-form-body">__inputTpl__<label id="<%=id%>-placeholder" class="nex-form-placeholder"><%=placeholder%></label><div id="<%=id%>-trigger-body" class="nex-form-trigger-body"></div></div></td></tr></tbody></table>'},events:{}}}),t.override({_triggerID:1,initComponent:function(){var e=this,t=this.configs;e.callParent(arguments),e._checkOptions(t),e._setFormView(),e.initFormField()},initFormField:function(){var e=this;this.configs;e.checkLabelSet()},onCreate:function(){var e=this;e.callParent(arguments),Nex.FormManager&&Nex.FormManager.add(e),e._afterCreate()},_checkOptions:function(e){return this.el.addClass("nex-form-display-"+e.display),Nex.isArray(e.items)&&(e.items=e.items.concat([])),this},sysEvents:function(){var e=this,t=e.configs;e.callParent(arguments),e.bind("onMouseOver._sys",e._setOverCls,e),e.bind("onMouseOut._sys",e._unsetOverCls,e),e.bind("onFocus._sys",e._setFocusCls,e),e.bind("onBlur._sys",e._unsetFocusCls,e),e.bind("onChange._sys",e._triggerPlaceholder,e),e.bind("onBlur._sys",e.refreshFormater,e),e.bind("onBlur._sys",e.refreshRenderer,e),e.bind("onValidError._sys",e.setValidError,e),e.bind("onValidSuccess._sys",e.setValidSuccess,e);for(var n=0;n<t.autoValidEvents.length;n++){e.bind(t.autoValidEvents[n],e._autoValid,e)}return e.bind("onDropDownItemSelectedChange._sys",e._setDropDownValue,e),e},formTpl:function(e){var t=[];return t.join("")},_getFormTpl:function(){var e=this,t=e.configs,n=$.extend({},t),i=[];$.isPlainObject(n.inputAttrs)&&$.each(n.inputAttrs,function(e,t){i.push(e+"="+t)}),i.join(" "),n.attrs=i,n.tabIndex=++Nex.tabIndex,n.placeholder=t.placeholder,n.type=t.__inputType;var r=t.tpl.inputTpl||"",o=t.tpl.formTpl||"";o=o.replace(/__inputTpl__/gi,r);var a=e.tpl(o,n);return a},getBody:function(){var e=this,t=e.configs;return $("#"+t.id+"-body")},_setFormView:function(){var e=this,t=e.configs,n=t.views.container;return n.html(e._getFormTpl()),t.views.body=$("#"+t.id+"_body"),e._setSysTriggerBtns(),e._setTriggerBtns(),e._bindEvent(),e.fireEvent("onSetFormView",[t]),e},_setSysTriggerBtns:function(){var e=this,t=e.configs;if(t.cleanBtn){var n=t.cleanDefault;e.addInnerTriggerBtn({cls:"nex-form-clear-trigger",iconCls:"nex-form-clear-icon",callBack:function(){var i=e.getInputText();e.val(n);var r=e.getInputText();t.inputTextChangeEvent&&e.fireEvent(t.inputTextChangeEvent,[r,i]),e.fireEvent("onTextChange",[r,i]),e.fireEvent("onClean",[r,i]),t.triggerToFocus||e.focus()}})}return e},_setTriggerBtns:function(){var e=this,t=e.configs,n="inner"===t.triggerBtnsPosition?"addInnerTriggerBtn":"addOuterTriggerBtn";$.each(t.triggerBtns,function(t,i){$.isArray(i)&&i.length>1?e[n].call(e,i[0],i[1]):e[n].call(e,i)})},doSetViewSize:function(){var e=this,t=e.configs,n=t.views.container,i=t.views.body,r=e.getInput();if(e.callParent(arguments),!e.isAutoWidth()){r.width(0);var o=$("#"+t.id+"-inputRow"),a=0;$(">td",o).not(".nex-form-inner-body").each(function(){a+=$(this)._outerWidth()}),r._outerWidth(n.width()-a)}e.isAutoHeight()||i._outerHeight(n.height())},_setLabel:function(){var e=this,t=[],n=e.configs,i=$("#"+n.id+"-label-td");i.size()&&i.remove(),t.push('<td valign="'+n.labelvAlign+'" align="'+n.labelAlign+'" id="'+n.id+'-label-td" class="nex-form-inner-label nex-form-inner-label-'+n.labelvAlign+'">'),t.push('<label id="'+n.id+'-label" class="nex-form-label '+n.labelCls+'"></label>'),t.push("</td>");var r=$(t.join(""));return $("#"+n.id+"-body-td").before(r),$("#"+n.id+"-label").css(n.labelStyle),e},setLabel:function(){return this._setLabel()},_setLabelPosition:function(e){var t,n=this,i=n.configs,e=e===t?"left":e,r={left:!0,top:!0,bottom:!0,right:!0};e=r[e]?e:"left",i.labelPosition=e;var o=$("#"+i.id+"-label-td"),a=$("#"+i.id+"-inputRow");$("#"+i.id+"-label-tb").remove();var s=null;return-1!==$.inArray(e,["top","bottom"])&&(s=$('<tr id="'+i.id+'-label-tb"></tr>')),"left"===e?$("#"+i.id+"-body-td").before(o):"right"===e?$(">td:last",a).after(o):"top"===e?s&&(a.before(s),s.append(o)):s&&(a.after(s),s.append(o)),$("#"+i.id+"-label").removeClass("nex-form-label-left nex-form-label-right nex-form-label-top nex-form-label-bottom").addClass("nex-form-label-"+e),n},setLabelPosition:function(e){return this._setLabelPosition(e),this._setLabelWidth(this.configs.labelWidth),this.resetViewSize(),this},_setLabelText:function(e){var t=this.configs,n=$("#"+t.id+"-label");return n.empty(),this.renderComponent(e||t.labelText,n),this},setLabelText:function(e){return this._setLabelText(e),this},_setLabelWidth:function(e){var t=this.configs,n=$("#"+t.id+"-label");return"left"==t.labelPosition||"right"==t.labelPosition?n._outerWidth(e||t.labelWidth):n._removeStyle("width"),this},setLabelWidth:function(e){return this._setLabelWidth(e),this.resetViewSize(),this},checkLabelSet:function(){var e=this,t=this.configs,n=t.showLabel;return"auto"===n&&(n=""===t.labelText?!1:!0),n?(e._setLabel()._setLabelPosition(t.labelPosition)._setLabelWidth(t.labelWidth)._setLabelText(t.labelText),e):e},_afterCreate:function(){var e=this,t=e.configs;t.disabled&&e._disabled(),t.readOnly&&e._readOnly(!0),t.autoFocus&&e.focus(),t._value=t.value,""!==t.value?(e.lockEvent("onChange"),e.setValue(t.value),e.unLockEvent("onChange"),e.fireEvent("onInitChange",[t.value,""]),t.showPlaceholder&&e.hidePlaceholder()):t.showPlaceholder&&e.showPlaceholder()},_appendContent:function(){},__placeholderShow:!1,_triggerPlaceholder:function(e){this.configs.showPlaceholder&&(""===e?this.showPlaceholder():this.hidePlaceholder())},getPlaceholder:function(){var e=this.configs,t=$("#"+e.id+"-placeholder");return t},getPlaceholderText:function(){return this.configs.placeholder},setPlaceholder:function(e){var e=this._undef(e,"");return""!==e&&(this.configs.placeholder=e,this.getPlaceholder().html(e)),this},showPlaceholder:function(){return this.__placeholderShow||this.getPlaceholder().addClass("nex-form-placeholder-show"),this.__placeholderShow=!0,this.el.addClass("nex-form-empty"),this},hidePlaceholder:function(){return this.__placeholderShow&&this.getPlaceholder().removeClass("nex-form-placeholder-show"),this.__placeholderShow=!1,this.el.removeClass("nex-form-empty"),this},__input:null,getInput:function(){var e=this,t=e.configs;return e.__input=e.__input?e.__input:$("#"+t.id+"-input"),e.__input},__inputreal:null,getInputReal:function(){var e=this,t=e.configs;return e.__inputreal=e.__inputreal?e.__inputreal:$("#"+t.id+"-input"),e.__inputreal},_isInput:function(e){return $(e).is(":input")},getInputValue:function(){var e=this,t=(e.configs,e.getInputReal()),n=e._isInput(t)?t.val():t.html();return n},setInputValue:function(e){var t=this,n=(t.configs,t.getInputReal());return t._isInput(n)?n.val(e):n.html(e),t.currentValue=e,t},getInputWidth:function(){return this.getInput()._outerWidth()},getInputText:function(){var e=this,t=(e.configs,e.getInput()),n=e._isInput(t)?t.val():t.html();return $.trim(n)},setInputText:function(e){var t=this,n=(t.configs,t.getInput());return t._isInput(n)?n.val(e):n.html(e),t},currentValue:"",getValue:function(){var e,t=this,n=t.configs,i=$.trim(t.rendererDecode(t.getInputValue()));if($.isFunction(n.getFormater)){var r=n.getFormater.call(t,i);i=r===e?i:r}var o={value:i};return t.fireEvent("onGetValue",[o]),t.currentValue=o.value,o.value},_oldValue:null,setValue:function(){var e,t=this,n=this.configs,i=[].slice.apply(arguments),r=null===t._oldValue?t.getValue():t._oldValue;if(t._oldValue=r,t.fireEvent("onSetValue",[i]),$.isFunction(n.setFormater)){var o=n.setFormater.apply(t,i);o!==e&&($.isArray(o)||(i=[o]))}if($.isFunction(n.formater)){var o=n.formater.apply(t,i);o!==e&&($.isArray(o)||(i=[o]))}if(!i.length)return t;var a=i[0]+"";i[0]=t.rendererEncode(i[0]),t.setInputValue.apply(t,i);var s=a;return r!==s&&null!==t._oldValue&&(t._oldValue=null,n.value=s,t.fireEvent("onChange",[s,r])),t},val:function(){var e=this;e.configs;return arguments.length?e.setValue.apply(e,arguments):e.getValue()},__isFocus:!1,_focusValue:null,_bindInputEvent:function(){var e=this,t=e.configs,n=$("#"+t.id+"-input"),i=t.inputTextChangeEvent,r={click:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onClick",[this,n]);return i===!1?!1:void 0}},focus:function(i){if(!t.disabled&&!t.readOnly&&(e._focusValue=e.getInputText(),n.addClass("nex-form-field-focus"),$("#"+t.id).addClass("nex-form-focus"),!e.__isFocus)){var r=e.fireEvent("onFocus",[this,i]);if(e.__isFocus=!0,r===!1)return!1}},blur:function(r){if(e.__isFocus=!1,!t.disabled&&!t.readOnly){var o=e._focusValue,a=e.getInputText();n.removeClass("nex-form-field-focus"),$("#"+t.id).removeClass("nex-form-focus"),o!==a&&(t.value=a,i&&e.fireEvent(i,[a,o]),e.fireEvent("onTextChange",[a,o]));var s=e.fireEvent("onBlur",[this,r]);return s===!1?!1:void 0}},keydown:function(n){if(!t.disabled&&!t.readOnly){e._oldValue=null===e._oldValue?e.getInputText():e._oldValue;var i=e.fireEvent("onKeyDown",[this,n]);return i===!1?!1:void 0}},keyup:function(n){if(!t.disabled&&!t.readOnly){var r=e._oldValue,o=e.getInputText();r!==o&&null!==e._oldValue&&(t.value=o,e._focusValue=o,i&&e.fireEvent(i,[o,r]),e.fireEvent("onTextChange",[o,r]),e._oldValue=null);var a=e.fireEvent("onKeyUp",[this,n]);return a===!1?!1:void 0}},keypress:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onKeyPress",[this,n]);return i===!1?!1:void 0}},mouseenter:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onMouseOver",[this,n]);return i===!1?!1:void 0}},mouseleave:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onMouseOut",[this,n]);return i===!1?!1:void 0}},paste:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onPaste",[this,n]);return i===!1?!1:void 0}},mousedown:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onMouseDown",[this,n]);return i===!1?!1:void 0}},mouseup:function(n){if(!t.disabled&&!t.readOnly){var i=e.fireEvent("onMouseUp",[this,n]);return i===!1?!1:void 0}}};n.bind(r)},_bindEvent:function(){var e=this,t=e.configs,n=e.el,i=$("#"+t.id+"-inputRow"),r=$("#"+t.id+"-input"),o=$("#"+t.id+"-body"),a=$("#"+t.id+"-trigger-body"),s=0,l={click:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnClick",[o,this,n]);return a===!1?!1:void 0}},dblclick:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnDblClick",[o,this,n]);return a===!1?!1:void 0}},mouseenter:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnOver",[o,this,n]);return a===!1?!1:void i.addClass("nex-form-trigger-btn-over")}},mouseleave:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnOut",[o,this,n]);return a===!1?!1:void i.removeClass("nex-form-trigger-btn-over")}},mousedown:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnDown",[o,this,n]);if(a===!1)return!1;i.addClass("nex-form-trigger-btn-down"),s=setTimeout(function(){s=0,$(document).one("mouseup",function(){i.removeClass("nex-form-trigger-btn-down")})},0)}},mouseup:function(n){if(!t.disabled&&!t.readOnly){var i=$(this),r=parseInt(i.attr("tid"))-1,o=e.__TriBtns[r],a=e.fireEvent("onTriggerBtnUp",[o,this,n]);if(a===!1)return!1;i.removeClass("nex-form-trigger-btn-down"),s&&(clearTimeout(s),s=0)}}},d={click:function(e){e.stopPropagation(),e.preventDefault(),t.disabled||t.readOnly||r.trigger("click",[e])},mouseenter:function(e){t.disabled||t.readOnly||r.trigger("mouseenter",[e])},mouseleave:function(e){t.disabled||t.readOnly||r.trigger("mouseleave",[e])},mousedown:function(e){t.disabled||t.readOnly||(r.trigger("mousedown",[e]),$(this).hasClass("nex-form-placeholder")||$(this).hasClass("nex-form-inner-label")?r.trigger("focus",[e]):t.triggerToFocus&&r.trigger("focus",[e]),e.stopPropagation(),e.preventDefault())},mouseup:function(e){e.stopPropagation(),e.preventDefault(),t.disabled||t.readOnly||r.trigger("mouseup",[e])}};e._bindInputEvent(),o.undelegate(">.nex-form-placeholder").delegate(">.nex-form-placeholder",d),a.undelegate(">.nex-form-trigger-btn").delegate(">.nex-form-trigger-btn",l),a.bind(d),n.undelegate('[id="'+t.id+'-label-td"]').delegate('[id="'+t.id+'-label-td"]',d),i.undelegate(">.nex-form-outer-trigger-td >.nex-form-outer-trigger-body >.nex-form-trigger-btn").delegate(">.nex-form-outer-trigger-td >.nex-form-outer-trigger-body >.nex-form-trigger-btn",l)},__TriBtns:[],addInnerTriggerBtn:function(e,t,n){var i=this,r=i.configs,o=n?$(n):$("#"+r.id+"-trigger-body"),a=i.__TriBtns.push(e),s={text:"",icon:"",cls:"",iconCls:"",callBack:null,callback:null,handler:null};if("string"===$.type(e)||"number"===$.type(e)){var l=e+"";e=$.extend({},s,{text:l})}else for(var d in s)d in e||(e[d]=s[d]);var c=['<div id="'+r.id+"-inner-trigger-"+a+'" tid="'+a+'" class="nex-form-trigger-btn '+(e.icon||e.iconCls?"nex-form-trigger-has-icon":"")+" "+e.cls+'">'];if(e.icon||e.iconCls){var u=e.icon?'style="background-image:url('+e.icon+')"':"";c.push('<span class="nex-form-trigger-icon '+e.iconCls+'" '+u+"></span>")}c.push("</div>");var h=$(c.join(""));return h.prependTo(o).bind("click",function(n){return r.disabled||r.readOnly?void 0:$.isFunction(t)?t.call(i,e,n):$.isFunction(e.callBack)?e.callBack.call(i,e,n):$.isFunction(e.callback)?e.callback.call(i,e,n):$.isFunction(e.handler)?e.handler.call(i,e,n):void 0}),r.triggerBtnSelection||h.disableSelection(),Nex.isXtype(e)||Nex.isClass(e)?i.renderComponent(e.text,h):Nex.isInstance(e)?h.append(e.getDom()):i.renderComponent(e.text,h),a},removeInnerTriggerBtn:function(e){var t=this,n=t.configs;return"undefined"==typeof e?t:(e=parseInt(e)-1,t.__TriBtns[e]=null,$("#"+n.id+"-inner-trigger-"+e).remove(),Nex.gc(),t)},addOuterTriggerBtn:function(e,t){var n=this,i=n.configs,r=i.id+"-outer-trigger-body",o=$("#"+r+"-td");if(o.length)var a=o;else{var a=[];a.push('<td valign="'+i.labelvAlign+'" id="'+r+'-td" align="'+i.labelAlign+'" class="nex-form-outer-trigger-td">'),a.push('<div id="'+r+'" class="nex-form-outer-trigger-body"></div>'),a.push("</td>");var a=$(a.join("")),s=$("#"+i.id+"-inputRow td:last");s.after(a)}var l=n.addInnerTriggerBtn(e,t,$("#"+i.id+"-outer-trigger-body"));return a.attr(i.id+"-outer-trigger-td-"+l),n.resetViewSize(),l},removeOuterTriggerBtn:function(e){var t=this,n=t.configs;return t.removeInnerTriggerBtn(e),$("#"+n.id+"-outer-trigger-td-"+e).remove(),t.resetViewSize(),t},_disabled:function(){var e=this,t=e.configs,n=e.getInput(),i=e.getDom();return t.disabled=!0,n.attr("disabled",!0),i.addClass("nex-form-disabled"),t.disabledCls&&i.addClass(t.disabledCls),e},disabled:function(){var e=this,t=e.configs;return e._disabled(),e.fireEvent("onDisabled",[t]),e},_enable:function(){var e=this,t=e.configs,n=e.getInput(),i=e.getDom();return t.disabled=!1,n.attr("disabled",!1),i.removeClass("nex-form-disabled"),t.disabledCls&&i.removeClass(t.disabledCls),e},enable:function(){var e=this,t=e.configs;return e._enable(),e.fireEvent("onEnable",[t]),e},_readOnly:function(e){var t,n=this,i=n.getInput(),r=n.getDom(),o=n.configs,e=e===t?!0:e;return o.readOnly=e,i.attr("readonly",e),e?(n.fireEvent("onReadOnly",[o]),r.addClass("nex-form-readonly"),o.readonlyCls&&r.addClass(o.readonlyCls)):(n.fireEvent("onUnReadOnly",[o]),r.removeClass("nex-form-readonly"),o.readonlyCls&&r.removeClass(o.readonlyCls)),n},readOnly:function(e){var t,n=this,i=n.configs,e=e===t?!0:e;return n._readOnly(e),e?n.fireEvent("onReadOnly",[i]):n.fireEvent("onUnReadOnly",[i]),n},setValidError:function(){var e=this,t=e.configs,n=$("#"+t.id);e.resetVaildCss(),n.addClass(t.validErrorCls)},setValidSuccess:function(){var e=this,t=e.configs,n=$("#"+t.id);e.resetVaildCss(),n.addClass(t.validSuccessCls)},resetVaildCss:function(){var e=this,t=e.configs,n=$("#"+t.id);n.removeClass(t.validErrorCls),n.removeClass(t.validSuccessCls)},_setFocusCls:function(e,t){var n=this,i=n.configs;if(!i.disabled&&!i.readOnly){var r=n.el;r.addClass("nex-form-focus"),i.focusCls&&r.addClass(i.focusCls)}},_unsetFocusCls:function(e,t){var n=this,i=n.configs;if(!i.disabled&&!i.readOnly){var r=n.el;r.removeClass("nex-form-focus"),i.focusCls&&r.removeClass(i.focusCls)}},_setOverCls:function(e,t){var n=this,i=n.configs;if(!i.disabled&&!i.readOnly){var r=n.el;r.addClass("nex-form-over"),$(">.nex-form-inner",r).addClass("nex-form-inner-over"),i.overCls&&r.addClass(i.overCls)}},_unsetOverCls:function(e,t){var n=this,i=n.configs;if(!i.disabled&&!i.readOnly){var r=n.el;r.removeClass("nex-form-over"),$(">.nex-form-inner",r).removeClass("nex-form-inner-over"),i.overCls&&r.removeClass(i.overCls)}},_autoValid:function(){var e=this,t=e.configs;t._ct&&clearTimeout(t._ct),t._ct=setTimeout(function(){e.checkVal(),t._ct=0},t.autoValidDelay)},hidden:function(){return this.hide()},focus:function(){var e=this;try{e.getInput().focus()}catch(t){}},select:function(){var e=this;try{e.getInput().select()}catch(t){}},selectText:function(e,t){var n,i,r=this,o=(r.configs,r.val()),a=r.getInput().get(0);o.length>0&&(e=e===n?0:e,t=t===n?o.length:t,a.setSelectionRange?a.setSelectionRange(e,t):a.createTextRange&&(i=a.createTextRange(),i.moveStart("character",e),i.moveEnd("character",t-o.length),i.select())),r.focus()},blur:function(){var e=this;try{e.getInput().blur()}catch(t){}},checkVal:function(){for(var e,t=this,n=t.configs,i=!0,r=$.isArray(n.rules)?n.rules:[n.rules],o=Nex.getUtil("Validate"),a=t.val(),s=[],l=0;l<r.length;l++)if(e=r[l],$.isFunction(e))s.push({method:e,rule:null,params:null});else if($.isPlainObject(e))for(var d in e)$.isFunction(e[d])?s.push({method:e[d],rule:d,params:null}):d in o&&$.isFunction(o[d])&&s.push({method:o[d],rule:d,params:e[d]});else"string"==typeof e&&e in o&&$.isFunction(o[e])&&s.push({method:o[e],rule:e,params:null});for(var c=null,u=0,h=s.length;h>u;u++){var f=s[u],g=[a];if(null!==f.params&&g.push(f.params),i=f.method.apply(o,g),i===!1){c=null===f.rule?null:f.rule;break}}if(i===!1){var p=n.messages[c]||n.validErrorMsg;t.fireEvent("onValidError",[p,c])}else t.fireEvent("onValidSuccess",[n.validSuccessMsg]);return i},isValid:function(){return this.checkVal()},valid:function(){return this.checkVal()},reset:function(){var e=this,t=e.configs;t.value=t._value,e.setValue(t.value),e.blur(),clearTimeout(t._ct),e.resetVaildCss()},refreshFormater:function(){var e,t=this,n=t.C();if($.isFunction(n.formater)){var i=t.val(),r=n.formater.call(t,i);i=r===e?i:r,t.val(i)}},refreshRenderer:function(e,t){var n=this,i=n.C();if(!$.isPlainObject(i.renderer)||!$.isEmptyObject(i.renderer)){var r=n.val();n.val(r)}},rendererEncode:function(e){var t,n=this,i=this.configs,r=i.renderer,o="";return $.isPlainObject(r)&&$.isEmptyObject(r)?e:($.isFunction(r)?(o=n.tpl(r,e),o===t&&(o=e)):o=$._isPlainObject(r)?e in r?n.tpl(r[e],e):i.rendererDef in r?n.tpl(r[i.rendererDef],e):e:e,i._renderer[o]=e,o)},rendererDecode:function(e){var t=this,n=t.C();if($.isPlainObject(n.renderer)&&$.isEmptyObject(n.renderer))return e;var i="";return i=e in n._renderer?n._renderer[e]:e},validTipEl:null,_showValidTip:function(e){var t=this,n=this.configs,e=(this.getBody(),this._undef(e,n.position));switch(t.validTipEl||(t.validTipEl=$('<div id="'+n.id+'_tooltip" class=""nex-form-tooltip></div>')),e){case"right":break;case"left":break;case"top":break;case"bottom":}},getDropDownItems:function(){var e=this.configs;return e.items||[]},getDropDownItemDefault:function(){var e=this.configs;return $.extend({},e.itemDefault,e.dropdownItemDefault)},setItems:function(e){return this.setDropDownItems.apply(this,arguments)},setDropDownItems:function(e){var t=this,n=this.configs;e&&(n.items=$.isArray(e)?[].concat(e):e),1==n.dropdownMode&&$.isArray(n.items)&&$.each(n.items,function(e,i){n.items[e]=t._parseItemData(i)});var i=this.getDropDown();return i.length&&e&&this.resetDropDownList(n.items),n.items},getItemData:function(e,t){return this.getDropDownItemData(e,t)},getItemIndex:function(e){return this.getDropDownItemData(e,!1)},getItemDataById:function(e){return this.getDropDownItemDataById(e)},getDropDownShowAt:function(){return this.getInput()},getDropDownSelectedValue:function(){return this.val()},_setDropDownValue:function(e,t,n){var i=this;i.configs;n.selected=!0;var r=$.extend({},n);return i.val(e,t,r),i}}),t}),define("Nex/form/Text",["require","Nex/form/AbstractForm"],function(e){e("Nex/form/AbstractForm");var t=Nex.define("Nex.form.Text","Nex.form.AbstractForm",{alias:"Nex.TextField",xtype:"textfield"});return t.setOptions(function(e){var t=e.tpl;return t.inputTpl='<input <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> value="" class="nex-form-field nex-form-field-<%=type%>" />',{__inputType:"text",containerCls:[e.containerCls,"nex-form-text"].join(" "),cleanBtn:!0,tpl:t}}),t}),define("Nex/form/Trigger",["require","Nex/form/Text"],function(e){e("Nex/form/Text");var t=Nex.define("Nex.form.Trigger","Nex.form.Text",{alias:"Nex.TriggerField",xtype:"triggerfield",configs:function(e){return{__inputType:"text",containerCls:[e.containerCls,"nex-form-trigger"].join(" "),_inputCls:[],cleanBtn:!1,triggerToFocus:!1,triggerCls:"",triggerIconCls:""}},sysEvents:function(){var e=this;e.configs;return e.bind("onSetFormView._sys",e._setInputCls,e),e.callParent(arguments),e},_setSysTriggerBtns:function(){var e=this;e.configs;return e._setTriggerBtn(),e.callParent(arguments),e},_setTriggerBtn:function(){var e=this,t=e.configs;e.addInnerTriggerBtn({name:"trigger",cls:["nex-form-triggerfield-trigger",t.triggerCls].join(" "),iconCls:["nex-form-triggerfield-icon",t.triggerIconCls].join(" "),callBack:function(n,i){var r=e.fireEvent("onTriggerClick",[t])}})},_setInputCls:function(){var e=this,t=e.configs,n=$.isArray(t._inputCls)?t._inputCls:[t._inputCls],i=["nex-form-field-trigger"].concat(n);$("#"+t.id+"-input").addClass(i.join(" "))}});return t}),define("Nex/form/Select",["require","Nex/form/Trigger"],function(e){e("Nex/form/Trigger");var t=Nex.define("Nex.form.Select","Nex.form.Trigger",{alias:"Nex.SelectField",xtype:"selectfield",configs:function(e){var t=e.tpl;return t.inputTpl='<div <%=attrs%> id="<%=id%>-input" type="<%=type%>" tabindex=<%=tabIndex%> autocomplete="<%=autocomplete%>" value="" class="nex-form-field nex-form-field-<%=type%>"></div><input id="<%=id%>-input-real" type="hidden" value="" name="<%=name%>" />',{__inputType:"select",containerCls:[e.containerCls,"nex-form-select"].join(" "),cleanBtn:!1,triggerToFocus:!0,tpl:t,dropdownSingleSelect:!0}},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onClick._sys",e._showDropDownClick,e),e.bind("onCreateDropDwon._sys",e._setDropDownCls,e),e},_setTriggerBtn:function(){var e=this,t=e.configs,n=e.getInput();e.addInnerTriggerBtn({name:"trigger",cls:["nex-form-triggerfield-trigger","nex-form-select-trigger",t.triggerCls].join(" "),iconCls:["nex-form-triggerfield-icon","nex-form-select-icon",t.triggerIconCls].join(" "),callBack:function(i,r){var o=e.fireEvent("onTriggerClick",[t]);o!==!1&&(t.triggerToFocus||n.trigger("focus",[r]))}})},_showDropDownClick:function(){var e=this;e.configs;e.toggleDropDown()},_setDropDownCls:function(e){var t=this,n=(t.configs,t.el);n.hasClass("nex-form-focus")?e.addClass("nex-form-select-dropdown-focus"):e.removeClass("nex-form-select-dropdown-focus")},_getItemData2:function(e){var t=this,n=t.configs,i=n.items,r=null;return $.each(i.concat(t.__CItems),function(t,i){if($.isPlainObject(i)){var o=i[n.valueKey];return String(o)===String(e)?(r=i,!1):void 0}}),r},__inputreal:null,getInputReal:function(){var e=this,t=e.configs;return e.__inputreal=e.__inputreal?e.__inputreal:$("#"+t.id+"-input-real"),e.__inputreal},setInputValue:function(e,t){var n=this,i=n.configs,t=n._undef(t,null),r=i.multiSplit;if(n.callParent(arguments),null===t){var o=[];e=(e+"").split(r),$.each(e,function(t,r){var a=n._getItemData2(r);o.push(a?a[i.textKey]:e)}),t=o.join(r)}return n.setInputText(t),n},setDropDownItems:function(e,t){var n=this,i=this.configs;if(n.callParent(arguments),2==i.dropdownMode)return i.items;var r=i.multiSplit,o=this.getInputValue();o=o.split(r);var a=[];$.isArray(i.items)&&$.each(o,function(e,t){var n=t;$.each(i.items,function(e,r){var o=r[i.valueKey];return String(o)===String(t)?(n=r[i.textKey],!1):void 0}),a.push(n)});var t=this._undef(t,!0);return t&&this.setInputText(a.join(r)),i.items}});return t}),define("Nex/pager/Pager",["require","Nex/container/Container","Nex/form/Select"],function(e){e("Nex/container/Container"),e("Nex/form/Select");var t=Nex.define("Nex.pager.Pager",{extend:"Nex.container.Container",alias:"Nex.Pager",xtype:"pager",configs:function(e,t){return{prefix:"nexpager-",autoDestroy:!0,autoResize:!0,border:!0,borderCls:[e.borderCls,"nex-pager-border"].join(" "),containerCls:[e.containerCls,"clearfix nex-pager"].join(" "),autoScroll:!1,tabIndex:-1,renderTo:document.body,width:"auto",height:"auto",itemLimit:2,enableChangeSize:!1,changeSizeMsg:"{0}",pageSize:10,pageNumber:1,total:0,sizeList:[10,20,50,100],refreshBtn:!1,refreshText:"",displayInfo:!0,displayMsg:"{0}-{1}, {2}",emptyMsg:"",pageCountText:"",prevText:"",nextText:"",firstText:"",lastText:"",showTips:!0,tipsTag:"title",tipsRenderer:null,pageRenderer:null,tpl:{layout:'<div id="<%=id%>_view" class="nex-pager-view"></div><div id="<%=id%>_info" class="clearfix nex-pager-info"><table border="0" cellpadding="0" cellspacing="0"><tr><td id="<%=id%>_size" class="nex-pager-size"></td><td id="<%=id%>_msg" class="nex-pager-msg"></td></tr></table></div>'}}}});return t.override({initComponent:function(){this.callParent(arguments),this.initPagination()},initPagination:function(){var e=this,t=this.configs,n=e.tpl("layout",{id:t.id});e.el.html(n),t.views.msg=$("#"+t.id+"_msg"),t.views.pageSize=$("#"+t.id+"_size"),t.views.view=$("#"+t.id+"_view"),t.enableChangeSize&&e._setPageSize(),e.setDisplayMsg(),e.setPager(),e.setPagerEvent()},_setPageSize:function(){var e=this,t=this.configs,n=t.changeSizeMsg,i=t.views.pageSize,r=n.split("{0}");r[0]&&i.append('<span class="nex-pager-text">'+r[0]+"</span>"),Nex.Create("selectfield",{id:t.id+"_pagesize",cls:"nex-pager-sizelist",display:"inline",renderTo:i,items:t.sizeList,width:"auto",onChange:function(){t.pageSize=parseInt(this.val())||10,e.fireEvent("onPageSizeChange",[t.pageSize])!==!1&&e.toPage(1,!0)},value:t.pageSize}),r[1]&&i.append('<span class="nex-pager-text">'+r[1]+"</span>")},setPagerSize:function(e){var t=this.configs,e=parseInt(e),n=Nex.get(t.id+"_pagesize");if(n){var i=t.sizeList;i.push(e),i.sort(function(e,t){return parseInt(e)>parseInt(t)}),i=Nex.distArr(i),n.setItems(i),n.val(e)}return this},setDisplayMsg:function(e){var t=this,n=this.configs;Nex.isDefined(e)||(e=n.total<=0?n.emptyMsg:n.displayMsg);var i=function(e){if(0===arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e},r=n.views.msg;return r.html(i(e,t.getPagerStart()+1,t.getPagerEnd(),n.total)),t},refreshMsg:function(){return this.setDisplayMsg()},getPagerStart:function(){var e=this.configs;return(e.pageNumber-1)*e.pageSize},getPagerEnd:function(){var e=this.configs;return this.getPagerStart()+e.pageSize},setPager:function(){var e=this,t=this.configs,n=e.getPagerHtml(),i=t.views.view;i.html(n)},refreshPager:function(){return this.setPager()},validPageData:function(){var e=this.configs,t=e.pageNumber,n=e.total;isNaN(parseInt(t))&&(t=1),isNaN(parseInt(n))&&(n=0),1>t&&(t=1),1>n&&(n=1),t=parseInt(t),n=parseInt(n),e.pageNumber=t,e.total=n},getPageCount:function(){var e=this.configs;return Math.max(Math.ceil(e.total/e.pageSize),1)},getPagerHtml:function(){var e=this,t=this.configs;e.validPageData();var n=t.pageNumber,i=(t.pageSize,t.total,e.getPageCount());n=Math.min(n,i);var r=n-1,o=n+1;strHtml='<ul class="nex-pager-items">';var a=function(n){return t.showTips?t.tipsTag+'="'+(Nex.isFunction(t.tipsRenderer)?t.tipsRenderer.call(e,n):"")+'"':""},s=function(n){return Nex.isFunction(t.pageRenderer)?t.pageRenderer.call(e,n):n};1>r?strHtml+='<li><a class="nex-pager-item nex-pager-prev nex-pager-disabled">'+t.prevText+"</a></li>":strHtml+='<li><a page="'+r+'" class="nex-pager-item nex-pager-prev" href="javascript:void(0);" '+a("prev")+">"+t.prevText+"</a></li>",1!=n&&(strHtml+='<li><a page="1" class="nex-pager-item nex-pager-first" href="javascript:void(0);" '+a(1)+">"+s(1)+"</a></li>"),n>=5&&(strHtml+="<li>...</li>");
var l=t.itemLimit;if(i>n+l)var d=n+l;else var d=i;for(var c=n-l;d>=c;c++)c>0&&(c==n?strHtml+='<li><a href="javascript:void(0);" class="nex-pager-item nex-pager-item-active nex-pager-item-disabled" '+a(c)+">"+s(c)+"</a></li>":1!=c&&c!=i&&(strHtml+="<li><a  page="+c+' href="javascript:void(0);" class="nex-pager-item" '+a(c)+'">'+s(c)+"</a></li>"));return i>n+3&&(strHtml+="<li>...</li>"),n!=i&&(strHtml+='<li><a class="nex-pager-item nex-pager-last" page='+i+' href="javascript:void(0);" '+a(i)+">"+s(i)+"</a></li>"),strHtml+='<li><label class="nex-pager-forward"><input type="text" class="nex-pager-topage" size="2" value="'+n+'" ><span> / '+i+" "+t.pageCountText+"</span></label></li>",o>i?strHtml+='<li><a class="nex-pager-item nex-pager-next nex-pager-item-disabled">'+t.nextText+"</a></li>":strHtml+='<li><a class="nex-pager-item nex-pager-next" page="'+o+'" href="javascript:void(0);" '+a("next")+">"+t.nextText+"</a></li>",t.refreshBtn&&(strHtml+='<li><a class="nex-pager-item nex-pager-refresh" href="javascript:void(0);" '+a("refresh")+">"+t.refreshText+"</a></li>"),strHtml+="</ul>",strHtml},refresh:function(e){var t=this.configs;return Nex.apply(t,e||{}),this.refreshPager(),this.refreshMsg(),this},toPage:function(e,t){var n=this,i=this.configs,e=parseInt(e);return e?(e=Math.min(e,n.getPageCount()),t||i.pageNumber!=e?(i.pageNumber=e,n.refresh(),n.fireEvent("onPageChange",[i.pageNumber,i.pageSize,i.total]),n):n):n},setPagerEvent:function(){var e=this,t=this.configs,n=e.el;n.undelegate(".nex-pager-item").delegate(".nex-pager-item","click",function(t){var n=$(this).attr("page");n&&($(this).hasClass("nex-pager-item-disabled")||e.toPage(n))}).delegate(".nex-pager-topage","keydown",function(t){if(13===t.keyCode){var n=$(this).val();e.toPage(n)}}).delegate(".nex-pager-refresh","click",function(n){e.toPage(t.pageNumber,!0)})}}),t}),define("Nex/grid/Table",["require","Nex/Ajax","Nex/panel/Panel","Nex/pager/Pager"],function(e){e("Nex/Ajax"),e("Nex/panel/Panel"),e("Nex/pager/Pager");var t=Nex.define("Nex.grid.Table",{extend:"Nex.panel.Panel",xtype:"table",alias:"Nex.Table",configs:function(e){return{prefix:"grid-",autoResize:!0,disabledItems:!0,border:!1,containerCls:[e.containerCls,"nex-absgrid"].join(" "),borderCls:[e.borderCls,"nex-grid-border"].join(" "),autoScrollCls:[e.autoScrollCls,"nex-grid-auto-scroll"].join(" "),autoWidthCls:[e.autoWidthCls,"nex-grid-auto-width"].join(" "),autoHeightCls:[e.autoHeightCls,"nex-grid-auto-height"].join(" "),autoScroll:!1,headerNowrap:!0,nowrap:!0,rowTpl:"",showGridHeader:!0,showGridFooter:!1,trackMouseOverRow:!0,overRowCls:"",stripeRows:!1,oddRowCls:"",evenRowCls:"",showEmptyText:!0,emptyText:"",tableLayout:"fixed",scroll:!0,enableColumnMove:!0,enableColumnResize:!0,enableSort:!0,resizeColumnReal:!0,showColumnResizeBorder:!1,localSort:!1,sortField:null,sortOrder:"asc",sortFieldField:"sortField",sortOrderField:"sortOrder",showRowLineV:!0,showRowLineH:!0,multiColumnFromStr:!1,multiColumnsAlign:"center",multiColumnSplitStr:"_",multiColumnFromStrData:{},columns:[],_columnsHash:{},_colid:1,moveColumnTm:500,moveColumns:!0,forceFit:!1,forceFitVisible:!0,_defRowCls:"nex-grid-absgrid",rowCls:"",rowCssText:"",_columnMetaData:{field:"",dataIndex:"",width:"",tips:"",tipsTag:"title",_fieldWidth:0,minWidth:20,maxWidth:null,headerAlign:"left",align:"left",valign:"middle",_expand:!1,callBack:$.noop,hcls:"",headerCls:"",headerCssText:"",cellCls:"",cellCssText:"",bcls:"",fcls:"",_icon:"",iconCls:"",icon:"",resizable:!0,sortable:!1,sortFn:null,sortField:null,headerAfterRender:null,cellAfterRender:null,fitColumn:!0,renderer:null,dataType:"string",dateFormat:"YYYY-MM-DD",forceFit:!0,disabled:!1},columnDefaults:{},customColumnData:{},readerDef:"_default_",autoScrollToField:!0,autoScrollToRow:!0,fitColumns:!0,data:[],emptyGridMsg:"",showEmptyGridMsg:!0,pk:"_pk",hideColumns:[],selectRows:[],_selectRows:{},isCreate:!1,isShow:!1,views:{},showPager:!1,pagerClass:"pager",fixPageNumber:!0,total:0,loadMsg:",...",loadErrorMsg:"",showErrorTime:2e3,_lmt:0,_colWidthExt:0,pageNumber:1,pageSize:10,loadOnce:!1,url:"",ajaxClass:"Nex.Ajax",ajaxCache:!0,ajaxPageNumberField:"pageNumber",ajaxPageSizeField:"pageSize",ajaxOptions:{},ajaxMethod:"GET",ajaxDataType:"json",ajaxDataFilter:null,ajaxData:{},ajaxSend:null,asyncDataMaps:{total:"total",pageSize:"pageSize",pageNumber:"pageNumber",data:"data"},_gridViewViews:{},enableSelectRow:!0,singleSelect:!1,enableUnselect:!1,selectedRowCls:"",rowStyler:"",rowCallBack:$.noop,methodCall:{},denyRowEvents:!1,tpl:{view:'<div id="<%=id%>_view" class="nex-grid-view"><div id="<%=id%>_dataview" class="nex-grid-dataview"><table class="nex-grid-table" cellpadding="0" cellspacing="0" border="0"><thead id="<%=id%>_dataview_header" class="nex-grid-header nex-grid-dataview-header"></thead><tbody id="<%=id%>_dataview_body" class="nex-grid-dataview-body"></tbody></table></div></div>'}}}});return t.override({dataSource:[],selection:{},currentPageData:[],initComponent:function(){this.callParent(arguments),this.currentPageData=[],this.selection={},this.dataSource=[],this.initGrid()},sysEvents:function(){var e=this;this.configs;e.callParent(arguments)},initGrid:function(){var e=this;e.initGridCss(),e.initGridLayout(),e.initGridEvents()},initGridCss:function(){var e=this,t=this.configs;t.showRowLineV||e.hideGridVLines(),t.showRowLineH||e.hideGridHLines(),e.fireEvent("onSetGridCss")},initGridLayout:function(){var e=this,t=this.configs,n=e.getBody(),i={id:t.id},r=$(e.tpl("view",i));return n.append(r),t.views.gridView=r,t.views.gridDataView=$("#"+t.id+"_dataview"),t.views.gridHeader=$("#"+t.id+"_dataview_header"),t.views.gridBody=$("#"+t.id+"_dataview_body"),t.showGridHeader||e.hideGridHeader(),e.setGridViewScrollAble(),t.showPager&&e.initPager(),e.fireEvent("onGridViewCreate",[r,t]),e},initGridEvents:function(){var e=this;this.configs;e.setGridHeaderEvents(),e.setGridRowsEvents(),e.setGridCellsEvents()},setGridViewScrollAble:function(){var e=this,t=this.configs,n=e.getScrollView();t.scroll===!1?n.css("overflow","hidden"):n.css("overflow","auto"),"horizontal"===t.scroll&&(n.css("overflow-x","auto"),n.css("overflow-y","hidden")),"vertical"===t.scroll&&(n.css("overflow-x","hidden"),n.css("overflow-y","auto"))},doSetViewSize:function(){var e=this;this.configs,e.getBody();e.callParent(arguments),e.setGridViewSize()},setGridViewSize:function(){var e=this,t=this.configs,n=t._gridViewViews,i=e.getBody(),r=e.getGridView(),o=i._width(),a=i._height();for(var s in n)a-=$(n[s])._outerHeight();e.isAutoWidth()?r._removeStyle("width"):r._outerWidth(o),e.isAutoHeight()?r._removeStyle("height"):r._outerHeight(a),e.setGridDataViewSize()},setGridDataViewSize:function(){var e=this,t=(this.configs,e.getGridView()),n=e.getGridDataView(),i=$(">.nex-grid-table",n);e.isAutoWidth()?(n._removeStyle("width"),i._removeStyle("width")):(n._outerWidth(t._width()),i.css("width","100%")),e.isAutoHeight()?n._removeStyle("height"):n._outerHeight(t._height())},addViewToGridView:function(e,t){var n=this.configs;return n.views[e]=t,n._gridViewViews[e]=t,this},removeViewFromGridView:function(e){var t=this.configs;return delete t.views[e],delete t._gridViewViews[e],this},dataViewRendered:!1,doRenderContent:function(){var e=this,t=this.configs;return e.dataViewRendered?e:(e._setGridLayoutCss(),e.dataViewRendered=!0,e.initGridColumns(),e.initColumnsWidth(),e.setGridHeader(),e.setData(t.data),void e.setGridBody())},setGridHeaderEvents:function(){var e=this,t=this.configs,n=this.getBody(),i=function(t,n){var i=$(this),r=$(this).attr("field"),o=e.getColumnData(r);return n.helper=i,e[t]&&Nex.isFunction(e[t])&&e[t].call(e,r,o,n),e.fireEvent(t,[r,o,n])===!1?!1:void 0};n.undelegate(".htd").delegate(".nex-grid-dataview-header",{"contextmenu.htd":function(t){return t.helper=$(this),e.fireEvent("onGridViewHeaderContextMenu",[t])===!1?!1:void 0}}).delegate(".nex-grid-dataview-header td[id^="+t.id+"]",["click.htd","dblclick.htd","mouseenter.htd","mouseleave.htd","contextmenu.htd","mousedown.htd","mouseup.htd"].join(" "),function(e){var t="";switch(e.type){case"click":t="onColumnClick";break;case"dblclick":t="onColumnDblClick";break;case"contextmenu":t="onColumnContextMenu";break;case"mousedown":t="onColumnMouseDown";break;case"mouseup":t="onColumnMouseUp";break;case"mouseenter":t="onColumnMouseOver";break;case"mouseleave":t="onColumnMouseOut"}if(t)return i.call(this,t,e)===!1?!1:void 0}).delegate(".nex-grid-resizable",{"mousedown.htd":function(t){e._startResize(this,t)},"click.htd":function(e){e.preventDefault(),e.stopPropagation()}})},setGridRowsEvents:function(){var e=this,t=this.configs,n=this.getBody(),i=function(t,n){var i=$(this);n.helper=i;var r=i.attr("rid"),o=i.attr("ridx"),a=e.getRowIndexData(o);return e[t]&&Nex.isFunction(e[t])&&e[t].call(e,r,a,n),e.fireEvent(t,[r,a,n])===!1?!1:void 0};n.undelegate(".btr").delegate(".nex-grid-dataview-body tr[id^="+t.id+"]",["click.btr","dblclick.btr","contextmenu.btr","mousedown.btr","mouseup.btr","mouseenter.btr","mouseleave.btr"].join(" "),function(e){var t="";switch(e.type){case"click":t="onRowClick";break;case"dblclick":t="onRowDblClick";break;case"contextmenu":t="onRowContextMenu";break;case"mousedown":t="onRowMouseDown";break;case"mouseup":t="onRowMouseUp";break;case"mouseenter":t="onRowMouseOver";break;case"mouseleave":t="onRowMouseOut"}if(t)return i.call(this,t,e)===!1?!1:void 0})},setGridCellsEvents:function(){var e=this,t=this.configs,n=this.getBody(),i=function(t,n){var i=$(this),r=i.parent();n.helper=i;var o=$(this).attr("field"),a=r.attr("ridx"),s=r.attr("rid"),l=e.getColumnData(o)||{},d=e.getRowIndexData(a),c=d[l.dataIndex];return e[t]&&Nex.isFunction(e[t])&&e[t].call(e,s,o,c,d,n),e.fireEvent(t,[s,o,c,d,n])===!1?!1:void 0};n.undelegate(".btd").delegate(".nex-grid-dataview-body td[id^="+t.id+"]",["click.btd","dblclick.btd","contextmenu.btd","mousedown.btd","mouseup.btd","mouseenter.btd","mouseleave.btd"].join(" "),function(e){var t="";switch(e.type){case"click":t="onCellClick";break;case"dblclick":t="onCellDblClick";break;case"contextmenu":t="onCellContextMenu";break;case"mousedown":t="onCellMouseDown";break;case"mouseup":t="onCellMouseUp";break;case"mouseenter":t="onCellMouseOver";break;case"mouseleave":t="onCellMouseOut"}if(t)return i.call(this,t,e)===!1?!1:void 0})},ridToIndex:function(e){var t=this,n=this.configs;return t.isAjaxAsync()?parseInt(e):(n.pageNumber-1)*n.pageSize+parseInt(e)},indexToRid:function(e){var t=this,n=this.configs;return t.isAjaxAsync()?parseInt(e):parseInt(e)-(n.pageNumber-1)*n.pageSize},getRowData:function(e,t){var n=this,i=(this.configs,n.getData()),t=Nex.unDefined(t,!0),r=i[n.ridToIndex(e)];return t?Nex.clone(r):r},setRowData:function(e,t,n){var i=this.getRowData(e,!1);return Nex.isPlainObject(t)?Nex.apply(i,t):i[t]=n,this},getRowIndexData:function(e,t){var n=(this.configs,this.getData()),t=Nex.unDefined(t,!0),i=n[e];return t?Nex.clone(i):i},_setGridLayoutCss:function(){var e=this,t=this.configs;return e.addGridCssRules(".nex-grid-table","table-layout: "+(t.forceFit?"auto":t.tableLayout)),e},addGridCssRules:function(e,t){return this.addCssRules.apply(this,arguments)},getGridView:function(){return this.configs.views.gridView},getScrollView:function(){return this.getGridDataView()},getGridDataView:function(){return this.configs.views.gridDataView},getGridHeader:function(){return this.configs.views.gridHeader},getGridDataHeader:function(){return this.configs.views.gridHeader},getGridBody:function(){return this.configs.views.gridBody},getGridDataBody:function(){return this.configs.views.gridBody},_toFirstUpperCase:function(e){return e.replace(/\s[a-z]/g,function(e){return e.toUpperCase()}).replace(/^[a-z]/,function(e){return e.toUpperCase()})},initGridColumns:function(){for(var e,t=this,n=this.configs,i=t._parseColumns(n.columns),r=0,o=i.length;o>r;r++)e=i[r],e.disabled!==!0&&(e.field=Nex.isEmpty(e.field)?r:e.field,e.field in n.customColumnData&&$.extend(e,n.customColumnData[e.field]),e.title=Nex.unDefined(e.title,e.field),e.dataIndex=Nex.isEmpty(e.dataIndex)?e.field:e.dataIndex,e._colid=Nex.isEmpty(e._colid)?"col"+Nex.aid++:e._colid);return n.columns=i,t.onInitColumns(i),t.fireEvent("onInitColumns",[i]),t},onInitColumns:function(){},initColumnsWidth:function(){var e=this,t=(this.configs,e.getLeafColumns());$.each(t,function(t,n){e._setColumnWidth(n.field,n.width)})},refreshColumnsWidth:function(){return this.initColumnsWidth()},_parseColumns:function(e){for(var t,n=this,i=this.configs,e=e||i.columns,r=(function(e,o){var a=e.type;if(a){a=(a+"").toLowerCase();var s="_get"+n._toFirstUpperCase(a)+"Column";Nex.isFunction(n[s])?e=n["_get"+n._toFirstUpperCase(a)+"Column"](e):delete e.type}if(Nex.isEmpty(e.field)&&(e.field=["field",++Nex.aid].join("")),o=Nex.isEmpty(o)?null:$.isPlainObject(o)&&!Nex.isEmpty(o.field)?o.field:null,i.multiColumnFromStr&&""!=i.multiColumnSplitStr){var l=i.multiColumnSplitStr,d=i.multiColumnFromStrData,c=e.field+"";e._ofield=e._ofield===t?c:e._ofield;var u=e._hasSet?[]:c.split(l);if(u.length>1){e._hasSet=!0,e.field=u[0];var h=e._ofield.split(l),f=Nex.inArray(e.field,h);e.field=h.slice(0,f+1).join(l);var g=e.field.split(l),p=g.pop(),v=$.extend({},e);p in d&&$.extend(e,d[p]),e.field in d&&$.extend(e,d[e.field]),u.splice(0,1),e.columns=e.columns===t?[]:e.columns;var m={field:u.join(l),_ofield:e._ofield};m=$.extend({},v,m),delete m.columns,e.columns.push(m)}else if(!e._hasSet&&u.length){e._hasSet=!0;var h=e._ofield.split(l),f=Nex.inArray(e.field,h);e.field=h.slice(0,f+1).join(l);var g=e.field.split(l),p=g.pop();p in d&&$.extend(e,d[p]),e.field in d&&$.extend(e,d[e.field])}}if(e=$.extend({},i._columnMetaData,i.columnDefaults,e),e._colid=Nex.isEmpty(e._colid)?"col"+Nex.aid++:e._colid,e.disabled!==!0&&(i._columnsHash["nsort"+e.field]=e,e.__pid=e.__pid===t?o:e.__pid,n.setCustomColumnCss(e),"columns"in e&&Nex.isArray(e.columns)&&e.columns.length))for(var _=e.columns,x=_.length,b=0;x>b;b++)r(_[b],e)}),o=0,a=e.length;a>o;o++)r(e[o],null);return n._getLeafColumns()},setCustomColumnCss:function(e){var t=this;return e.headerCssText&&t.addGridCssRules(".nex-grid-dataview-body .nex-grid-header-"+e._colid,e.headerCssText),e.cellCssText&&t.addGridCssRules(".nex-grid-dataview-body .nex-grid-cell-"+e._colid,e.cellCssText),t},getColumnEl:function(e){var t=this,n=this.configs,i=t.getColumnColId(e);return i?$("#"+n.id+"_cols_"+i):null},getColumnTextEl:function(e){var t=this,n=this.configs,i=t.getColumnColId(e);return $("#"+n.id+"_cols_"+i+"_text")},getColumnWidth:function(e){var t=this.getColumnEl(e);return t?t._outerWidth():0},getColumnData:function(e){var t=this,n=t.configs,i=n._columnsHash;return i["nsort"+e]||null},getColumnColId:function(e){return(this.getColumnData(e)||{})._colid||null},getColumnProp:function(e,t){var n=this.getColumnData(e);return n?n[t]:null},getLeafColumns:function(){return this._getLeafColumns.apply(this,arguments)},getColumns:function(){return this.configs.columns},getLockColumns:function(){return this.configs.lockColumns},_getColumnChildrens:function(e){var t=this,n=t.configs,i=[];if(Nex.isEmpty(e))return t._getRootColumns();var r=n._columnsHash;for(var o in r){var a=r[o];a.__pid===e&&i.push(a)}return i},_getColumnAllChildrens:function(e){var t=this,n=(t.configs,[]),e=e,i=function(e){for(var r=t._getColumnChildrens(e),o=0,a=r.length;a>o;o++)n.push(r[o]),i(r[o].field)};return i(e),n},_getColumnAllLevel:function(e){var t,n=this,i=n.configs;(e===t||null===e||""===e)&&(e=null);var r=i._columnsHash,o=n._getLeafColumns(e),a=1,s=function(t){var t="nsort"+t;if(t in r){var n=r[t];return n.__pid!==e?(a++,s(n.__pid)):a++}},l=0;return $.each(o,function(e,t){var e=s(t.field);l=Math.max(l,e),a=1}),l},_isRootColumn:function(e){var e=e||{};return Nex.isEmpty(e.__pid)?!0:!1},_isLeafColumn:function(e){var t=this._getColumnChildrens(e);return t.length?!1:!0},_getLeafColumns:function(e){for(var t=this,n=t.configs,i=[],r=(n._columnsHash,t._getColumnAllChildrens(e)),o=0,a=r.length;a>o;o++)t._isLeafColumn(r[o].field)&&i.push(r[o]);return i},_getTopColumn:function(e){var t,n=this,i=n.configs,r=i._columnsHash,e="nsort"+e;if(e in r){var o=r[e];return null!==o.__pid&&o.__pid!==t?n._getTopColumn(o.__pid):o}},_getRootColumns:function(){var e,t=this,n=t.configs,i=[],r=n._columnsHash;for(var o in r){var a=r[o];(null===a.__pid||a.__pid===e)&&i.push(a)}return i},getAllColumns:function(){return this._getColumnAllChildrens()},getColumnWidthTr:function(){var e=this,t=['<tr class="nex-grid-rows-header">'],n=e.getLeafColumns();return $.each(n,function(e,n){t.push('<td class="nex-grid-'+n._colid+" nex-column-width-"+n._colid+'"></td>')}),t.push("</tr>"),t.join("")},getGridHeaderHtml:function(){function e(a,l){var l=l||0,d=a.field,c=n._getLeafColumns(d),u=1;c=c.length,u=o-l;var h=a.title===t?a.field:a.title;a.title=h;var f=$.extend({},a,{field:Nex.htmlEncode(a.field),tips:Nex.htmlEncode(a.tips),headerNowrap:i.headerNowrap,gridId:i.id,$isleaf:!1,resizable:i.enableColumnResize?a.resizable:!1,$isroot:!a.__pid});if(n._isLeafColumn(d)){c=1,f.colSpan=c,f.rowSpan=u,f.$isleaf=!0;var g=n.tpl(r,f);return void s[l].push(g)}u=1,f.colSpan=c,f.rowSpan=u,f.align=i.multiColumnsAlign,f.resizable=!1,f.sortable=!1;var g=n.tpl(r,f);s[l].push(g);var p=n._getColumnChildrens(d);$.each(p,function(t,n){var i=l;e(n,++i)})}for(var t,n=this,i=n.configs,r='<td rowspan="<%=rowSpan%>" colspan="<%=colSpan%>" id="<%=gridId%>_cols_<%=_colid%>" class="nex-grid-col nex-grid-header-col nex-grid-col-<%=gridId%> nex-grid-<%=_colid%> nex-grid-header-<%=_colid%> <%=$isroot ? "nex-grid-header-col-root":""%> <%=$isleaf ? "nex-grid-header-col-leaf":""%> <%=headerCls%>" field="<%=field%>" align="<%=headerAlign%>"><div class="nex-grid-cell-wrap" field="<%=field%>"<% if( tips ) {%> <%=tipsTag%>="<%=tips%>"<%}%>><div id="<%=gridId%>_cols_<%=_colid%>_inner" class="nex-grid-cell nex-grid-header-cell <%=headerNowrap?"nex-grid-cell-nowrap":""%>" ><span id="<%=gridId%>_cols_<%=_colid%>_text" class="nex-grid-header-cell-text"><%=title%></span></div><div class="nex-grid-resizer <%=resizable ? "nex-grid-resizable" : ""%>"></div></div></td>',o=(i._columnsHash,n._getColumnAllLevel()),a=n._getRootColumns(),s=[],l=0;o>l;l++)s[l]=[];$.each(a,function(t,n){e(n,0)});var d=[n.getColumnWidthTr()];return $.each(s,function(e,t){var n=['<tr class="',i._defRowCls,' nex-grid-header-row">'];n.push(t.join("")),n.push("</tr>"),d.push(n.join(""))}),d.join("")},setGridHeader:function(){var e=this,t=e.configs,n=e.getGridHeader();n.html(e.getGridHeaderHtml()),e.refreshGridColumnsCls(),e.afterRenderGridHeader(),e.onGridHeaderCreate(),e.fireEvent("onGridHeaderCreate",[n,t])},onGridHeaderCreate:function(){},refreshGridColumnsCls:function(e,t){function n(e){var t=r.getColumnEl(e.field);t.addClass("nex-grid-col-first");var i=r._getColumnChildrens(e.field);i.length&&n(i[0])}function i(e){var t=r.getColumnEl(e.field);t.addClass("nex-grid-col-last");var n=r._getColumnChildrens(e.field);n.length&&i(n.pop())}var r=this,o=(r.configs,e||r._getRootColumns());if(!o.length)return r;var t=t||r.getGridHeader();$(".nex-grid-header-col",t).removeClass("nex-grid-col-first nex-grid-col-last");var a=o[0],s=o.pop();return n(a),i(s),r},afterRenderGridHeader:function(){var e=this,t=(e.configs,e.getAllColumns());$.each(t,function(t,n){Nex.isFunction(n.headerAfterRender)&&n.headerAfterRender.call(e,e.getColumnTextEl(n.field),n)})},_setColumnWidth:function(e,t){var n=this,i=(n.configs,n.getColumnData(e));if(!i)return n;i.width=t;var r=i.maxWidth,o=i.minWidth,a=t;return Nex.isNumeric(a)&&(a=parseFloat(a),r&&(a=Math.min(a,r)),o&&(a=Math.max(a,o)),a+="px"),n.addGridCssRules(".nex-column-width-"+i._colid,"width:"+a),n},setColumnWidth:function(e,t){var n=this;if(n._setColumnWidth(e,t),Nex.isIE6){var i=n.getScrollView();i.trigger("scroll")}return n},setGridBody:function(){var e=this;e.configs,e.getGridBody();e.showGrid()},showGrid:function(){var e=this,t=e.configs;return e.fireEvent("onBeforeShowGrid",[t])===!1?e:(t.pageNumber=t.fixPageNumber?Math.min(t.pageNumber,e.getPageCount()):t.pageNumber,e.onShowGridStart(),e.showLoading(),e.loadPageData(function(n){e.isAjaxAsync()&&e.parseAsyncData(n),t.loadOnce&&(t.url=""),e.showLoading(),setTimeout(function(){e.renderGridRows(),e.hideLoading()},0)},function(e){alert(e)},function(t){e.hideLoading()}),e)},refresh:function(){return this.showGrid()},refreshCache:function(){var e=this;return e.showLoading(),setTimeout(function(){e.renderGridRows(),e.hideLoading()},0),e},getPageCount:function(){var e=this.configs,t=this.getTotal(),n=e.pageSize||1;return Math.ceil(t/n)},showPage:function(e){var t=this.configs;return t.pageNumber=e,this.showGrid()},page:function(){return this.showPage.apply(self,arguments)},renderGridRows:function(){var e=this,t=this.configs;return e.createGridRows(),e.onShowGridEnd(),e.fireEvent("onShowGrid",[t]),e},renderGridData:function(){return this.renderGridRows.apply(this,arguments)},onShowGridStart:function(){var e=this;e.selection={}},onShowGridEnd:function(){var e=this;e.afterRenderGridRows()},createGridRows:function(){var e=this,t=(e.configs,e.getGridBody()),n=e.getCurrentPageData();return t.html(e.getGridRowsHtml(n)),e},getGridRowsHtml:function(e){var t=this,n=this.configs,i=[t.getColumnWidthTr()];!e.length&&n.showEmptyText&&i.push(t.getEmptyRowHtml());for(var r=0,o=e.length;o>r;r++)i.push(t.getGridRowHtml(r,e[r]||{}));return i.join("")},getEmptyRowHtml:function(e){var t=this,n=this.configs,e=Nex.unDefined(e,n.emptyText),i=t.getColumns();return'<tr class="nex-grid-empty-row"><td colspan="'+Math.max(i.length,1)+'">'+(Nex.isEmpty(e)?"&nbsp;":e)+"</td></tr>"},getGridRowHtml:function(e,t){var n=this,i=n.configs,t=n.parseRowData(t),r=n.getColumns(),o=[],a=n.ridToIndex(e),s=[i._defRowCls,"nex-grid-row"];i.stripeRows&&s.push((e+1)%2?"nex-grid-row-odd "+i.oddRowCls:"nex-grid-row-even "+i.evenRowCls);var l=Nex.isFunction(l)?l.call(n,e,t):l,d=Nex.isFunction(d)?d.call(n,e,t):d,c="";d&&(c=['style="',d,'"']),s.push(l);for(var u=['<tr id="',i.id,"_row_",e,'" class="',s.join(" "),'" ',c,' rid="',e,'" ridx="',a,'">'],h=0,f=r.length;f>h;h++){var g=r[h],p=g.field,v=n._getCellRendererValue(Nex.unDefined(t[g.dataIndex],""),t,g,e);o.push('<td id="',i.id,"_row_",e,"_",g._colid,'" class="nex-grid-col nex-grid-col-',i.id," nex-grid-",g._colid," nex-grid-cell-",g._colid,[0===h?" nex-grid-col-first":"",h===f-1?" nex-grid-col-last":""].join(" ")," ",g.cellCls,'" field="',Nex.htmlEncode(p),'" valign="',g.valign,'" align="',g.align,'">','<div id="',i.id,"_row_",e,"_",g._colid,'_text" class="',["nex-grid-cell",i.nowrap?" nex-grid-cell-nowrap":""].join(" "),'">',Nex.isEmpty(v)?"&nbsp;":v,"</div>","</td>")}return u.push(o.join(""),"</tr>"),u.join("")},afterRenderGridRows:function(){var e=this,t=(e.configs,e.getAllColumns()),n=e.getGridView();$.each(t,function(t,i){var r=i.field;Nex.isFunction(i.cellAfterRender)&&$(".nex-grid-cell-"+i._colid,n).each(function(){var t=$(this),n=t.parent().attr("rid"),o=e.getCellValue(n,r),a=e.getCellTextEl(n,r),s=e.getRowData(n);i.cellAfterRender.call(e,a,o,n,r,s,i)})})},parseRowData:function(e){var t=this,e=(t.configs,e||{});return e._uuid||(e._uuid=Nex.uuid()),e},_getCellRendererValue:function(e,t,n,i){var r=this,o=n.field,a=n.dataType;e=r.getDataTypeValue(e,a,n);var s=r.getCellRenderer(o);return s(e,t,o,i)},getDataTypes:function(){return{string:function(e){return e+""},"int":function(e){return parseInt(e)},"float":function(e){return parseFloat(e)},date:function(e,t){return Nex.getUtil("Date").format(e,t.dateFormat)},"boolean":function(e){return Nex.isBoolean(e)?e?"True":"False":""},currency:function(e,t){}}},getDataTypeValue:function(e,t,n){var i=this,r=i.getDataTypes();if(Nex.isEmpty(e))return e;var o=Nex.isFunction(t)?t:r[(t+"").toLowerCase()];return Nex.isFunction(o)?o.call(i,e,n):e},cellRendererCache:null,getCellRenderer:function(e){var t=this,n=(t.configs,t.getColumnData(e));if(t.cellRendererCache=t.cellRendererCache||{},t.cellRendererCache[e])return t.cellRendererCache[e];var i=n.renderer;if(!n||Nex.isEmpty(i))i=function(e){return e};else if(Nex.isPlainObject(n.renderer))i=function(e,t,i,r){return n.renderer[e]};else if(Nex.isFunction(n.renderer))i=function(){return n.renderer.apply(t,arguments)};else{var r=t.getTplFn(n.renderer+"","value, field, rid");i=function(e,n,i,o){return r.call(t,n,e,i,o)}}return t.cellRendererCache[e]=i,i},getRowEl:function(e){var t=this.configs;return $("#"+t.id+"_row_"+e)},getCellEl:function(e,t){var n=this.configs,i=this.getColumnColId(t);return $("#"+n.id+"_row_"+e+"_"+i)},getCellTextEl:function(e,t){var n=this.configs,i=this.getColumnColId(t);return $("#"+n.id+"_row_"+e+"_"+i+"_text")},getCellValue:function(e,t){var n=this.getRowData(e);this.getColumnProp(t,"dataIndex");return n[t]},getFieldValue:function(){return this.getCellValue.apply(this,arguments)},getCellText:function(e,t){return this.getCellTextEl(e,t).html()},getFieldText:function(){return this.getCellText.apply(this,arguments)},getCellDataType:function(e){return this.getColumnProp(e,"dataType")},setCellValue:function(e,t,n){var i=this,r=(this.configs,i.getCellValue(e,t)),o=n;if(r===n)return i;i.setRowData(e,t,n);var a=this.getRowData(e),s=this.getColumnData(t),n=this._getCellRendererValue(n,a,s,e),l=i.getCellTextEl(e,t);return l.html(n),l.addClass("nex-grid-cell-edit"),i.fireEvent("onCellValueChange",[o,r,e,t,l]),i},setFieldValue:function(){return this.setCellValue.apply(this,arguments)},setCellText:function(e,t,n){return this.getCellTextEl(e,t).html(n),this},setFieldText:function(){return this.setCellText.apply(this,arguments)},updateRow:function(e,t){},parseAsyncData:function(e){var t=this,n=t.configs;if(Nex.isArray(e))t.setData(e);else if(Nex.isObject(e)){var i=n.asyncDataMaps;$.each(i,function(i,r){r in e&&("data"===i?t.setData(e[r]):n[i]=e[r])})}return t},isAjaxAsync:function(){return!!this.configs.url&&!Nex.isEmpty(this.configs.url)},getAjaxAsync:function(){return this.isAjaxAsync()},emptyData:function(){this.setData([])},emptyGridData:function(){return this.setGridData([]),this},getData:function(){return this.dataSource||[]},setData:function(e){var t=this;t.configs;return t.dataSource=e||[],t.onDataChange(t.dataSource),t.fireEvent("onDataChange",[t.dataSource]),this},getGridData:function(){return this.getData()},setGridData:function(e){return this.setData(e),this.refresh(),this},onDataChange:function(){var e=this,t=e.configs;t.enableSort&&(!e.isAjaxAsync()||t.localSort)&&t.sortField&&(e.sortData(t.sortField,t.sortOrder),e.setSortIcon(t.sortField,t.sortOrder))},onColumnClick:function(e,t,n){this._setColumnSortable(e,t,n)},_setColumnSortable:function(e,t,n){var i=this,r=i.configs,o=n.helper;i._isLeafColumn(e)&&r.enableSort&&t.sortable&&(o.hasClass("nex-grid-sort-asc")?i.sortBy(t.field,"desc"):i.sortBy(t.field,"asc"))},sortData:function(e,t){var n=this,i=(n.configs,n.getColumnData(e));if(!i)return n;var r=i.sortFn,o=i.field;t=Nex.isEmpty(t)?"asc":t;var a="asc"==(t+"").toLowerCase()?!0:!1,s=n.getData();return Nex.isFunction(r)?s.sort(function(e,t){return r(e,t,a?"asc":"desc")}):s.sort(function(e,t){var i=n._undef(e[o],""),r=n._undef(t[o],"");return i>r?a?1:-1:i===r?0:a?-1:1}),n.fireEvent("onSortData",[s,e,t]),n},sortBy:function(e,t){var n=this,i=n.configs;return n.fireEvent("onBeforeSort",[e,t])===!1?n:(i.sortField=e,i.sortOrder=t,n.sortData(e,t),n.refresh(),n.setSortIcon(e,t),n)},setSortIcon:function(e,t){var n=this,i=(n.configs,n.getGridHeader()),r=n.getColumnEl(e);if(!r)return n;t=Nex.isEmpty(t)?"asc":t,$(".nex-grid-header-col",i).removeClass("nex-grid-sort-asc nex-grid-sort-desc"),$(".nex-grid-sort-icon",i).remove(),"asc"===(t+"").toLowerCase()?r.addClass("nex-grid-sort-asc"):r.addClass("nex-grid-sort-desc");var o=n.getColumnTextEl(e);return o.after($('<span class="nex-grid-sort-icon">&nbsp;</span>')),n},getCurrentPageData:function(){return this.getPageData()},loadPageData:function(e,t,n){var i=this;i.configs;if(i.fireEvent("onBeforeLoadPageData",[e,t,n])===!1)return i;var r=function(){i.fireEvent("onLoadPageDataSuccess",arguments),$.isFunction(e)&&e.apply(i,arguments)},o=function(){i.fireEvent("onLoadPageDataError",arguments),$.isFunction(t)&&t.apply(i,arguments)},a=function(){i.fireEvent("onLoadPageDataComplete",arguments),$.isFunction(n)&&n.apply(i,arguments)};return i.isAjaxAsync()?i.loadAsyncPage(r,o,a):(r(i.loadLocalPage()),a(i)),i},loadLocalPage:function(e){var t=this,n=t.configs,i=this.getData(),r=Nex.unDefined(e,n.pageNumber),o=n.pageSize;if(!i.length)return[];var a=(r-1)*o;return i.slice(a,r*o)},getPageData:function(e){var t=this,n=t.configs,i=this.getData(),e=Nex.unDefined(e,n.pageNumber),r=n.pageSize;return t.isAjaxAsync()?i.slice(0,r):t.loadLocalPage(e)},loadAsyncPage:function(e,t,n){var i=this,r=i.configs,o=r.ajaxData||{},a=$.extend({},{type:r.ajaxMethod,cache:r.ajaxCache,dataType:r.ajaxDataType,dataFilter:r.ajaxDataFilter});return $.extend(a,r.ajaxOptions),a.data=$.extend(a.data||{},o),a.$caller=i,a.url=r.url,a.success=function(t){$.isFunction(e)&&e(t),i.fireEvent("onLoadAsyncDataSuccess",[t,r])},a.error=function(e){$.isFunction(t)&&t(e),i.fireEvent("onLoadAsyncDataError",[e,r])},a.complete=function(e){$.isFunction(n)&&n(e),i.fireEvent("onLoadAsyncDataEnd",[r]),i.fireEvent("onLoadAsyncDataComplete",[e,r])},i.fireEvent("onBeforeLoadAsyncData",[a,r])!==!1?(i.onLoadAsyncDataStart(a,r),i.fireEvent("onLoadAsyncDataStart",[a,r]),i.ajaxSend(a),i):void 0},ajaxSend:function(e){var t=this,n=t.configs;return $.isFunction(n.ajaxSend)?n.ajaxSend.call(t,e):Nex.Create(n.ajaxClass,e),t},onLoadAsyncDataStart:function(e,t){e.data[t.ajaxPageNumberField]=t.pageNumber,e.data[t.ajaxPageSizeField]=t.pageSize,t.enableSort&&!t.localSort&&t.sortField&&(e.data[t.sortFieldField]=t.sortFieldField,e.data[t.sortFieldOrder]=t.sortFieldOrder)},setPageNumber:function(e){var t=this.configs;return t.pageNumber=Math.max(parseInt(e)||t.pageNumber,1),this},setPageSize:function(e){var t=this.configs;return t.pageSize=Math.max(parseInt(e)||t.pageSize,1),this},setTotal:function(e){var t=this.configs;return t.total=parseInt(e)||t.total,this},getTotal:function(){var e=this.configs,t=this.getData();return this.isAjaxAsync()?t.length:e.total||t.length},showGridHLines:function(){var e=this,t=this.configs;e.addGridCssRules(".nex-grid-dataview-body .nex-grid-col-"+t.id,"border-bottom-width:;border-top-width:")},hideGridHLines:function(){var e=this,t=this.configs;e.addGridCssRules(".nex-grid-dataview-body .nex-grid-col-"+t.id,"border-bottom-width:0;border-top-width:0")},showGridVLines:function(){var e=this,t=this.configs;e.addGridCssRules(".nex-grid-dataview-body .nex-grid-col-"+t.id,"border-left-width:;border-right-width:")},hideGridVLines:function(){var e=this,t=this.configs;e.addGridCssRules(".nex-grid-dataview-body .nex-grid-col-"+t.id,"border-left-width:0;border-right-width:0")},showGridHeader:function(){var e=this,t=e.getGridHeader();return t.show(),e},hideGridHeader:function(){var e=this,t=e.getGridHeader();return t.hide(),e},_setRowOverCls:function(e,t,n){var i=this.configs,r=n.helper;i.trackMouseOverRow&&r.addClass(["nex-grid-row-over",i.overRowCls].join(" "))},_setRowOutCls:function(e,t,n){var i=this.configs,r=n.helper;i.trackMouseOverRow&&r.removeClass(["nex-grid-row-over",i.overRowCls].join(" "))},onRowMouseOver:function(){this._setRowOverCls.apply(this,arguments)},onRowMouseOut:function(){this._setRowOutCls.apply(this,arguments)},onRowClick:function(e,t,n){this._checkToToggleSelectRow.apply(this,arguments)},_checkToToggleSelectRow:function(e,t,n){var i=this,r=this.configs;n.helper,i.selection;if(r.enableSelectRow){var o=i.selection;if(r.singleSelect){if(o[e])return void(r.enableUnselect&&i.unselectRow(e));i.unselectAll(),i.selectRow(e)}else i.toggleSelectRow(e)}},getGridRowEl:function(e){var t=this.configs;return $("#"+t.id+"_row_"+e)},selectRow:function(e){var t=this,n=t.configs,i=t.getGridRowEl(e);if(!i.length)return t;var r=t.getRowData(e),o=t.selection;return o[e]?t:t.fireEvent("onBeforeSelectRow",[e,r])===!1?t:(i.addClass("nex-grid-row-selected "+n.selectedRowCls),t.selection[e]=!0,t.fireEvent("onSelectRow",[e,r]),
t.fireEvent("onSelectionChange",[]),t)},unselectRow:function(e){var t=this,n=t.configs,i=t.getGridRowEl(e);if(!i.length)return t;var r=t.getRowData(e),o=t.selection;return o[e]?t.fireEvent("onBeforeUnSelectRow",[e,r])===!1?t:(i.removeClass("nex-grid-row-selected "+n.selectedRowCls),t.selection[e]=!1,delete t.selection[e],t.fireEvent("onUnSelectRow",[e,r]),t.fireEvent("onSelectionChange",[]),t):t},toggleSelectRow:function(e){var t=this.selection;return t[e]?this.unselectRow(e):this.selectRow(e)},selectAll:function(){for(var e=this,t=(e.configs,e.getCurrentPageData()),n=0,i=t.length;i>n;n++)e.selectRow(n);return e},unselectAll:function(){var e=this,t=e.selection;for(var n in t)t[n]&&e.unselectRow(n);return e},selectRows:function(e){return $.each(e,function(e,t){this.selectRow(t)}),this},unselectRows:function(e){return $.each(e,function(e,t){this.unselectRow(t)}),this},selectFirstRow:function(){return this.selectRow(0)},selectLastRow:function(){var e=this.getCurrentPageData();return this.selectRow(Math.max(e.length-1,0))},selectRange:function(e,t){var n=this.getCurrentPageData();t=Math.min(t,Math.max(n.length-1,0));for(var i=Math.min(e,t),r=Math.max(e,t);r>=i;i++)this.selectRow(i);return this},unselectRange:function(e,t){var n=this.getCurrentPageData();t=Math.min(t,Math.max(n.length-1,0));for(var i=Math.min(e,t),r=Math.max(e,t);r>=i;i++)this.unselectRow(i);return this},setSingleSelect:function(){return this.configs.singleSelect=!0,this},setMulitSelect:function(){return this.configs.singleSelect=!1,this},__resizing:!1,isResizing:function(){return this.__resizing},_startResize:function(e,t){function n(e,t){o.__resizing=!0,$(document.body).css("cursor","col-resize"),$(document.body).disableSelection();var n=$("<div class='nex-grid-resize-tmp "+(t.showColumnResizeBorder?"nex-grid-resize-border":"")+"'></div>");f.append(n);var a=g.offset(),s=a.left-f.offset().left+f.scrollLeft(),l=f.get(0).clientHeight,u=g.width();n.css({position:"absolute",top:f.css("paddingTop"),zIndex:9999,left:s}),n.outerHeight(parseFloat(l)),n.outerWidth(parseFloat(u)),h.helper=n,h.x1=e.clientX,h.x2=e.clientX,h.column=d,h.left=s,h.width=n.width(),h.originWidth=n.width(),h.originColumnWidth=c,h.offsetX=0,o.fireEvent("onColumnResizeStart",[h,e]),$(document).bind("mousemove._resize",function(e){h.x2=e.clientX,h.offsetX=h.x2-h.x1,o.fireEvent("onColumnResizing",[h,e])!==!1&&i(e)}),$(document).bind("mouseup._resize",function(e){setTimeout(function(){o.__resizing=!1},0),r(e)})}function i(e){h.helper.width(Math.max(h.width+h.offsetX,0)),a.resizeColumnReal&&o.setColumnWidth(l,h.originColumnWidth+h.offsetX)}function r(e){a.resizeColumnReal||o.setColumnWidth(l,h.originColumnWidth+h.offsetX),$(document).unbind("mousemove._resize"),$(document).unbind("mouseup._resize"),document.body.style.cursor=u,$(document.body).enableSelection(),$(h.helper).remove(),o.fireEvent("onColumnResizeEnd",[h,e])}var o=this,a=this.configs,s=$(e),l=s.parent().attr("field"),d=o.getColumnData(l),c=o.getColumnWidth(l),u=document.body.style.cursor;if(l&&d){var h={},f=o.getGridView(),g=o.getColumnEl(l);o.fireEvent("onColumnResizeBefore",[l,e,t])!==!1&&(n.call(e,t,a),t.preventDefault(),t.stopPropagation())}},_getEmptyColumn:function(e){return Nex.applyIf(e,{title:"&nbsp;",minWidth:null,maxWidth:null,resizable:!1,sortable:!1})},_getIndexColumn:function(e){return Nex.applyIf(e,{title:"&nbsp;",width:40,resizable:!1,sortable:!1,headerAlign:"center",align:"center",renderer:function(e,t,n,i){return this.ridToIndex(i)+1}})},_getRownumberColumn:function(e){return this._getIndexColumn(e)},_getCheckboxColumn:function(e){return Nex.applyIf(e,{title:'<span class="nex-icon-checkbox nex-grid-cloumn-checkbox"></span>',width:30,resizable:!1,sortable:!1,headerAlign:"center",align:"center",headerAfterRender:function(e,t){var n=this,i=this.configs;$(".nex-icon-checkbox",e).click(function(e){if(!i.singleSelect){var t=$(this);t.hasClass("nex-icon-checkbox-chcked")?(t.removeClass("nex-icon-checkbox-chcked"),n.unselectAll()):(t.addClass("nex-icon-checkbox-chcked"),n.selectAll())}})},renderer:function(e,t,n,i){return'<span class="nex-icon-checkbox nex-grid-cell-checkbox"></span>'}})},pager:null,pagerRendered:!1,initPager:function(){var e=this,t=this.configs;if(e.pagerRendered)return e;e.pagerRendered=!0;var n=e.getBody(),i=Nex.Create(t.pagerClass,{cls:"nex-grid-pager",pageNumber:t.pageNumber,pageSize:t.pageSize,refreshBtn:!0,total:e.getTotal(),renderTo:n});return i&&(e.pager=i,e.addViewToGridView("pager",i.el),i.on("onPageChange",function(n,i,r){t.pageNumber=n,t.pageSize=i,e.refresh()}),e.on("onShowGrid",function(t){i.refresh({pageNumber:t.pageNumber,pageSize:t.pageSize,total:e.getTotal()})})),e},test:function(){}}),t}),define("Nex/grid/Grid",["require","Nex/grid/Table"],function(e){e("Nex/grid/Table");var t=Nex.define("Nex.grid.Grid",{extend:"Nex.grid.Table",xtype:"grid gridpanel",alias:"Nex.Grid",configs:function(e){return{resizeColumnReal:!1,showColumnResizeBorder:!0,containerCls:[e.containerCls,"nex-grid"].join(" "),_defRowCls:"nex-grid-grid",_columnMetaData:Nex.apply(e._columnMetaData,{width:120}),tpl:Nex.apply(e.tpl,{view:'<div id="<%=id%>_view" class="nex-grid-view"><div id="<%=id%>_dataview" class="nex-grid-dataview"><div id="<%=id%>_dataview_headerCt" class="nex-grid-dataview-headerct"><div id="<%=id%>_dataview_header" class="nex-grid-header nex-grid-dataview-header"></div></div><div id="<%=id%>_dataview_body" class="nex-grid-dataview-body"></div></div></div>'})}}});return t.override({getGridDataHeader:function(){var e=this.configs,t=e.views;return t.gridHeaderCt||(t.gridHeaderCt=$("#"+e.id+"_dataview_headerCt")),t.gridHeaderCt},getGridDataHeaderInner:function(){return this.configs.views.gridHeader},_setGridLayoutCss:function(){var e=this;this.configs;return e.addGridCssRules(".nex-grid-table","table-layout: fixed;width: 0px;"),e},getScrollView:function(){return this.configs.views.gridBody},getGridHeaderHtml:function(){return['<table class="nex-grid-table nex-grid-header-table" cellpadding="0" cellspacing="0" border="0">',"<tbody>",this.callParent(arguments),"<tbody>","</table>"].join("")},getGridRowsHtml:function(){return['<table class="nex-grid-table nex-grid-body-table" cellpadding="0" cellspacing="0" border="0">',"<tbody>",this.callParent(arguments),"<tbody>","</table>"].join("")},setGridDataViewSize:function(){var e=this;this.configs;e.callParent(arguments);var t=e.getGridView(),n=e.getGridDataView(),i=e.getGridDataBody(),r=e.getGridDataHeader();e.isAutoWidth()?(n._removeStyle("width"),i._removeStyle("width")):(n._outerWidth(t._width()),i._outerWidth(n._width())),e.isAutoHeight()?(n._removeStyle("height"),i._removeStyle("height")):(n._outerHeight(t._height()),i._outerHeight(n._height()-r._outerHeight()))},doRenderContent:function(){this.callParent(arguments),this.setGridViewSize()},onScrollLeft:function(e,t,n,i){var r=this,o=r.getGridDataHeaderInner();o.css({marginLeft:-e})},_setColumnWidth:function(e,t){var n=this,i=(n.configs,n.getColumnData(e));if(!i)return n;i.width=t;var r=i.maxWidth,o=i.minWidth,a=n.getGridDataBody()||n.getGridDataHeader(),s=a.width()||0,l=t+"";if(-1!=l.indexOf("%")){var d=s;if(Nex.hasScroll(a,"top")){var c=Nex.getScrollbarSize().width;d=s-c}l=parseFloat(t)*d/100}else l=parseFloat(t);return r&&(l=Math.min(l,r)),o&&(l=Math.max(l,o)),n.addGridCssRules(".nex-column-width-"+i._colid,"width:"+l+"px"),n},refreshColumnsWidth:function(e){var t=this,n=(this.configs,t.getLeafColumns());return $.each(n,function(n,i){(e||-1!=(i.width+"").indexOf("%"))&&t._setColumnWidth(i.field,i.width)}),t},afterRenderGridRows:function(){var e=this;e.configs;e.callParent(arguments),e.refreshColumnsWidth()},onViewSizeChange:function(){var e=this;e.configs;e.callParent(arguments),e.refreshColumnsWidth()},scrollToRow:function(e){var t=this,n=t.configs;if(t.fireEvent("onBeforeScrollToRow",[e,n])===!1)return t;var i=t.getGridDataBody(),r=Nex.getScrollbarSize().height,o=i.offset(),a=i._outerHeight();Nex.hasScroll(i,"left")&&(a-=r);var s=t.getRowEl(e);if(!s.length)return t;var l=s.offset(),d=s._outerHeight(),c=0;return o.top>l.top?c=o.top-l.top:o.top+a<l.top+d&&(c=o.top+a-(l.top+d)),t.scrollTop(i.scrollTop()-c),t.fireEvent("onAfterScrollToRow",[e,n]),t},scrollToColumn:function(e){var t=this,n=t.configs,i=t.getGridDataHeader(),r=t.getGridDataBody();if(!i.length)return t;if(t.fireEvent("onBeforeScrollToColumn",[e,n])===!1)return t;var o=Nex.getScrollbarSize().width,a=i.offset(),s=i._outerWidth();Nex.hasScroll(r,"top")&&(s-=o);var l=t.getColumnEl(e);if(!l||!l.length)return t;var d=l.offset(),c=l._outerWidth(),u=0;return a.left>d.left?u=a.left-d.left:a.left+s<d.left+c&&(u=a.left+s-(d.left+c)),console.log(a.left,d.left),t.scrollLeft(r.scrollLeft()-u),t.fireEvent("onAfterScrollToField",[e,n]),t},scrollToField:function(){return this.scrollToColumn.apply(this,arguments)}}),t}),define("Nex/drag/Drag",["require","Nex"],function(e){e("Nex");var t=Nex.define("Nex.drag.Drag",{extend:"Nex.AbstractComponent",alias:"Nex.Drag",xtype:"drag draggable",configs:function(){return{prefix:"drag-",denyManager:!0,cursor:"move",_cursor:"",appendTo:null,clone:!1,cloneFn:null,helper:null,cancel:null,target:null,disabled:!1,axis:null,parent:null,afterDrag:null,delay:0,distance:0,opacity:!1,_opacity:"",_revertConf:{},revert:!1,revertDuration:500,revertEasing:"easeOutCubic",moveHelper:null,dragCls:"",left:0,top:0,_sLeft:0,_sTop:0,_ssLeft:0,_ssTop:0,_sX:0,_sY:0,offsetX:0,offsetY:0,_sPosition:"",edge:0,events:{}}}});$.dragable=$.nexDragable=t,t.override({initComponent:function(e){var t=this,e=this.configs;if(t.callParent(arguments),e.helper||e.target){e.helper||(e.helper=e.target);var n=null;n="undefined"==typeof e.target||null==e.target?e.helper:"string"==typeof e.target?$(e.target):e.target,e.target=n,$(e.helper).data("nex.draggable",t),e.helper.bind("mousedown.draggable",$.proxy(t,"mouseDown"))}},mouseDown:function(e){var t=this,n=t.configs;if(!t.checkDisabledEdge(e)){n._sX=e.pageX,n._sY=e.pageY;var i=0;n.delay>0?(i=setTimeout(function(){i=0,$(document).bind("mousedown.draggable",$.proxy(t,"_doDown")),$(document).bind("mousemove.draggable",$.proxy(t,"_doMove")),$(document).bind("mouseup.draggable",$.proxy(t,"_doUp"))},n.delay),$(document).one("mouseup.draggable",function(){i&&clearTimeout(i)})):($(document).bind("mousedown.draggable",$.proxy(t,"_doDown")),$(document).bind("mousemove.draggable",$.proxy(t,"_doMove")),$(document).bind("mouseup.draggable",$.proxy(t,"_doUp")))}},beginDrag:!1,isDragging:!1,_doDown:function(e){var t=this,n=t.configs;if($(document).disableSelection(),t.beginDrag=!1,n.cancel){var i=$(e.target||e.srcElement);if(i.closest(n.cancel).length)return void this._doUp()}var r=t.fireEvent("onBeforeDrag",[e,n]);r!==!1&&(t.beginDrag=!0)},_doMove:function(e){var t=this,n=t.configs;if(!n.disabled&&t.beginDrag){var i=e.pageX-n._sX,r=e.pageY-n._sY;if(n.offsetX=i,n.offsetY=r,n.distance&&!t.isDragging){var o=Math.max(Math.abs(i),Math.abs(r));if(o<n.distance)return}if(!t.isDragging){var a=t.getMoveHelper();t.fireEvent("onStartDrag",[a,e,n]),t._startMove(),n.dragCls&&a.addClass(n.dragCls),t.isDragging=!0}var s=0,l=0,d=n._sLeft+i+s-n._ssLeft,c=n._sTop+r+l-n._ssTop;"h"==n.axis?(n.left=d,n.top=n._sTop):"v"==n.axis?(n.left=n._sLeft,n.top=c):(n.left=d,n.top=c);var u={left:n.left,top:n.top},h=t.fireEvent("onDrag",[n.moveHelper,u,e,n]);h!==!1&&t.moveToPosition(u.left,u.top,e)}},_doUp:function(e){var t=this,n=t.configs;if($(document).unbind(".draggable"),$(document).enableSelection(),!n.disabled&&t.beginDrag&&t.isDragging){t.isDragging=!1,$("body").css("cursor",n._cursor),$(n.moveHelper).removeClass(n.dragCls);var i={left:n.left,top:n.top},r=t.fireEvent("onStopDrag",[n.moveHelper,i,e,n]);if(n.left=i.left,n.top=i.top,r===!1)t._revertEl();else{var o=function(){n.revert===!0?t._revertEl():n.revert===!1&&t._endMove()};$.isFunction(n.afterDrag)&&(o=n.afterDrag),o.call(t)}t.fireEvent("onAfterDrag",[i,e,n])}},_revertEl:function(){var e=this,t=e.configs,n=function(){t.opacity!==!1&&$(t.moveHelper).css("opacity",t._opacity),t.clone&&$(t.moveHelper).remove(),t.appendTo&&(t._revertConf.revert(),t._revertConf.target[0].style.cssText=t._revertConf.cssText,t._revertConf.parent.scrollTop(t._revertConf.sTop),t._revertConf.parent.scrollLeft(t._revertConf.sLeft))};t.revertDuration>0?$(t.moveHelper).animate({left:t._sLeft,top:t._sTop},t.revertDuration,t.revertEasing,function(){n()}):($(t.moveHelper).css({left:t._sLeft,top:t._sTop}),n())},_getFixPositionSize:function(e){var t=parseFloat(e.css("borderLeftWidth"))||0,n=parseFloat(e.css("paddingLeft"))||0,i=parseFloat(e.css("borderTopWidth"))||0,r=parseFloat(e.css("paddingTop"))||0;return{left:t+n,top:i+r}},getMoveHelper:function(){var e=this,t=e.configs,n=$(t.target);return t.moveHelper=n,t.clone&&(t.moveHelper=$.isFunction(t.cloneFn)?t.cloneFn.call(e,n,t):n.clone(),t.moveHelper=t.moveHelper?$(t.moveHelper):n.clone()),t.moveHelper},_startMove:function(){var e=this,t=e.configs;t._cursor=$("body").css("cursor"),$("body").css("cursor",t.cursor);var n=$(t.target),i=n,r=n.parent();if(t.appendTo){t._revertConf={target:n,parent:r,sLeft:r.scrollLeft(),sTop:r.scrollTop()};var o=i.prev(),a=i.next();o.size()?t._revertConf.revert=function(){o.after(i)}:a.size()?t._revertConf.revert=function(){o.before(i)}:t._revertConf.revert=function(){r.prepend(i)},t._revertConf.cssText=i[0].style.cssText}if(t.appendTo){var s=$(t.appendTo),l=n.offset(),d=s.offsetParent().offset();s.append(t.moveHelper),t.clone&&s.append(n);var d=n.offsetParent().offset(),c=e._getFixPositionSize(s.offsetParent());n.css({position:"absolute",left:l.left-d.left-c.left,top:l.top-d.top-c.top})}else t.clone&&n.parent().append(t.moveHelper);t._ssLeft=0,t._ssTop=0;var u=n._position();t.left=u.left,t.top=u.top;var n=t.moveHelper;return t._sLeft=t.left+t._ssLeft,t._sTop=t.top+t._ssTop,n.css("position","absolute"),t.clone&&n.css({left:t._sLeft,top:t._sTop}),t.opacity!==!1&&n.css("opacity",t.opacity),e},_endMove:function(){var e=this,t=e.configs;$(t.target).css({position:"absolute",left:t.left,top:t.top}),t.opacity!==!1&&$(t.moveHelper).css("opacity",t._opacity),t.clone&&$(t.moveHelper).remove()},moveToPosition:function(e,t,n){var i=this,r=i.configs,o=$(r.moveHelper);r.left=e,r.top=t,o.css({left:e,top:t})},mouseMove:function(e){var t=this;t.configs;t.isDragging||t.checkDisabledEdge(e)},mouseLeave:function(e){var t=this;t.configs;t.isDragging||t.checkDisabledEdge(e)},removeDragable:function(){var e=this,t=e.configs;return $(t.helper).data("nex.draggable",null),t.helper.unbind(".draggable"),!0},checkDisabledEdge:function(e){var t=this,n=t.configs,i=$(n.helper).offset(),r=$(n.helper).outerWidth(),o=$(n.helper).outerHeight(),a=e.pageY-i.top,s=i.left+r-e.pageX,l=i.top+o-e.pageY,d=e.pageX-i.left;return Math.min(a,s,l,d)<n.edge}}),$.fn.draggable=function(e,t){var e=e||{};if("string"==typeof e)switch(e){case"options":return $(this[0]).data("nex.draggable").C();case"disabled":return this.each(function(){$(this).data("nex.draggable").C("disabled",!0)});case"enable":return this.each(function(){$(this).data("nex.draggable").C("disabled",!1)});default:return this.each(function(){t&&$(this).data("nex.draggable").C(e,t)})}return this.each(function(){var t,n=$(this).data("nex.draggable");return n?(t=n.configs,void $.extend(t,e)):(e.helper=$(this),void new Nex.Drag(e))})}}),define("Nex/resize/Resize",["require","Nex"],function(e){e("Nex");var t=Nex.define("Nex.resize.Resize",{extend:"Nex.AbstractComponent",alias:"Nex.Resize",xtype:"resize resizable",configs:function(){return{denyManager:!0,target:null,disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,left:0,top:0,_sLeft:0,_sTop:0,_sX:0,_sY:0,_sWidth:0,_sHeight:0,width:0,height:0,dir:""}}});t.override({initComponent:function(){var e=this,t=this.configs;e.callParent(arguments),t.target&&($(t.target).data("nex.resizable",e),t.target.bind("mousedown.resizable",$.proxy(e,"mouseDown")),t.target.bind("mousemove.resizable",$.proxy(e,"mouseMove")),t.target.bind("mouseleave.resizable",$.proxy(e,"mouseLeave")))},getDirection:function(e){var t=this,n=t.configs,i=$(n.target),r="",o=i.offset(),a=i.outerWidth(),s=i.outerHeight(),l=n.edge;e.pageY>o.top&&e.pageY<o.top+l?r+="n":e.pageY<o.top+s&&e.pageY>o.top+s-l&&(r+="s"),e.pageX>o.left&&e.pageX<o.left+l?r+="w":e.pageX<o.left+a&&e.pageX>o.left+a-l&&(r+="e");for(var d=n.handles.split(","),c=0;c<d.length;c++){var u=d[c].replace(/(^\s*)|(\s*$)/g,"");if("all"==u||u==r)return r}return""},resize:function(e){var t,n,i=this,r=i.configs;if(-1!=r.dir.indexOf("e")&&(t=r._sWidth+e.pageX-r._sX,t=Math.min(Math.max(t,r.minWidth,0),r.maxWidth<=0?Math.max(t,r.minWidth):r.maxWidth),r.width=t),-1!=r.dir.indexOf("s")&&(n=r._sHeight+e.pageY-r._sY,n=Math.min(Math.max(n,r.minHeight,0),r.maxHeight<=0?Math.max(n,r.minHeight):r.maxHeight),r.height=n),-1!=r.dir.indexOf("w")){t=r._sWidth-e.pageX+r._sX;var o=Math.min(Math.max(t,r.minWidth,0),r.maxWidth<=0?Math.max(t,r.minWidth):r.maxWidth);t==o&&(r.left=r._sLeft+e.pageX-r._sX),r.width=o}if(-1!=r.dir.indexOf("n")){n=r._sHeight-e.pageY+r._sY;var a=Math.min(Math.max(n,r.minHeight,0),r.maxHeight<=0?Math.max(n,r.minHeight):r.maxHeight);n==a&&(r.top=r._sTop+e.pageY-r._sY),r.height=a}},setWH:function(){var e=this,t=e.configs,n=$(t.target),i=n.outerWidth()-n.width(),r=n.outerHeight()-n.height();n.width(t.width-i),n.height(t.height-r),-1!==$.inArray(n.css("position"),["absolute","fixed"])&&n.css({left:t.left,top:t.top})},_doDown:function(e){var t=this,n=t.configs;$(document).disableSelection(),t.fireEvent("onStartResize",[e,n])},_doMove:function(e){var t=this,n=t.configs;if(!n.disabled){t.resize(e);var i=t.fireEvent("onResize",[n.width,n.height,e,n]);i!==!1&&t.setWH()}},_doUp:function(e){var t=this,n=t.configs;if($(document).unbind(".resizable"),$(document).enableSelection(),$("body").css("cursor",""),!n.disabled){var i=t.fireEvent("onStopResize",[n.width,n.height,e,n]);i!==!1&&t.setWH(),t.fireEvent("onAfterResize",[n.width,n.height,e,n])}},mouseDown:function(e){function t(e){var t=parseInt(o.css(e));return t||0}var n=this,i=n.configs;if(!i.disabled){var r=n.getDirection(e);if(""!=r){var o=$(i.target);i.dir=r,i._sLeft=t("left"),i._sTop=t("top"),i.left=i._sLeft,i.top=i._sTop,i._sX=e.pageX,i._sY=e.pageY,i._sWidth=o.outerWidth(),i._sHeight=o.outerHeight(),i.width=o.outerWidth(),i.height=o.outerHeight();var a=n.fireEvent("onBeforeResize",[e,i]);a!==!1&&($(document).bind("mousedown.resizable",$.proxy(n,"_doDown")),$(document).bind("mousemove.resizable",$.proxy(n,"_doMove")),$(document).bind("mouseup.resizable",$.proxy(n,"_doUp")),$("body").css("cursor",r+"-resize"))}}},mouseMove:function(e){var t=this,n=t.configs,i=t.getDirection(e);""==i?$(n.target).css("cursor",""):$(n.target).css("cursor",i+"-resize")},mouseLeave:function(e){var t=this,n=t.configs;$(n.target).css("cursor","")}}),$.fn.resizable=function(e,t){var e=e||{};if("string"==typeof e)switch(e){case"options":return $(this[0]).data("nex.resizable").C();case"disabled":return this.each(function(){$(this).data("nex.resizable").C("disabled",!0)});case"enable":return this.each(function(){$(this).data("nex.resizable").C("disabled",!1)});default:return this.each(function(){t&&$(this).data("nex.resizable").C(e,t)})}return this.each(function(){var t,n=$(this).data("nex.resizable");return n?(t=n.configs,void $.extend(t,e)):(e.target=$(this),void new Nex.Resize(e))})}}),define("Nex/window/Window",["require","Nex/showat/ShowAt","Nex/drag/Drag","Nex/resize/Resize","Nex/panel/Panel"],function(e){e("Nex/showat/ShowAt"),e("Nex/drag/Drag"),e("Nex/resize/Resize"),e("Nex/panel/Panel");var t=Nex.define("Nex.window.Window",{extend:"Nex.panel.Panel",alias:"Nex.Window",xtype:"window",configs:function(e,t){return{prefix:"nexwindow-",border:!0,borderCls:[e.borderCls,"nex-window-border"].join(" "),containerCls:[e.containerCls,"nex-window"].join(" "),tabIndex:-1,autoScroll:!1,autoSizeOnShow:!1,autoShow:!0,isFixed:!1,refreshPosOnResize:!0,resetPosOnShow:!0,showShadow:!0,shadowCls:"nex-window-shadow",focusOnToFront:!0,constrain:!1,constrainEdge:0,constrainHeader:!1,closeToRemove:!0,actionOnEsc:"close",closeOnEsc:!0,_closeOnDom:{enable:!1,event:"mousedown",action:"close",cancel:"",attach:document},closeOnDom:{},closeOnTime:0,actionOnTime:"close",draggable:!0,dragCls:"",dragHelper:"header",_dragConfig:{cancel:".nex-panel-tools",distance:1},dragConfig:{},resizeable:!1,resizeDelay:50,_resizeConfig:{},resizeConfig:{},closable:!0,minimizable:!1,maximizable:!1,maximized:!1,maximizedCls:"",minimized:!1,headerSelectionable:!1,items:[],renderTo:window,animate:!0,animDuration:200,animEasing:Nex.easingDef,_effect:{},effect:{},showEffect:{},hideEffect:{},showFn:null,hideFn:null,showMethod:"fadeIn",hideMethod:"fadeOut",_showAt:{xAlign:"center",yAlign:"center",zAlign:"y",visibleable:!0},showAt:{},resetPositionDuration:200,alwaysOnTop:!1,zIndex:Nex.zIndex,modal:!1,modalCls:"",modalRenderTo:null,maxWidth:function(){var e=this,t=(e.configs,this.C("renderTo"));return $(t).width()},maxHeight:function(){var e=this,t=(e.configs,this.C("renderTo"));return $(t).height()}}}});return t.override({onContainerCreate:function(e,t){this.callParent(arguments),this.isFixed()&&e.addClass("nex-window-fixed"),this._initHidden()},onHeaderCreate:function(e,t){this.callParent(arguments),e.addClass("nex-window-header"),$(">.nex-panel-tools",e).addClass("nex-window-tools")},onBodyCreate:function(e,t){this.callParent(arguments),e.addClass("nex-window-body")},onFooterCreate:function(e,t){this.callParent(arguments),e.addClass("nex-window-footer")},sysEvents:function(){var e=this,t=e.configs;return e.callParent(arguments),e.bind("onCreate._sys",e._refreshPosOnResize,e),e.bind("onKeyDown._sys",function(n,i){27===i.keyCode&&t.actionOnEsc&&($.isFunction(t.actionOnEsc)?t.actionOnEsc.call(e):e[t.actionOnEsc]&&e[t.actionOnEsc]())},e),e.bind("onFocusin._front",function(){t.focusOnToFront&&e.setzIndex()},e),e.bind("onCreate._sys",e._draggable,e),e.bind("onCreate._sys",e._resizeable,e),e.bind("onWindowDrag._sys",e._checkDragConstrain,e),e.bind("onShow._sys",e._setCustomCloseEvent,e),e.bind("onHide._sys",e._unsetCustomCloseEvent,e),e.bind("onShow._sys",e._closeOnTime,e),e.bind("onHide._sys",e._uncloseOnTime,e),e.bind("onDestroy._sys",function(){e._unsetCustomCloseEvent(),e._uncloseOnTime()},e),e},__sce:0,_setCustomCloseEvent:function(){var e=this,t=this.configs,n=$.extend({},t._closeOnDom,t.closeOnDom);n.enable&&(e.__sce=setTimeout(function(){if(e.__sce=0,n.attach){var i=$(n.attach);if(!i.length)return;i.bind(n.event+"._close_"+t.id,function(i){var r=i.target||i.srcElement;if(!$(r).is("#"+t.id)&&!$(r).parents("#"+t.id).length){if(n.cancel){if($(r).is(n.cancel))return;var o=!1;if($(r).parents().each(function(){return $(this).is(n.cancel)?(o=!0,!1):void 0}),o)return}e[n.action]()}})}},0))},_unsetCustomCloseEvent:function(){var e=this,t=this.configs,n=$.extend({},t.closeOnDom,t._closeOnDom);if(n.enable&&((e.__sce=0)&&clearTimeout(e.__sce),n.attach)){var i=$(n.attach);if(!i.length)return;i.unbind(n.event+"._close_"+t.id)}},__cot:0,_closeOnTime:function(){var e=this,t=this.configs;t.closeOnTime&&Nex.isNumeric(t.closeOnTime)&&(e.__cot=setTimeout(function(){e.__cot=0,e[t.actionOnTime]()},parseInt(t.closeOnTime,10)))},_uncloseOnTime:function(){this.__cot&&clearTimeout(this.__cot)},_initHidden:function(){this.hidden=!0,this.el._hide()},checkToAutoSetSize:function(){var e=this,t=this.configs;"auto"===t.width&&"auto"===t.height?(e.clearContainerSizeCache(),e.autoSetSize()):"auto"===t.width?(e.clearContainerSizeCache(),e.autoSetWidth()):"auto"===t.height&&(e.clearContainerSizeCache(),e.autoSetHeight())},_afterCreate:function(){var e=this,t=this.configs,n=this.el;t.autoShow&&this.show(),t.maximized&&this.maximize(),e.callParent(arguments),t.minimized&&(n.stop(!0,!0),this.minimize(!1))},__rpr:!1,__rptt:0,_refreshPosOnResize:function(){var e=this,t=this.configs;Nex.ComponentManager&&(e.__rpr||(e.__rpr=!0,e.bind("onDestroy._sys",function(){Nex.ComponentManager.unbind("._"+t.id)}),Nex.ComponentManager.bind("onBrowserResize._"+t.id,function(){e.fireEvent("onBrowserSizeChange"),e.rendered&&!e.isHidden()&&(t.modal&&e.refreshModalSizeAndPos(),t.refreshPosOnResize&&(e.maximized||e.collapsed||(e.__rptt&&(clearTimeout(e.__rptt),e.__rptt=0),e.__rptt=setTimeout(function(){clearTimeout(e.__rptt),e.__rptt=0,e.isShowing?(e.unbind("._resize__"+t.id),e.one("onShow._resize__"+t.id,function(){e.resetPosition()})):e.resetPosition()},0))))})))},_checkDragConstrain:function(e,t,n,i){var r=this,o=this.configs;if(o.constrain){var a=r.el,s=$(o.renderTo).scrollLeft(),l=$(o.renderTo).scrollTop(),d=t.left,c=t.top,u=$.isWindow(o.renderTo)?$(o.renderTo).width():$(o.renderTo)[0].clientWidth,h=$.isWindow(o.renderTo)?$(o.renderTo).height():$(o.renderTo)[0].clientHeight,f=a.outerWidth(),g=a.outerHeight(),p=o.constrainEdge;p>d-s&&(t.left=s+p),p>c-l&&(t.top=l+p),f+d-s>u-p&&(t.left=u-f+s-p);var v=0;o.constrainHeader&&o.views.header&&(v=o.views.header.outerHeight()+(parseFloat(a.css("borderTop"))||0)+(parseFloat(a.css("paddingTop"))||0),v=a.outerHeight()-v),g+c-l>h+v-p&&(t.top=h-g+l-p+v)}},_setSysTools:function(e){var t=this,n=this.configs,i=n.views.header,r=$(">.nex-panel-tools",i);return n.collapsible&&(e.push({iconCls:"tools-collapse-icon",handler:function(){t.toggleCollapse()}}),t.unbind(".collapse"),t.bind("onCollapse.collapse",function(){$(">.tools-collapse-icon",r).addClass("tools-expand-icon")},t),t.bind("onExpand.collapse",function(){$(">.tools-collapse-icon",r).removeClass("tools-expand-icon")},t)),n.minimizable&&e.push({iconCls:"tools-minimize-icon",handler:function(){t.minimize()}}),n.maximizable&&(e.push({iconCls:"tools-maximize-icon",handler:function(){t.toggleMaximize()}}),t.unbind(".maximize"),t.bind("onMaximize.maximize",function(){$(">.tools-maximize-icon",r).addClass("tools-restore-icon")},t),t.bind("onRestore.maximize",function(){$(">.tools-maximize-icon",r).removeClass("tools-restore-icon")},t)),n.closable&&e.push({iconCls:"tools-close-icon",handler:function(){t.close()}}),e},setzIndex:function(){var e=this,t=e.configs,n=e.el,i=Nex[t.alwaysOnTop?"topzIndex":"zIndex"]+2;Nex[t.alwaysOnTop?"topzIndex":"zIndex"]=i,t.zIndex=i,n.css("z-index",t.zIndex);var r=t.views.modal;r&&r.css("z-index",t.zIndex-1)},toFront:function(){var e=this.configs;return e.focusOnToFront&&this.focus(),this},_drmodal:null,showDragAndResizeOuterModal:function(){var e=this.el;this._drmodal||(this._drmodal=$('<div class="nex-window-tmp-modal"></div>'));var t=e.parent();return t.append(this._drmodal),this._drmodal.css({width:t.width(),height:t.height()}),this._drmodal},removeDragAndResizeOuterModal:function(){this._drmodal&&(this._drmodal.remove(),this._drmodal=null)},dragger:null,_draggable:function(){var e=this,t=this.el,n=e.configs;if(n.draggable&&Nex.drag.Drag){var i=n.views[n.dragHelper]||e.el,r={helper:i,target:t},o={},a=null;o["onBeforeDrag._drag_"+n.id]=function(t,i){if(1!==t.which||!n.draggable||e.maximized||e.isResizing)return!1;var r=e.fireEvent("onWindowBeforeDrag",[t,i]);return r===!1?r:void this.C("dragCls",n.dragCls)},o["onStartDrag._drag_"+n.id]=function(n,i,r){e.fireEvent("onWindowStartDrag",[n,i,r]),n.addClass("nex-window-dragging"),a||(a=$('<div class="nex-window-drag-modal"></div>'),t.append(a)),e.showDragAndResizeOuterModal()},o["onDrag._drag_"+n.id]=function(t,n,i,r){var o=e.fireEvent("onWindowDrag",[t,n,i,r]);return o===!1?o:void 0},o["onStopDrag._drag_"+n.id]=function(t,n,i,r){t.removeClass("nex-window-dragging");var o=e.fireEvent("onWindowStopDrag",[t,n,i,r]);return o===!1?o:void 0},o["onAfterDrag._drag_"+n.id]=function(n,i,r){e.isFixed()&&t.css({position:"fixed",left:n.left-$(window).scrollLeft(),top:n.top-$(window).scrollTop()}),a&&(a.remove(),a=null),e.removeDragAndResizeOuterModal(),e.fireEvent("onWindowAfterDrag",[n,i,r])},e.dragger=Nex.Create("draggable",$.extend(o,n._dragConfig,n.dragConfig||{},r))}},resizer:null,isResizing:!1,_resizeable:function(){var e=this,t=e.configs;if(t.resizeable&&Nex.resize.Resize&&!t.autoSize){var n=e.el,i={target:n},r={},o=null,a=t.resizeDelay,s=0;r["onBeforeResize._drag_"+t.id]=function(n,i){if(1!==n.which||!t.resizeable||e.collapsed||e.maximized)return!1;var r=e.fireEvent("onWindowBeforeResize",[n,i]);return r===!1?r:($.extend(this.configs,{minWidth:e._getMinWidth(),minHeight:e._getMinHeight(),maxWidth:e._getMaxWidth(),maxHeight:e._getMaxHeight()}),void(e.isResizing=!0))},r["onStartResize._drag_"+t.id]=function(t,i){e.fireEvent("onWindowStartResize",[t,i]),o=$('<div class="nex-window-drag-modal"></div>'),n.append(o),e.showDragAndResizeOuterModal()},r["onResize._drag_"+t.id]=function(t,n,i,r){var o=e.fireEvent("onWindowResize",[t,n,i,r]);return o===!1?o:(clearTimeout(s),void(s=setTimeout(function(){e.setSize(r.width,r.height)},a)))},r["onStopResize._drag_"+t.id]=function(t,n,i,r){var o=e.fireEvent("onWindowStopResize",[t,n,i,r]);return o===!1?o:void 0},r["onAfterResize._drag_"+t.id]=function(t,n,i,r){e.isResizing=!1,o&&(o.remove(),o=null),e.removeDragAndResizeOuterModal(),e.fireEvent("onWindowAfterResize",[t,n,i,r])},e.resizer=Nex.Create("resizable",$.extend(r,t._resizeConfig,t.resizeConfig||{},i))}},isFixed:function(){var e=this.configs;return!$.isWindow(e.renderTo)||Nex.IEVer&&Nex.IEVer<=6?!1:e.isFixed},getShowAt:function(){var e=this.configs;if(this._currShowAt)return this._currShowAt.configs.at;var t=$.extend({},e._showAt,e.showAt);return t.at||e.renderTo},_currShowAt:null,_currShowAtConf:null,getShowAtPos:function(e){var t=this.configs,e=this._undef(e,{}),n=t.showAt;Nex.isArray(n)?n={left:n[0],top:n[1]}:Nex.isPlainObject(n)||(n={at:n});var i={};this._currShowAtConf&&(i=this._currShowAtConf);var r=$.extend({},t._showAt,n,i,e);r.parent=t.renderTo,r.el=r.el||this.el,r.at=r.at||t.renderTo,r.autoShow=!1,this._currShowAtConf=r;var o=Nex.Create("showAt",r);this._currShowAt=o;var a=o.getShowPos();return this.isFixed()&&(a.left-=$(window).scrollLeft(),a.top-=$(window).scrollTop()),a},getPosition:function(){return this.getShowAtPos.apply(this,arguments)},showAt:function(e){var t=this,n=this.configs,i=t.el,r={},o={};"number"==typeof arguments[0]&&(o.left=arguments[0]),"number"==typeof arguments[1]&&(o.top=arguments[1]),"object"!==$.type(e)||"at"in e||("at"in e?(r=e,o=e.at):o=e),$.isArray(e)&&(o.left=e[0]||0,o.top=e[1]||0),r.at=o,$.isEmptyObject(o)&&delete r.at,n.animate&&i.stop(!0,!0);var a=t.getShowAtPos(r);return t.isVisible()?n.animate?i.animate(a,n.resetPositionDuration,Nex.easingDef,function(){t.fireEvent("onResetPosition",[i,n])}):(i.css(a),t.fireEvent("onResetPosition",[i,n])):(i.css(a),Nex.panel.Panel.prototype.show.apply(this)),t},resetPosition:function(){return this.rendered?this.showAt.apply(this,arguments):this},setPosition:function(e,t){if(!this.rendered)return this;var n=this.configs,i=this.el,r={};return void 0!==e&&(r.left=e),void 0!==t&&(r.top=t),n.animate?i.stop(!0,!0).animate(r,n.resetPositionDuration,Nex.easingDef):i.css(r),this},autoSizeAndPos:function(){return this.autoSetSize(),this.resetPosition(),this},_initShow:!1,onBeforeHide:function(){this.callParent(),this.hideModal()},onBeforeShow:function(){this.callParent(),this.showModal()},show:function(){var e=this,t=this.configs,n=e.el;if(e.isVisible())return e;if(t.autoSizeOnShow&&e.checkToAutoSetSize(),t.resetPosOnShow&&!e.collapsed||!e._initShow){e._initShow=!0;var i=e.getShowAtPos();n.css(i)}return e.setzIndex(),Nex.panel.Panel.prototype.show.apply(e,arguments)},maximized:!1,maximize:function(){var e=this,t=e.el,n=e.configs;if(!e.isVisible()||e.maximized||e.collapsed)return e;if(e.fireEvent("onBeforeMaximize",[n])===!1)return e;var i={width:n.width,height:n.height,left:t.css("left")||0,top:t.css("top")||0};t.data("_maxrestore",i),e.maximized=!0,t.addClass("nex-window-maximized "+n.maximizedCls),t.stop(!0,!0),e.setSize("100%","100%");var r=0,o=0;try{r=$(n.renderTo).css("paddingTop")||0,o=$(n.renderTo).css("paddingLeft")||0}catch(a){}return t.css({left:r,top:o}),e.fireEvent("onMaximize",[n]),e},restore:function(){var e=this,t=e.el,n=e.configs;if(!e.isVisible()||!e.maximized||e.collapsed)return e;
if(e.fireEvent("onBeforeRestore",[n])===!1)return e;var i=t.data("_maxrestore")||{};return t.removeData("_maxrestore"),this.maximized=!1,t.removeClass("nex-window-maximized "+n.maximizedCls),e.setSize(i.width,i.height),t.css({left:i.left,top:i.top}),e.fireEvent("onRestore",[n]),e},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},toggle:function(){return this[this.hidden?"show":"hide"].apply(this,arguments)},minimize:function(){return this.hide.apply(this,arguments)},toggleMinimize:function(){return this.toggle.apply(this,arguments)},_getModalRenderTo:function(){var e=this.el,t=this.configs,n=e.parent();if(t.modalRenderTo){var i=$(t.modalRenderTo);n=i.length?i:n}return n},_createModal:function(){var e=this,t=e.configs;if(!t.modal)return null;if(t.views.modal)return null;var n=(e.el,t.modalRenderTo&&$(t.modalRenderTo).length?t.modalRenderTo:t.renderTo),i=["nex-window-modal"];$.isWindow(n)&&e.isFixed()&&i.push("nex-window-modal-fixed"),t.modalCls&&i.push(t.modalCls);var r=$('<div class="'+i.join(" ")+'" id="'+t.id+'_modal"></div>');t.views.modal=r,r.css("zIndex",t.zIndex-1),r.bind({"click._modal":function(n){return e.fireEvent("onModalClick",[r,n,t]),$(document).trigger("click",[n]),!1},"dblclick._modal":function(n){return e.fireEvent("onModalDblClick",[r,n,t]),$(document).trigger("dblclick",[n]),!1},"mousedown._modal":function(n){return e.fireEvent("onModalMouseDown",[r,n,t]),$(document).trigger("mousedown",[n]),!1},"mouseup._modal":function(n){return e.fireEvent("onModalMouseUp",[r,n,t]),$(document).trigger("mouseup",[n]),!1},"keydown._modal":function(n){return e.fireEvent("onModalKeyDown",[r,n,t]),$(document).trigger("keydown",[n]),!1},"keyup._modal":function(n){return e.fireEvent("onModalKeyUp",[r,n,t]),$(document).trigger("keyup",[n]),!1},"mousewheel._modal":function(n){e.fireEvent("onModalMouseWheel",[r,n,t])},"mouseover._modal":function(n){return e.fireEvent("onModalMouseOver",[r,n,t]),$(document).trigger("mouseover",[n]),!1},"mouseout._modal":function(n){return e.fireEvent("onModalMouseOut",[r,n,t]),$(document).trigger("mouseout",[n]),!1}});var o=e._getModalRenderTo();return o.append(r),e.fireEvent("onModelCreate",[r,t]),e.bind("onDestroy._sys",function(){r.remove()},e),r},getModal:function(){var e=this.configs;return e.views.modal?e.views.modal:this._createModal()},showModal:function(){var e=this.configs,t=this.getModal();return t?(t.css({zIndex:e.zIndex-1}),t.show(),this.refreshModalSizeAndPos(),this.fireEvent("onModalShow",[t,e]),this):void 0},hideModal:function(){var e=this.configs,t=this.getModal();return t?(t.fadeOut(e.animDuration),this.fireEvent("onModalHide",[t,e]),this):void 0},refreshModalSizeAndPos:function(){var e=this,t=this.configs,n=e.getModal();if(!n)return e;n._removeStyle("width height");var i=t.modalRenderTo&&$(t.modalRenderTo).length?t.modalRenderTo:t.renderTo,r=$.isWindow(i);i=$(i);var o=r?0:parseInt(i.css("paddingLeft"))+parseInt(i.css("paddingRight")),a=r?0:parseInt(i.css("paddingTop"))+parseInt(i.css("paddingBottom")),s=i._width()+o,l=i._height()+a;if(r){var d=$(window).width(),c=$(window).height();o=parseInt($(document.body).css("paddingLeft"))+parseInt($(document.body).css("paddingRight")),a=parseInt($(document.body).css("paddingTop"))+parseInt($(document.body).css("paddingBottom")),s=Math.max(d,$(document.body).width()+o),l=Math.max(c,$(document.body).height()+a)}return n._outerHeight(l),e.fireEvent("onModalSizeChange",[n,t]),e}}),t}),define("Nex/tab/SimpleTab",["require","Nex/panel/Panel"],function(e){e("Nex/panel/Panel");var t=Nex.define("Nex.tab.SimpleTab",{extend:"Nex.panel.Panel",alias:"Nex.SimpleTab",xtype:"simpletab stab stabpanel",configs:function(e){return{prefix:"nexstab-",autoResize:!0,renderTo:document.body,disabledItems:!0,border:!1,autoScroll:!1,denyEvents:!0,borderCls:[e.borderCls,"nex-stab-border"].join(" "),containerCls:[e.containerCls,"nex-stab"].join(" "),autoScrollCls:[e.autoScrollCls,"nex-stab-auto-scroll"].join(" "),tabHeaderSelectionable:!0,firstShowAnim:!0,animSwitch:!1,switchEasing:"easeOutCirc",switchDuration:200,showTabTips:!1,tabLayout:"top",forceFit:!1,tabHeaderCls:"",tabHeaderWidth:0,tabBodyCls:"",hideToNone:!0,width:"100%",height:"100%",lazyLoad:!0,titleFormat:null,defaultShowTab:null,_tabsData:function(){return{id:null,title:"",html:"",hcls:"",bcls:"",style:{},padding:null,autoShow:!1,autoScroll:!1,closable:!1,items:[],icon:"",iconCls:"",disabled:!1}},defaults:{},items:[],views:{},cls:"",switchOnType:1}}});return t.override({initComponent:function(){return this.callParent(arguments),this.initTab(),this},initTab:function(){var e=this,t=e.configs;t.items=$.isArray(t.items)?t.items.concat([]):[],e._initTabsData()._setTabHeader()._setTabEvents()._setTabLayout()},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onHeaderCreate._sys",function(e){e.addClass("nex-panel-tab-header"),$(">.nex-panel-tools",e).addClass("nex-panel-tab-tools")},e),e.bind("onBodyCreate._sys",function(e){e.addClass("nex-stab-body")},e),e.bind("onFooterCreate._sys",function(e){e.addClass("nex-stab-footer")},e),e.bind("onCreate._sys",e._initTab,e),e.bind("onTabClick._sys",e._clickToShow,e),e.bind("onTabOver._sys",e._setTabOverCls,e),e.bind("onTabOver._sys",e._overToShow,e),e.bind("onTabOut._sys",e._unsetTabOverCls,e),e},_parseTabData:function(e){var t=this,n=t.configs;if($.isPlainObject(e)&&e.__init)return e;var e=$.extend({},n._tabsData.call(t),n.defaults,e);return(null===e.id||""===e.id||"string"!=typeof e.id)&&(e.id="tab_"+Nex.uuid()),e.__init=!0,t._tabItems[e.id]=e,e},_tabItems:{},_initTabsData:function(){var e=this,t=e.configs;e._tabItems={};for(var n={},i=t.items.length,r=0;i>r;r++){var o=t.items[r];n=e._parseTabData(o),t.items[r]=n}return e},setItems:function(e){var t=$.isArray(e)?e.concat([]):[];return this.C("items",t),this._initTabsData()},getItems:function(){return this.configs.items},getItemData:function(e){return this._tabItems[e]},getTabData:function(e){return this._tabItems[e]},_doSetViewSize:function(){var e=this,t=this.configs;e.callParent(arguments);var n=e.getContainer(),i=e.getTabHeader(),r=$("#"+t.id+"_header_inner"),o=e.getTabBody(),a=n._width();n._height();if(e.isAutoWidth())i._removeStyle("width"),parseInt(t.tabHeaderWidth)||r._removeStyle("width"),t.forceFit&&$(".nex-stab-header-wrap",i)._removeStyle("width"),$(">.nex-stab-body-item",o)._removeStyle("width");else{i.width(a);var s=i._width(),l=-1===String(t.tabHeaderWidth).indexOf("%")?!1:!0,d=parseFloat(t.tabHeaderWidth);l&&(d=s*(d/100)),d=parseInt(d);var c=s;d&&(c=d),r.width(c),t.forceFit?$(".nex-stab-header-wrap",i).width(c):$(".nex-stab-header-wrap",i)._removeStyle("width"),$(">.nex-stab-body-item",o)._outerWidth(o._width())}e.isAutoHeight()?$(">.nex-stab-body-item",o)._removeStyle("height"):$(">.nex-stab-body-item",o)._outerHeight(o._height())},_clickToShow:function(e,t,n){var i=this,n=i.configs;1===n.switchOnType&&i.switchTab(e)},_overToShow:function(e,t,n){var i=this,n=i.configs;0===n.switchOnType&&i.switchTab(e)},unselectHeader:function(){var e=this,t=e.configs;return t.views.header.bind("selectstart.tabs",function(){return!1}),e},_getTabHeaderInner:function(e){var t=this,n=t.configs,i=[],r=e.closable?"nex-stab-header-item-closable":"",o=e.icon||e.iconCls?!0:!1,a=e.disabled?"nex-stab-header-item-disabled":"";if(i.push('<td><div class="nex-stab-header-item '+[a,r,e.hcls].join(" ")+'" id="'+n.id+"_"+e.id+'_header" tid="'+e.id+'"><div class="nex-stab-item-inner">'),$.isFunction(n.titleFormat)&&(e.title=n.titleFormat.call(t,e.title,e,n)),o){var s=e.icon?"background-image: url("+e.icon+")":"";i.push('<span class="nex-stab-item-icon '+e.iconCls+'" style="'+s+'"></span>')}return i.push('<span class="nex-stab-item-text">'+e.title+"</span>"),r&&i.push('<a href="javascript:void(0);" class="nex-stab-item-close"></a>'),i.push("</div></div></td>"),i.join("")},_getTabHeaderTpl:function(){for(var e=this,t=e.configs,n=['<div class="nex-stab-header '+t.tabHeaderCls+'" id="'+t.id+'_tab_header">','<div id="'+t.id+'_header_inner" class="nex-stab-header-inner">','<table cellpadding="0" cellspacing="0" border="0" class="nex-stab-header-wrap">','<tbody><tr id="'+t.id+'_items_wraper">'],i=t.items,r=i.length,o=0;r>o;o++)n.push(e._getTabHeaderInner(i[o]));return n.push("</tr></tbody></table></div></div>"),n.join("")},_setTabHeader:function(){var e=this,t=e.configs,n=e.getContainer(),i=$(e._getTabHeaderTpl());return n.append(i),t.views.tabHeader=i,t.tabHeaderSelectionable||i.disableSelection(),e.fireEvent("onTabHeaderCreate",[i],t),e},_setTabEvents:function(){var e=this,t=this.configs,n=e.getTabHeader();return n.undelegate("._tab").delegate(".nex-stab-header-item",{"click._tab":function(n){if(!$(this).hasClass("nex-stab-header-item-disabled")){var i=$(this).attr("tid"),r=e.getTabData(i);e.fireEvent("onTabClick",[i,r,t])}},"dblclick._tab":function(n){if(!$(this).hasClass("nex-stab-header-item-disabled")){var i=$(this).attr("tid"),r=e.getTabData(i);e.fireEvent("onTabDblClick",[i,r,t])}},"mouseenter._tab":function(n){if(!$(this).hasClass("nex-stab-header-item-disabled")){var i=$(this).attr("tid"),r=e.getTabData(i);e.fireEvent("onTabOver",[i,r,t])}},"mouseleave._tab":function(n){if(!$(this).hasClass("nex-stab-header-item-disabled")){var i=$(this).attr("tid"),r=e.getTabData(i);e.fireEvent("onTabOut",[i,r,t])}}}),n.undelegate("._tabc").delegate(".nex-stab-item-close",{"click._tabc":function(t){var n=$(this).closest(".nex-stab-header-item");if(!n.hasClass("nex-stab-header-item-disabled")){var i=n.attr("tid");e.removeTab(i),t.preventDefault(),t.stopPropagation()}}}),e.fireEvent("onSetTabEvents",[t]),e},_setTabLayout:function(){var e=this,t=this.configs,n=(t.tabLayout+"").toLowerCase();switch(t.tabLayout=n,e._removeAlignCls(),n){case"top":e._setTopAlign();break;case"bottom":e._setBottomAlign();break;case"right":e._setRightAlign();break;case"left":e._setLeftAlign();break;default:e._setTopAlign()}return e},setTabLayout:function(e){var t=this,n=this.configs,i=t.fireEvent("onBeforeTabLayoutChange",[e,n]);return i===!1?i:(n.tabLayout=e,t._setTabLayout(),t.fireEvent("onTabLayoutChange",[e,n]),t)},_removeAlignCls:function(){var e=this,t=(this.configs,e.getTabHeader()),n=e.getTabBody();t.removeClass("nex-stab-header-top nex-stab-header-bottom nex-stab-header-right nex-stab-header-left"),n.removeClass("nex-stab-body-top nex-stab-body-bottom nex-stab-body-right nex-stab-body-left"),t.css({height:""})},_setTopAlign:function(){var e=this,t=(this.configs,e.getContainer()),n=e.getHeader(),i=e.getTabHeader(),r=e.getTabBody();i.addClass("nex-stab-header-top"),r.addClass("nex-stab-body-top"),n?n.after(i):t.prepend(i),e._removeHorizontalView("tabHeader"),e._setVerticalView("tabHeader",i)},_setBottomAlign:function(){var e=this,t=(this.configs,e.getContainer()),n=e.getTabHeader(),i=e.getTabBody();n.addClass("nex-stab-header-bottom"),i.addClass("nex-stab-body-bottom"),t.append(n),e._removeHorizontalView("tabHeader"),e._setVerticalView("tabHeader",n)},_setTabOverCls:function(e,t,n){var i=this,r=i.getTabItemHeader(e);r.addClass("nex-stab-header-item-over")},_unsetTabOverCls:function(e,t,n){var i=this,r=i.getTabItemHeader(e);r.removeClass("nex-stab-header-item-over")},getTabHeader:function(){var e=this.configs;return e.views.tabHeader},getTabBody:function(){var e=this.configs;return e.views.body},getTabItemHeader:function(e){var t=this.configs;return $("#"+t.id+"_"+e+"_header")},getTabItemBody:function(e){var t=this.configs;return $("#"+t.id+"_"+e+"_body")},empytTabContent:function(e){var t=this,n=(t.C(),t.getTabItemBody(e));return n.empty(),Nex.gc(),t},addTabContent:function(e,t){var n,i=this;i.C();if(t!==n){var r=i.getTabItemBody(e);return r.length&&i.addComponent(r,t),i}},_resizeTabItem:function(e){var t=this,n=(this.configs,t.getContainer(),t.getTabHeader(),t.getTabBody()),i=t.getTabItemBody(e);if(t.isAutoWidth())i._removeStyle("width");else{var r=n._width();i._outerWidth(r)}if(t.isAutoHeight())i._removeStyle("height");else{var o=n._height();i._outerHeight(o)}return t},_setTabBodyItem:function(e){var t=this,n=this.configs,i=t.getTabData(e);if(!i)return t;var r=t.getTabBody();if(t.getTabItemBody(e).length)return t;var o=$('<div class="'+["nex-stab-body-item",i.bcls].join(" ")+'" id="'+n.id+"_"+i.id+'_body" tid="'+i.id+'"></div>');r.append(o),i.padding&&o.css("padding",i.padding),o.css(i.style),i.autoScroll&&o.addClass("nex-stab-body-item-auto-scroll"),t._resizeTabItem(e);var a=i.html;t.addComponent(o,a);var a=i.items;return t.addComponent(o,a),t},getCurrentTab:function(){var e=this;this.configs;if(null!==e._currentTab)return e._currentTab;var t=e.getTabHeader(),n=$(".nex-stab-header-item-selected",t);return n.length?n.attr("tid"):null},getActiveTab:function(){return this.getCurrentTab()},getCurrentTabData:function(){return this.getTabData(this.getCurrentTab())},_isAfterActiveTab:function(e,t){var n=this.configs,i=!0,r=t;return null===r?i:e===r?i:($.each(n.items,function(t,n){return n.id===r?(i=!0,!1):n.id===e?(i=!1,!1):void 0}),i)},_checkToCreateTab:function(e){return this.getTabItemBody(e).length||this._setTabBodyItem(e),this},_currentTab:null,__zIndex:2,_showTab:function(e,t){var n=this,i=this.configs;n._checkToCreateTab(e);var r=n.getTabBody(),o=n._currentTab;n._currentTab=e;var a=n.getTabItemHeader(e),s=n.getTabItemBody(e);i.hideToNone&&s.show();var l=r.outerWidth();a.addClass("nex-stab-header-item-selected");var d=function(){$.isFunction(t)&&t(),n._hideTab(o),s.addClass("nex-stab-body-item-show"),s.css({left:0,top:0}),n.fireEvent("onShowTab",[e,i])},c=parseFloat(r.css("paddingLeft"),10)||0,u=parseFloat(r.css("paddingTop"),10)||0,h=n._isAfterActiveTab(e,o);return i.animSwitch?(s.css({zIndex:n.__zIndex++,top:u,opacity:0,left:h?l:-l}),s.stop(!0,!0).animate({left:c,opacity:1},i.switchDuration,i.switchEasing,function(){d()})):(s.css({zIndex:n.__zIndex++,left:0,top:0}),d()),n},_hideTab:function(e,t){var n=this,i=this.configs,r=n.getTabItemHeader(e),o=n.getTabItemBody(e);return r.removeClass("nex-stab-header-item-selected"),o.removeClass("nex-stab-body-item-show")._removeStyle("left")._removeStyle("top")._removeStyle("z-index"),i.hideToNone&&o.hide(),$.isFunction(t)&&t(),n.fireEvent("onHideTab",[e,i]),n},_getTabItemsWrap:function(){var e=this.configs;return $("#"+e.id+"_items_wraper")},_addTab:function(e,t){var n=this,i=this.configs,e=n._parseTabData(e),t=n._undef(t,!0),r=n._getTabItemsWrap(),o=$(n._getTabHeaderInner(e));return t?(i.items.push(e),r.append(o)):(i.items.splice(0,0,e),r.prepend(o)),e.id},addTab:function(e,t){var n=this,i=this.configs,r=t,o={};$.isPlainObject(e)?o=e:(o.title=String(e),"boolean"!==$.type(r)&&(o.html=r)),t="boolean"===$.type(t)?t:!0;var e=n._parseTabData(o),a=n.fireEvent("onBeforeAddTab",[e.id,e,i]);return a===!1?n:(n._addTab(e,t),e.autoShow&&n.switchTab(e.id),n.fireEvent("onAddTab",[e.id,e,i]),e.id)},_removeTab:function(e){for(var t=this,n=this.configs,i=n.items,r=t.getCurrentTab(),o=0,a=i.length;a>o&&(i[o].disabled||i[o].id!=e);o++);if(r==e){var s=o+1>a-1?o-1:o+1;i[s]&&!i[s].disabled?t.switchTab(i[s].id):t._currentTab=null}t.empytTabContent(e);var l=t.getTabItemHeader(e),d=t.getTabItemBody(e);return l.parent().remove(),d.remove(),delete t._tabItems[e],i.splice(o,1),t},removeTab:function(e){var t=this,n=this.configs,i=t.getTabData(e);if(!i)return t;var r=t.fireEvent("onBeforeRemoveTab",[e,i,n]);return r===!1?t:(t._removeTab(e),t.fireEvent("onRemoveTab",[e,i,n]),t)},removeTabs:function(e){var t=this,n=(this.configs,$.isArray(e)?e:[e]),i=n.length;if(!i)return t;for(var r=t.getCurrentTab(),o=null,a=0;i>a;a++){var s=n[a];s!=r?t.removeTab(s):o=s}return o&&t.removeTab(o),t},closeTab:function(e){return this.removeTab(e)},removeAllTab:function(){var e=this,t=this.configs,n=[];return $.each(t.items,function(e,t){n.push(t.id)}),e.removeTabs(n),e},removeAllDisabledTab:function(){var e=this,t=this.configs,n=[];return $.each(t.items,function(e,t){t.disabled&&n.push(t.id)}),e.removeTabs(n),e},removeAllCloseableTab:function(){var e=this,t=this.configs,n=[];return $.each(t.items,function(e,t){t.closable&&n.push(t.id)}),e.removeTabs(n),e},switchTab:function(e){var t=this,n=this.configs,i=t.getCurrentTab();if(i==e)return!0;var r=t.getTabData(e),o=t.fireEvent("onBeforeSwitchTab",[e,r,n]);return o===!1?!1:(t._showTab(e),t.fireEvent("onSwitchTab",[e,r,n]),t.fireEvent("onTabChange",[e,r,n]),!0)},_initTab:function(){var e=this,t=this.configs,n=t.items,i=n.length;if(!t.lazyLoad)for(var r=0;i>r;r++)e._setTabBodyItem(n[r].id);return e._showDefaultTab(),e},switchFirstTab:function(){var e=this,t=this.configs,n=t.items;if(!n.length)return e;var i=n[0];return e.switchTab(i.id),e},switchLastTab:function(){var e=this,t=this.configs,n=t.items;if(!n.length)return e;var i=n[n.length-1];return e.switchTab(i.id),e},_showDefaultTab:function(){var e=this,t=this.configs,n=t.items;if(!n.length)return e;var i=t.defaultShowTab;$.each(n,function(e,t){t.disabled||(null===i&&(i=t.id),t.autoShow&&(i=t.id))});var r=t.animSwitch;return t.firstShowAnim||(t.animSwitch=!1),e._showTab(i),t.animSwitch=r,e}}),t}),define("Nex/tab/Tab",["require","Nex/tab/SimpleTab"],function(e){e("Nex/tab/SimpleTab");var t=Nex.define("Nex.tab.Tab",{extend:"Nex.tab.SimpleTab",alias:"Nex.Tab",xtype:"tabpanel tab",configs:function(e){return{prefix:"nextab-",borderCls:[e.borderCls,"nex-tab-border"].join(" "),containerCls:[e.containerCls,"nex-tab"].join(" "),autoScrollCls:[e.autoScrollCls,"nex-tab-auto-scroll"].join(" "),tabLayout:"top",sideWidth:150,forceFit:!1,tabHeaderCls:"",tabBodyCls:"",tabScrollAnimate:!0,tabScrollDuration:200,tabScrollEasing:"easeOutQuad",scrollStep:100,scrollDelay:100,scrollSpeed:10}}});return t.override({sysEvents:function(){var e=this;e.configs;return e.bind("onCreate._sys",e._checkScroll,e),e.callParent(arguments),e.bind("onAddTab._sys",e._checkScroll,e),e.bind("onRemoveTab._sys",e._checkScroll,e),e.bind("onRemoveTab._sys",e._checkScrollEdge,e),e.bind("onAddTab._sys",e._isDisabledSTools,e),e.bind("onSwitchTab._sys",e.scrollToTab,e),e.bind("onTabLayoutChange._sys",e._refreshTabScrollBtn,e),e.bind("onSizeChange._sys",e._refreshTabScrollBtn,e),e},_setTabLayout:function(){var e=this;this.configs;return e.callParent(arguments),e.isInit()||(e.refreshViewSize(),e.scrollToTab(e.getCurrentTab())),e},_setLeftAlign:function(){var e=this,t=(this.configs,e.getTabHeader()),n=e.getTabBody();t.addClass("nex-stab-header-left"),n.addClass("nex-stab-body-left");var i=e._getTabItemsWrap();i.css("marginLeft",""),e._removeVerticalView("tabHeader"),e._setHorizontalView("tabHeader",t)},_setRightAlign:function(){var e=this,t=(this.configs,e.getTabHeader()),n=e.getTabBody();t.addClass("nex-stab-header-right"),n.addClass("nex-stab-body-right");var i=e._getTabItemsWrap();i.css("marginLeft",""),e._removeVerticalView("tabHeader"),e._setHorizontalView("tabHeader",t)},_setHLViewSize:function(){var e=this,t=this.configs,n=e.getContainer(),i=e.getTabHeader(),r=$("#"+t.id+"_header_inner"),o=e.getTabBody(),a=n._width(),s=n._height();i._removeStyle("width height left top right"),r._removeStyle("width height left top right"),o._removeStyle("margin-left margin-right");var l=parseInt(t.sideWidth,10),d=a-l;i._outerWidth(l),r._outerWidth(i._width()),i.css({left:n.css("paddingLeft"),top:n.css("paddingTop")}),o.css("marginLeft",l),e.isAutoWidth()?(o._removeStyle("width"),$(">.nex-stab-body-item",o)._removeStyle("width")):(o._outerWidth(d),$(">.nex-stab-body-item",o)._outerWidth(o._width())),e.isAutoHeight()?(i._removeStyle("height"),r._removeStyle("height"),$(">.nex-stab-body-item",o)._removeStyle("height")):(i._outerHeight(s),r._outerHeight(i._height()),$(">.nex-stab-body-item",o)._outerHeight(o._height()))},_setHRViewSize:function(){var e=this,t=this.configs,n=e.getContainer(),i=e.getTabHeader(),r=$("#"+t.id+"_header_inner"),o=e.getTabBody(),a=n._width(),s=n._height();i._removeStyle("width height left top right"),r._removeStyle("width height left top right"),o._removeStyle("margin-left margin-right");var l=parseInt(t.sideWidth,10),d=a-l;i._outerWidth(l),r._outerWidth(i._width()),i.css({right:n.css("paddingRight"),top:n.css("paddingTop")}),o.css("marginRight",l),e.isAutoWidth()?(o._removeStyle("width"),$(">.nex-stab-body-item",o)._removeStyle("width")):(o._outerWidth(d),$(">.nex-stab-body-item",o)._outerWidth(o._width())),e.isAutoHeight()?(i._removeStyle("height"),r._removeStyle("height"),$(">.nex-stab-body-item",o)._removeStyle("height")):(i._outerHeight(s),r._outerHeight(i._height()),$(">.nex-stab-body-item",o)._outerHeight(o._height()))},_setVViewSize:function(){var e=this,t=this.configs,n=e.getContainer(),i=e.getTabHeader(),r=$("#"+t.id+"_header_inner"),o=e.getTabBody(),a=n._width();n._height();if(i._removeStyle("width height left top right"),r._removeStyle("width height left top right"),o._removeStyle("margin-left margin-right"),e.isAutoWidth())i._removeStyle("width"),parseInt(t.tabHeaderWidth)||r._removeStyle("width"),$(">.nex-stab-body-item",o)._removeStyle("width");else{i._outerWidth(a);var s=i._width(),l=-1===String(t.tabHeaderWidth).indexOf("%")?!1:!0,d=parseFloat(t.tabHeaderWidth);l&&(d=s*(d/100)),d=parseInt(d);var c=s;d&&(c=d),r.width(c),$(">.nex-stab-body-item",o)._outerWidth(o._width())}e.isAutoHeight()?$(">.nex-stab-body-item",o)._removeStyle("height"):$(">.nex-stab-body-item",o)._outerHeight(o._height())},doSetViewSize:function(){var e=this,t=this.configs,n=String(t.tabLayout).toLowerCase();switch(e.superclass.superclass.doSetViewSize.apply(this,arguments),n){case"left":e._setHLViewSize();break;case"right":e._setHRViewSize();break;default:e._setVViewSize()}},_getTabItemsWrap:function(){var e=this.configs;return $("#"+e.id+"_items_t")},_getTabHeaderInner:function(e){var t=this,n=t.configs,i=[],r=e.closable?"nex-stab-header-item-closable":"",o=e.icon||e.iconCls?!0:!1,a=e.disabled?"nex-stab-header-item-disabled":"";if(i.push('<div class="nex-stab-header-item nex-tab-header-item '+[a,r,e.hcls].join(" ")+'" id="'+n.id+"_"+e.id+'_header" tid="'+e.id+'"><div class="nex-stab-item-inner">'),$.isFunction(n.titleFormat)&&(e.title=n.titleFormat.call(t,e.title,e,n)),o){var s=e.icon?"background-image: url("+e.icon+")":"";i.push('<span class="nex-stab-item-icon '+e.iconCls+'" style="'+s+'"></span>')}return i.push('<span class="nex-stab-item-text">'+e.title+"</span>"),r&&i.push('<a href="javascript:void(0);" class="nex-stab-item-close"></a>'),i.push("</div></div>"),i.join("")},_getTabTools:function(){var e=[];return e.push('<div class="nex-tab-tool nex-tab-left"></div>'),e.push('<div class="nex-tab-tool nex-tab-right"></div>'),e.join("")},_getTabHeaderTpl:function(){for(var e=this,t=e.configs,n=['<div class="nex-stab-header nex-tab-header '+t.tabHeaderCls+'" id="'+t.id+'_tab_header">','<div id="'+t.id+'_header_inner" class="nex-stab-header-inner nex-tab-header-inner">','<div id="'+t.id+'_items_wraper" class="nex-stab-header-wrap nex-tab-header-wrap">','<div id="'+t.id+'_items_t" class="nex-tab-header-wrap-inner">'],i=t.items,r=i.length,o=0;r>o;o++)n.push(e._getTabHeaderInner(i[o]));return n.push('</div><div class="nex-tab-clear"></div></div>'),n.push('<div id="'+t.id+'_tools" class="nex-tab-tools clearFix">'+e._getTabTools()+"</div>"),n.push("</div></div>"),n.join("")},__scroll_t:0,__scroll_t2:0,_setTabEvents:function(){var e=this,t=e.configs;e.callParent(arguments);var n=e._getScrollTools(),i=e.getTabHeader();return n.disableSelection(),i.undelegate("._tool"),i.delegate(".nex-tab-left",{"click._tool":function(n){if(!$(this).hasClass("nex-tab-tool-disabled")){var i=e.fireEvent("onTabLeftClick",[t]);i!==!1&&e.scrollTabLeft()}},"mouseenter._tool":function(n){$(this).hasClass("nex-tab-tool-disabled")||e.fireEvent("onTabLeftOver",[t])},"mouseleave._tool":function(n){$(this).hasClass("nex-tab-tool-disabled")||e.fireEvent("onTabLeftOut",[t])},"mousedown._tool":function(){$(this).hasClass("nex-tab-tool-disabled")||(e.fireEvent("onTabLeftMouseDown",[t]),e.__scroll_t&&(clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0),e.__scroll_t=setTimeout(function(){e.__scroll_t2=setInterval(function(){e._scrollTab(e._getCurrentLeft()+10,!1)},t.scrollSpeed)},t.scrollDelay),$(document).one("mouseup._tool",function(){clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0}))},"mouseup._tool":function(){$(this).hasClass("nex-tab-tool-disabled")||(e.fireEvent("onTabLeftMouseUp",[t]),clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0)}}).delegate(".nex-tab-right",{"click._tool":function(n){if(!$(this).hasClass("nex-tab-tool-disabled")){var i=e.fireEvent("onTabRightClick",[t]);i!==!1&&e.scrollTabRight()}},"mouseenter._tool":function(n){$(this).hasClass("nex-tab-tool-disabled")||e.fireEvent("onTabRightOver",[t])},"mouseleave._tool":function(n){$(this).hasClass("nex-tab-tool-disabled")||e.fireEvent("onTabRightOut",[t])},"mousedown._tool":function(){$(this).hasClass("nex-tab-tool-disabled")||(e.fireEvent("onTabRightMouseDown",[t]),e.__scroll_t&&(clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0),e.__scroll_t=setTimeout(function(){e.__scroll_t2=setInterval(function(){e._scrollTab(e._getCurrentLeft()-10,!1)},t.scrollSpeed)},t.scrollDelay),$(document).one("mouseup._tool",function(){clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0}))},"mouseup._tool":function(){$(this).hasClass("nex-tab-tool-disabled")||(e.fireEvent("onTabRightMouseUp",[t]),clearTimeout(e.__scroll_t),clearTimeout(e.__scroll_t2),e.__scroll_t=0,e.__scroll_t2=0)}}),this},_removeTab:function(e){for(var t=this,n=this.configs,i=n.items,r=t.getCurrentTab(),o=0,a=i.length;a>o&&(i[o].disabled||i[o].id!=e);o++);if(r==e){var s=o+1>a-1?o-1:o+1;i[s]&&!i[s].disabled?t.switchTab(i[s].id):t._currentTab=null}t.empytTabContent(e);var l=t.getTabItemHeader(e),d=t.getTabItemBody(e);return l.remove(),d.remove(),delete t._tabItems[e],i.splice(o,1),t},_disabledTabLeft:function(){var e=this,t=(e.C(),e._getScrollTools());$(".nex-tab-left",t).addClass("nex-tab-tool-disabled")},_disabledTabRight:function(){var e=this,t=(e.C(),e._getScrollTools());$(".nex-tab-right",t).addClass("nex-tab-tool-disabled")},_enableTabLeft:function(){var e=this,t=(e.C(),e._getScrollTools());$(".nex-tab-left",t).removeClass("nex-tab-tool-disabled")},_enableTabRight:function(){var e=this,t=(e.C(),e._getScrollTools());$(".nex-tab-right",t).removeClass("nex-tab-tool-disabled")},_isDisabledSTools:function(){var e=this,t=e.configs;if("top"===t.tabLayout||"bottom"===t.tabLayout){var n=$("#"+t.id+"_header_inner"),i=e._getScrollTools(),r=$("#"+t.id+"_items_t"),o=0;null!==e.__lastLeft?o=e.__lastLeft:(o=parseInt(r.css("marginLeft")),o=isNaN(o)?0:o),o>=0?e._disabledTabLeft():e._enableTabLeft();var a=n.width()-i.outerWidth(),s=r.outerWidth(),l=a-s;l=l>=0?0:l,l>=0||Math.abs(o)>=Math.abs(l)?e._disabledTabRight():e._enableTabRight()}},__lastLeft:null,_scrollTab:function(e,t){var n=this,i=n.configs;if("top"===i.tabLayout||"bottom"===i.tabLayout){var r=$("#"+i.id+"_items_t"),o=$("#"+i.id+"_header_inner"),a=o.width()-n._getScrollBarWidth(),s=r.outerWidth(),l=a-s;if(l=l>=0?0:l,e=e>=0?0:e,e=Math.abs(e)>Math.abs(l)?l:e,null!==n.__lastLeft&&n.__lastLeft===e)return n;n.__lastLeft=e;var r=$("#"+i.id+"_items_t");return i.tabScrollAnimate&&t!==!1?r.stop(!0,!0).animate({marginLeft:e},i.tabScrollDuration,i.tabScrollEasing,function(){$.isFunction(t)&&t.call(n)}):r.css("marginLeft",e),n._isDisabledSTools(),n}},_getCurrentLeft:function(){var e=this,t=e.configs;if("top"===t.tabLayout||"bottom"===t.tabLayout){if(null!==e.__lastLeft)return e.__lastLeft;var n=$("#"+t.id+"_items_t"),i=n.css("marginLeft");return isNaN(parseFloat(i))?0:parseFloat(i)}},_getScrollToTabPos1:function(e,t,n,i){var r=this,o=(r.configs,arguments),a=o[o.length-1],s=t||e.parent(),n=n,l=e,i=isNaN(parseInt(a))?s.css("marginLeft"):parseInt(a),d=0,c=i;c=isNaN(parseFloat(c))?0:parseFloat(c);var u=n.offset(),h=parseInt(n.css("borderLeftWidth"))||0,f=parseInt(n.css("paddingLeft"))||0;u.left+=h+f;var g=n.width()-r._getScrollBarWidth(),p=l.offset(),v=l.outerWidth(),m=0;return u.left>p.left?m=u.left-p.left:u.left+g<p.left+v&&(m=u.left+g-(p.left+v)),d=c+m},_getScrollToTabPos2:function(e,t,n){var i=this,r=(i.configs,arguments),o=r[r.length-1],a=e,n=isNaN(parseInt(o))?t.scrollTop():parseInt(o),s=0,l=n;l=isNaN(parseFloat(l))?0:parseFloat(l);var d=t.offset(),c=parseInt(t.css("borderTopWidth"))||0,u=parseInt(t.css("paddingTop"))||0;d.top+=c+u;var h=t.height(),f=a.offset(),g=a.outerHeight(),p=0;return d.top>f.top?p=f.top-d.top:d.top+h<f.top+g&&(p=f.top+g-(d.top+h)),s=l+p},scrollToTab:function(e){var t=this,n=t.configs;if(t._toolBarShow){var i=$("#"+n.id+"_header_inner"),r=$("#"+n.id+"_items_t"),o=t.getTabItemHeader(e);if(o.length){var a=0;if("top"===n.tabLayout||"bottom"===n.tabLayout)a=t._getScrollToTabPos1(o,r,i),t._scrollTab(a);else{i.scrollTop();a=t._getScrollToTabPos2(o,i,i.scrollTop()),i.scrollTop(Math.abs(a))}}}},scrollTabLeft:function(){var e=this,t=e.configs;if(e._toolBarShow&&("top"===t.tabLayout||"bottom"===t.tabLayout)){var n=$("#"+t.id+"_items_t"),i=n.css("marginLeft");i=isNaN(parseFloat(i))?0:parseFloat(i),i+=t.scrollStep,e._scrollTab(i)}},scrollTabRight:function(){var e=this,t=e.configs;if(e._toolBarShow&&("top"===t.tabLayout||"bottom"===t.tabLayout)){var n=$("#"+t.id+"_items_t"),i=n.css("marginLeft");i=isNaN(parseFloat(i))?0:parseFloat(i),i-=t.scrollStep,e._scrollTab(i)}},_getTabCast:function(){var e=this,t=e.configs;return"top"===t.tabLayout||"bottom"===t.tabLayout?"horizontal":"vertical"},_toolBarShow:!1,_checkScroll:function(){var e=this,t=e.configs,n=$("#"+t.id+"_header_inner"),i=$("#"+t.id+"_items_t"),r=!1,o=e._getTabCast();if(r="horizontal"===o?n._width()>i._width()?!1:!0:n._height()>i._height()?!1:!0,e._toolBarShow=r,"horizontal"!==o)return e;var a=e._getScrollTools();return r?a.stop(!0,!0).fadeIn():a.stop(!0,!0).fadeOut(),e},_getScrollTools:function(){var e=this.configs;return $("#"+e.id+"_tools")},_getScrollBarWidth:function(){var e=this.configs;return this._toolBarShow?$("#"+e.id+"_tools").outerWidth():0},_checkScrollEdge:function(){var e=this,t=e.C();if("top"===t.tabLayout||"bottom"===t.tabLayout){var n=$("#"+t.id+"_header_inner"),i=$("#"+t.id+"_items_t"),r=n._width()-e._getScrollBarWidth(),o=i.outerWidth(),a=parseInt(i.css("marginLeft"));a=isNaN(a)?0:a;var s=o-Math.abs(a),l=r-s,d=a+l;d=d>0?0:d,l>=0&&e._scrollTab(d)}},_refreshTabScrollBtn:function(e){var t=this._getTabCast();if("horizontal"!==t){var n=this._getScrollTools();n.stop(!0,!0).fadeOut()}this._checkScroll(),this._checkScrollEdge(),this.scrollToTab(this.getCurrentTab())}}),t}),define("Nex/layout/Layout",["require","Nex/drag/Drag","Nex/container/Container"],function(e){e("Nex/drag/Drag"),e("Nex/container/Container");var t=Nex.define("Nex.layout.Layout",{extend:"Nex.container.Container",alias:"Nex.Layout",xtype:"layout",configs:function(e){return{prefix:"nexLayout-",autoDestroy:!0,autoResize:!0,_hasBodyView:!1,_checkScrollBar:!1,position:"relative",renderTo:document.body,width:"100%",height:"100%",easing:"easeOutCirc",layouts:["north","south","west","east"],isCreate:!1,closeTime:300,cls:"",borderCls:[e.borderCls,"nex-layout-border"].join(" "),containerCls:[e.containerCls,"nex-layout nex-layout-wrap"].join(" "),autoScrollCls:"",autoScrollRegionCls:"nex-layout-auto-scroll",borderRegionCls:"nex-layout-region-border",cssText:"",style:{},bodyCls:"",bodyStyle:{},padding:null,dblclickToClose:!0,_north:{handles:"s",split:!0,splitBtn:!0,splitSize:5,resizable:!0,isClosed:!1,autoScroll:!1,selectionable:!0,border:!0,borderCls:"",attrs:{},cls:"",clsText:"",style:{},padding:0,html:"",items:[],maxSize:0,minSize:28,height:80},_south:{handles:"n",split:!0,splitBtn:!0,splitSize:5,resizable:!0,isClosed:!1,autoScroll:!1,selectionable:!0,border:!0,borderCls:"",attrs:{},cls:"",clsText:"",style:{},padding:0,html:"",items:[],maxSize:0,minSize:28,height:40},_east:{handles:"w",split:!0,splitBtn:!0,splitSize:5,resizable:!0,isClosed:!1,autoScroll:!1,selectionable:!0,border:!0,borderCls:"",attrs:{},cls:"",
clsText:"",style:{},padding:0,html:"",items:[],maxSize:0,minSize:28,width:80},_west:{handles:"e",split:!0,splitBtn:!0,splitSize:5,resizable:!0,isClosed:!1,autoScroll:!1,selectionable:!0,border:!0,borderCls:"",attrs:{},cls:"",clsText:"",style:{},padding:0,html:"",items:[],maxSize:0,minSize:28,width:160},_center:{minWidth:20,minHeight:20,autoScroll:!1,selectionable:!0,border:!0,borderCls:"",attrs:{},cls:"",clsText:"",style:{},padding:0,html:"",items:[]},maxWidth:0,minWidth:0,maxHeight:0,minHeight:0,dir:"",denyEvents:["scroll"],events:{onCreate:$.noop,onBeforeRegionCreate:$.noop,onRegionCreate:$.noop,onBeforeRegionRemove:$.noop,onRegionRemove:$.noop,onBeforeSplitDrag:$.noop,onSplitDrag:$.noop,onSplitStopDrag:$.noop}}}});return t.override({initComponent:function(e){var t=this;t.initLayoutOptions(e),t.setBody(),t.initLayout()},initLayoutOptions:function(e){for(var t=["north","south","west","east","center"],n={},i=0;i<t.length;i++){var r={},o=t[i];$.extend(r,e["_"+o],e[o]||{}),n[o]=r}e=$.extend(e,n)},_setPadding:function(){var e=this,t=e.configs,n=e.getContainer();null!==t.padding&&n.css("padding",t.padding)},getBody:function(){var e=this,t=e.configs;return t.views.body},setBody:function(){var e=this,t=e.configs,n=t.views.container,i=$('<div class="nex-layout-container '+t.bodyCls+'" id="'+t.id+'_container"></div>');return t.views.body=i,n.append(i),i.css(t.bodyStyle),e.fireEvent("onBodyCreate",[i,t]),e},getBodyWidth:function(){var e=this.getBody();return e.width()},getBodyHeight:function(){var e=this.getBody();return e.height()},initLayout:function(){var e=this,t=e.configs;e.fireEvent("onInitComponent",[t]),e.lockEvent("onSizeChange"),e.resetSize(),e.unLockEvent("onSizeChange"),e._createLayouts(),e.fireEvent("onCreate",[t]),t._isInit=!1},sysEvents:function(){var e=this;e.configs;e.callParent(arguments),e.bind("onRegionCreate._sys",e.bindReginEvent,e),e.bind("onRegionCreate._sys",e.closeDefault,e),e.bind("onSplitBtnClick._sys",e.splitClickToClose,e),e.bind("onSplitDblClick._sys",e.splitDblClickToClose,e),e.bind("onRegionCreate._sys",e.dragSplit,e)},dragSplit:function(e){var t=this,n=this.C(),i=$("#"+n.id+"_"+e+"_split");if(i.length&&Nex.getClass("drag")&&n[e].resizable){var r="h",o="default";switch(e){case"north":case"south":r="v",o="row-resize";break;case"west":case"east":r="h",o="col-resize"}var a=function(i,r){var o=-1==Nex.inArray(e,["north","south"])?i:r;-1!=Nex.inArray(e,["east","south"])&&(o*=-1);var a=t._undef(n[e].height,n[e].width)+o;a=0>a?0:a;var s={width:$("#"+n.id+"_container").width(),height:$("#"+n.id+"_container").height()},l=0,d=0;switch(e){case"south":case"north":l=a+("south"===e?n.north.height:n.south.height)+n.center.minHeight,l>=s.height&&(a-=l-s.height);break;case"west":case"east":d=a+("west"===e?n.east.width:n.west.width)+n.center.minWidth,d>=s.width&&(a-=d-s.width)}t.setRegionSize(e,a),t.refresh()};Nex.Create("drag",{helper:i,axis:r,cursor:o,onBeforeDrag:function(t,r){var o=this,a=t.srcElement?t.srcElement:t.target;if(!$(a).hasClass("nex-layout-split"))return!1;if(!n[e].resizable||n[e].isClosed)return!1;var s=o.fireEvent("onBeforeSplitDrag",[e,t,n]);if(s===!1)return f;$(i).addClass("nex-split-drag"),$(i).css("zIndex",99999);var l=$(i).clone();l.attr("id","_dragSplit"),l.css("zIndex",-1),l.addClass("nex-split-proxy-drag"),l.empty(),$(i).after(l),o.__clone=l},onDrag:function(t,i,r,o){var a=this;a.fireEvent("onSplitDrag",[e,t,i,r,n])},onAfterDrag:function(t,r,o){var s=this;$(i).removeClass("nex-split-drag"),$(i).css("zIndex",0),s.__clone.remove(),a(o.left-o._sLeft,o.top-o._sTop),s.fireEvent("onSplitStopDrag",[e,t.left-t._sLeft,t.top-t._sTop,t,r,n])}})}},splitClickToClose:function(e,t,n){var i=this,r=i.C();r[t].isClosed?i.openRegion(t):i.closeRegion(t)},splitDblClickToClose:function(e,t,n){var i=this,r=i.C();r.dblclickToClose&&(r[t].isClosed?i.openRegion(t):i.closeRegion(t))},closeDefault:function(e,t){var n=this,i=n.C(),r=i[e];"center"!=e&&r.isClosed&&n.closeRegion(e)},bindReginEvent:function(e,t){var n=this,i=n.configs;if(i[e].split){var r=$("#"+i.id+"_"+e+"_split"),o=$("#"+i.id+"_"+e+"_split").find(">a.nex-layout-split-i"),a=function(t,i){var r=i.srcElement?i.srcElement:i.target;if($(r).hasClass("nex-layout-split")){var o=n.fireEvent(t,[this,e,i]);if(o===!1)return o;var o=n.fireEvent(t.replace("Split",n._toUpperCase(e)+"Split"),[this,e,i]);return o===!1?o:void(o===!1&&(i.stopPropagation(),i.preventDefault()))}},s={click:function(e){a.call(this,"onSplitClick",e)},dblclick:function(e){a.call(this,"onSplitDblClick",e)},keydown:function(e){a.call(this,"onSplitKeyDown",e)},keyup:function(e){a.call(this,"onSplitKeyUp",e)},keypress:function(e){a.call(this,"onSplitKeyPress",e)},mouseover:function(e){a.call(this,"onSplitMouseOver",e)},mouseout:function(e){a.call(this,"onSplitMouseOut",e)},mousedown:function(e){a.call(this,"onSplitMouseDown",e)},mouseup:function(e){a.call(this,"onSplitMouseUp",e)},contextmenu:function(e){a.call(this,"onSplitContextMenu",e)}},l=function(t,i){var r=i.srcElement?i.srcElement:i.target;if($(r).hasClass("nex-layout-split-i")){var o=n.fireEvent(t,[this,e,i]);if(o===!1)return o;var o=n.fireEvent(t.replace("SplitBtn",n._toUpperCase(e)+"SplitBtn"),[this,e,i]);return o===!1?o:void(o===!1&&(i.stopPropagation(),i.preventDefault()))}},d={click:function(e){l.call(this,"onSplitBtnClick",e)},dblclick:function(e){l.call(this,"onSplitBtnDblClick",e)},keydown:function(e){l.call(this,"onSplitBtnKeyDown",e)},keyup:function(e){l.call(this,"onSplitBtnKeyUp",e)},keypress:function(e){l.call(this,"onSplitBtnKeyPress",e)},mouseover:function(e){l.call(this,"onSplitBtnMouseOver",e)},mouseout:function(e){l.call(this,"onSplitBtnMouseOut",e)},mousedown:function(e){l.call(this,"onSplitBtnMouseDown",e)},mouseup:function(e){l.call(this,"onSplitBtnMouseUp",e)},contextmenu:function(e){l.call(this,"onSplitBtnContextMenu",e)}};r.bind(s),o.bind(d)}},getRegion:function(e){var t=this,n=t.C(),i=$("#"+n.id+"_"+e);return i.size()?i:!1},getRegionBody:function(e){var t=this,n=t.C(),i=$("#"+n.id+"_"+e+"_body");return i.size()?i:!1},setExpandSize:function(e){var t=this,n=t.configs,i=$("#"+n.id+"_"+e),r=0;$(">div:not(div.nex-layout-body)",i).each(function(){r+=$(this)._outerHeight()}),$("#"+n.id+"_"+e+"_body")._outerWidth(i._width()),$("#"+n.id+"_"+e+"_body")._outerHeight(i._height()-r)},getRegionSize:function(e,t){var n=this,i=n.configs,t=n._undef(t,!0),r=i[e].isClosed?!1:$("#"+i.id+"_"+e),o=0,a=i[e].split?$("#"+i.id+"_"+e+"_split"):!1;return-1!=Nex.inArray(e,["north","south"])?(o+=r?r._outerHeight():0,o+=a?a._outerHeight():0):-1!=Nex.inArray(e,["west","east"])&&(o+=r?r._outerWidth():0,o+=a?a._outerWidth():0),o},setRegionSize:function(e,t,n){var i=this,r=i.configs,n=i._undef(n,!1);if(-1==Nex.inArray(e,r.layouts))return i;var o=i.fireEvent("onBeforeRegionSizeChange",[e]);if(o===!1)return o;var a=i.getBodyWidth(),s=i.getBodyHeight(),l=!1;if(-1!=Nex.inArray(e,["north","south"])){if("undefined"!=typeof t&&t==r[e].height)return!1;var t=t||r[e].height;r[e].minSize>0&&(t=Math.max(t,r[e].minSize)),r[e].maxSize>0&&(t=Math.min(t,r[e].maxSize)),t!=r[e].height&&(l=!0),r[e].height=t;var d=$("#"+r.id+"_"+e);if(d._outerWidth(a),d._outerHeight(t),r[e].split){var c=$("#"+r.id+"_"+e+"_split");c._outerWidth(a),c._outerHeight(r[e].splitSize)}}else if(-1!=Nex.inArray(e,["west","east"])){if("undefined"!=typeof t&&t==r[e].width)return!1;var t=t||r[e].width;r[e].minSize>0&&(t=Math.max(t,r[e].minSize)),r[e].maxSize>0&&(t=Math.min(t,r[e].maxSize)),t!=r[e].width&&(l=!0),r[e].width=t;var d=$("#"+r.id+"_"+e),u=s-i.getRegionSize("north",!n)-i.getRegionSize("south",!n);if(d._outerHeight(u),d._outerWidth(t),r[e].split){var c=$("#"+r.id+"_"+e+"_split");c._outerWidth(r[e].splitSize),c._outerHeight(u)}}else{e="center";var d=$("#"+r.id+"_"+e),h=d.width(),f=d.height();d._outerWidth(a-i.getRegionSize("west")-i.getRegionSize("east")),d._outerHeight(s-i.getRegionSize("north")-i.getRegionSize("south"));var g=d.width(),p=d.height();(h!=g||f!=p)&&(l=!0)}return i.setExpandSize(e),l&&i.fireEvent("onRegionSizeChange",[e]),!0},setRegionPos:function(e,t){var n=this,i=n.configs;if(-1==Nex.inArray(e,i.layouts))return n;var r=n.fireEvent("onBeforeRegionPositionChange",[e]);if(r===!1)return r;var t=n._undef(t,!0),o=n.getBodyWidth(),a=n.getBodyHeight();if(-1!=Nex.inArray(e,["north","south"])){var s=0,l=0,d=$("#"+i.id+"_"+e),c=d._outerHeight(),u=i[e].isClosed?0:c,h=i[e].split?$("#"+i.id+"_"+e+"_split"):!1;"north"==e?(l=i[e].isClosed?-c:0,t&&d.css({left:s,top:l,position:"absolute"}),h&&h.css({left:s,top:u,position:"absolute"})):"south"==e&&(l=i[e].isClosed?a:a-n.getRegionSize("south")+(h?h._outerHeight():0),h&&h.css({left:s,top:a-n.getRegionSize("south"),position:"absolute"}),t&&d.css({left:s,top:l,position:"absolute"}))}else if(-1!=Nex.inArray(e,["west","east"])){var s=0,l=0,d=$("#"+i.id+"_"+e),f=d._outerWidth(),g=i[e].isClosed?0:f,h=i[e].split?$("#"+i.id+"_"+e+"_split"):!1;"west"==e?(s=i[e].isClosed?-f:0,t&&d.css({left:s,top:n.getRegionSize("north"),position:"absolute"}),h&&h.css({left:g,top:n.getRegionSize("north"),position:"absolute"})):"east"==e&&(s=i[e].isClosed?o:o-n.getRegionSize("east")+(h?h._outerWidth():0),h&&h.css({left:o-n.getRegionSize("east"),top:n.getRegionSize("north"),position:"absolute"}),t&&d.css({left:s,top:n.getRegionSize("north"),position:"absolute"}))}else{e="center";var s=0,l=0,d=$("#"+i.id+"_"+e);d.css({left:n.getRegionSize("west"),top:n.getRegionSize("north"),position:"absolute"})}return n.fireEvent("onRegionPositionChange",[e]),n},openRegion:function(e){var t=this,n=t.configs;if("center"==e)return t;var i=t.fireEvent("onBeforeOpenRegion",[e]);if(i===!1)return i;var i=t.fireEvent("onBefore"+t._toUpperCase(e)+"Open",[]);if(i===!1)return i;var r=function(){t.refresh(),t.fireEvent("onOpenRegion",[e]),t.fireEvent("on"+t._toUpperCase(e)+"Open",[]),$("#"+n.id+"_"+e+"_split").removeClass("nex-layout-split-closed nex-layout-"+e+"-split-closed")};n[e].isClosed=!1;var o=t.getBodyWidth(),a=t.getBodyHeight(),s=$("#"+n.id+"_"+e);switch(e){case"north":s.animate({top:0},n.closeTime,n.easing,function(){r()});break;case"south":s.animate({top:a-s._outerHeight()},n.closeTime,n.easing,function(){r()});break;case"west":s.animate({left:0},n.closeTime,n.easing,function(){r()});break;case"east":s.animate({left:o-s._outerWidth()},n.closeTime,n.easing,function(){r()})}},closeRegion:function(e){var t=this,n=t.configs;if("center"==e)return t;var i=t.fireEvent("onBeforeCloseRegion",[e]);if(i===!1)return i;var i=t.fireEvent("onBefore"+t._toUpperCase(e)+"Close",[]);if(i===!1)return i;var r=function(){t.fireEvent("onCloseRegion",[e]),t.fireEvent("on"+t._toUpperCase(e)+"Close",[]),$("#"+n.id+"_"+e+"_split").addClass("nex-layout-split-closed nex-layout-"+e+"-split-closed")};n[e].isClosed=!0;var o=t.getBodyWidth(),a=t.getBodyHeight(),s=["north","south","west","east","center"],l=Nex.inArray(e,s);-1!==l&&s.splice(l,1),t.refresh(s),t.setRegionPos(e,!1);var d=$("#"+n.id+"_"+e);switch(e){case"north":d.animate({top:-d._outerHeight()},n.closeTime,n.easing,function(){r()});break;case"south":d.animate({top:a},n.closeTime,n.easing,function(){r()});break;case"west":d.animate({left:-d._outerWidth()},n.closeTime,n.easing,function(){r()});break;case"east":d.animate({left:o},n.closeTime,n.easing,function(){r()})}},addRegionContent:function(e,t){var n=this,i=n.C(),t=t||$("#"+i.id+"_"+e+"_body"),r=i[e].html;n.addComponent(t,r);var r=i[e].items;n.addComponent(t,r)},_createRegion:function(e){var t=this,n=t.configs;if($("#"+n.id+"_"+e).size())return!1;var i=$("#"+n.id+"_container");if("center"==e){var r=$('<div class="nex-layout-panel nex-layout-'+e+'" id="'+n.id+"_"+e+'"></div>');i.append(r)}else{var r=$('<div class="nex-layout-panel nex-layout-'+e+'" id="'+n.id+"_"+e+'"></div>');if(i.append(r),n[e].split){var o=$('<div class="nex-layout-panel nex-layout-split nex-layout-'+e+'-split" id="'+n.id+"_"+e+'_split"></div>');n[e].splitBtn&&o.append($('<a href="javascript:void(0)" class="nex-layout-split-i nex-layout-'+e+'-split-i"></a>')),i.append(o)}}var a=$('<div class="nex-layout-body '+(n[e].autoScroll?n.autoScrollRegionCls:"")+" nex-layout-"+e+"-body "+n[e].cls+'"  id="'+n.id+"_"+e+'_body"></div>');return a[0].style.cssText=n[e].cssText,n[e].padding&&a.css("padding",n[e].padding),a.attr(n[e].attrs).css(n[e].style),r.append(a),n[e].border&&(r.addClass(n.borderRegionCls),r.addClass(n[e].borderCls)),n.selectionable||r.disableSelection(),a},_refresh:function(e){var t=this;t.C();e=e||["north","south","west","east","center"];for(var n=0;n<e.length;n++)t.setRegionSize(e[n]),t.setRegionPos(e[n])},refresh:function(e,t){var n=this,i=n.configs,t=n._undef(t,!0),e=e||["north","south","west","east","center"];n._refresh(e),Nex.ComponentManager&&t&&(i.__onresize&&clearTimeout(i.__onresize),i.__onresize=setTimeout(function(){Nex.ComponentManager.fireEvent("onResize",[i.id])},0))},updateRegionSize:function(e,t){var n=this,i=(n.configs,n.setRegionSize(e,t));return i===!1?i:void n.refresh()},doSetViewSize:function(e,t){var n=this,i=(n.configs,n.getContainer()),r=n.getBody();n.callParent(arguments),r._outerWidth(i._width()),r._outerHeight(i._height()),!n.isInit()&&n._refresh()},_toUpperCase:function(e){return e.replace(/\s[a-z]/g,function(e){return e.toLocaleUpperCase()}).replace(/^[a-z]/,function(e){return e.toLocaleUpperCase()})},removeRegion:function(e){var t=this,n=t.C(),i=Nex.inArray(e,n.layouts);if(-1==i)return!0;var r=t.fireEvent("onBeforeRegionRemove",[e]);if(r===!1)return r;var r=t.fireEvent("onBefore"+o(e)+"Remove",[e]);if(r===!1)return r;var o=t._toUpperCase;return n.layouts.splice(i,1),$("#"+n.id+"_"+e).remove(),$("#"+n.id+"_"+e+"_split").remove(),t.refresh(),t.fireEvent("onRegionRemove",[e]),t.fireEvent("on"+o(e)+"Remove",[e]),!0},createRegion:function(e,t){var n=this,i=n.configs,t=n._undef(t,{}),r=n.fireEvent("onBeforeRegionCreate",[e]);if(r===!1)return r;var r=n.fireEvent("onBefore"+o(e)+"Create",[e]);if(r===!1)return r;var o=n._toUpperCase,a=$("#"+i.id+"_"+e);if(!a.size()){i.layouts.push(e),$.extend(i[e],t);var s=n._createRegion(e);n.fireEvent("onRegionCreate",[e,s]),n.fireEvent("on"+o(e)+"Create",[s]),n.refresh(),n.addRegionContent(e,s)}return!0},_createLayouts:function(){var e=this,t=e.configs;if(!t.isCreate){t.layouts.push("center");for(var n=["north","south","west","east","center"],i={},r=0;r<n.length;r++)if(-1!=Nex.inArray(n[r],t.layouts)){var o=e._createRegion(n[r]);i[n[r]]=o,e.denyEventInvoke("setRegionSize",n[r]),e.denyEventInvoke("setRegionPos",n[r])}for(var r=0;r<t.layouts.length;r++)e.fireEvent("onRegionCreate",[t.layouts[r],i[t.layouts[r]]]),e.fireEvent("on"+e._toUpperCase(t.layouts[r])+"Create",[i[t.layouts[r]]]);e.denyEventInvoke("_refresh");for(var r=0;r<n.length;r++)e.addRegionContent(n[r],i[n[r]]);t.isCreate=!0}},_insert:function(e,t,n){var i=this,n=(i.C(),i._undef(n,"center")),r=i.getRegionBody(n);if(!r)return i;var o=i.addComponent(r,e,t);return o},_empty:function(e){var t=this,n=(t.C(),t.getRegionBody(e||"center"));if(!n)return t;n.empty();var i=Nex.ComponentManager._getDomComps(n);return $.each(i,function(e,t){t.removeCmp()}),t}}),t}),define("Nex/menu/Menu",["require","Nex","Nex/showat/ShowAt"],function(e){e("Nex"),e("Nex/showat/ShowAt");var t=Nex.define("Nex.menu.Menu","Nex.Component",{alias:"Nex.Menu",xtype:"menu",configs:function(){return{prefix:"nexmenu-",renderTo:document.body,denyManager:!0,disabledItems:!0,width:0,height:0,maxWidth:0,minWidth:0,minHeight:0,maxHeight:0,parent:null,items:[],_item:{cls:"",icon:"",iconCls:"",arrow:"",arrowCls:"",id:"",text:"",open:"",_level:"",pid:"",items:"",disabled:"",width:"",height:"",callBack:null,callback:null,hideOnClick:!0,subCls:"",isCmp:!1},itemDefault:{},itemTpl:'<div id="<%=menuId%>_<%=itemId%>_item" <%=tips%> menuid="<%=itemId%>" class="nex-menu-item <%=cls%>"><%    if( showMenuIcon ) {        if( icon ) {            icon = "background-image:url("+icon+")";        }%>    <span class="nex-menu-icon <%=iconCls%>" style="<%=icon%>"></span><%    }%>    <span class="nex-menu-title"><%=text%></span><%    if( !isLeaf ) {        if( arrow ) {            arrow = "background-image:url("+arrow+")";        }%>        <span class="nex-menu-arrow <%=arrowCls%>" style="<%=arrow%>"></span><%    }%>    </div>',splitLineTpl:'<div class="nex-menu-item-separator"><div class="nex-menu-line-h"></div></div>',itemTips:!1,itemTipsTag:"title",itemTipsFilter:null,itemFilter:null,itemFormat:null,splitChr:["-",",",";","|"],cls:"",style:{},padding:null,delay:0,border:!1,borderCls:"nex-menu-border",showShadow:!0,shadowWidth:5,hideToRemove:!0,showMenuVLine:!0,showMenuIcon:!0,showMenuMore:!0,upBtnCls:"",downBtnCls:"",_speedTime:10,_speedNum:5,_data:{},_childrens:{},_levelData:{},_firstNodes:{},_lastNodes:{},hideOnClick:!0,hideOnBlur:!0,expandOnEvent:0,simpleData:!1,root:"0",showRootId:"0",iconField:"icon",iconClsField:"iconCls",idField:"id",textField:"text",openField:"open",levelField:"_level",parentField:"pid",sortField:"order",childField:"items",disabledField:"disabled",groupNode:!1,autoShow:!1,showAt:{},subShowAt:{},_showAt:{xAlign:"right",yAlign:"bottom",zAlign:"x"},events:{}}}});return t.override({initContainer:function(){},initRenderTpl:function(){},setSize:function(){},initComponent:function(e){var t=this,n=e.cls.split(/\s+/);Nex.array_splice(function(e,t){return"nex-component-item"==t?!0:void 0},n),e.cls=n.join(" "),e.items=Nex.isArray(e.items)?[].concat(e.items):[e.items],t._parseMenuData(e.items),t._bindDestroyOnParent(),e.autoShow&&t.show()},_bindDestroyOnParent:function(){var e=this,t=e.configs;if(t.parent){var n=t.parent;Nex.isInstance(n)?t.parent=n.configs.id:n=Nex.get(n),n&&n.one("onDestroy._"+t.id,function(){e.destroyMenu(),e.destroy()})}},_clickItem:function(e,t,n,i){var r=this,o=this.configs;if(!n[o.disabledField]){var a;if($.isFunction(n.callBack)&&(a=n.callBack.apply(o.context||r,[e,t,n,i,o]),a===!1))return!1;if($.isFunction(n.callback)&&(a=n.callback.apply(o.context||r,[e,t,n,i,o]),a===!1))return!1;var s=r._undef(n.hideOnClick,o.hideOnClick);s&&r.isLeaf(t)&&o.hideOnClick&&r.hideRoot()}},_setOverCls:function(e,t,n,i){var r=this.configs;n[r.disabledField]||$(e).addClass("nex-menu-item-over")},_unsetOverCls:function(e,t,n,i){var r=this.configs;n[r.disabledField]||$(e).removeClass("nex-menu-item-over")},_t_delay:0,_displayMenu:function(e,t,n,i){var r=this,o=this.configs;r._t_delay&&(clearTimeout(r._t_delay),r._t_delay=0),$(e).hasClass("nex-menu-item-active")||(o.delay>0?r._t_delay=setTimeout(function(){r.showSubMenu(t)},o.delay):r.showSubMenu(t))},_getNode:function(e,t){var n,i=this.configs,r=i._data[e];return r===n?!1:t===n?r:r[t]},getNode:function(){return this._getNode.apply(this,arguments)},_getParentID:function(e){var t=this,n=this.configs,i=t._getNode(e,n.parentField);return i===n.root?n.root:i},_parseSimpleData:function(e,t){for(var n,i=this,r=this.configs,o={},a=0;a<e.length;a++){var s=e[a];-1!==Nex.inArray(s,r.splitChr)&&(s={splitLine:!0}),s=$.extend({},r.itemDefault,s),s[r.parentField]===n?(s[r.parentField]=t===n?r.root:t,s[r.levelField]=t===n?0:i._getNode(t,r.levelField)+1):s[r.levelField]=i._getNode(s[r.parentField],r.levelField)+1,r.idField in s?s[r.idField].toString().length<=0&&(s[r.idField]="menu_"+Nex.uuid()):s[r.idField]="menu_"+Nex.uuid(),r._data[s[r.idField]]=s;var l=s[r.parentField];r._childrens[l]=r._childrens[l]===n?[]:r._childrens[l];var d=r._childrens[l];d.push(s);var c=s[r.levelField];r._levelData[c]=r._levelData[c]===n?[]:r._levelData[c];var u=r._levelData[c];u.push(s),o[l]=!0}for(var h in o)i.updateLastNodes(h)},_parseMenuData:function(e,t){var n,i=this,r=this.configs;if(r.simpleData)return i._parseSimpleData(e,t),i;for(var o=0;o<e.length;o++){var a=e[o];-1!==Nex.inArray(a,r.splitChr)&&(a={splitLine:!0}),a=$.extend({},r.itemDefault,a),a[r.levelField]=t===n?0:i._getNode(t,r.levelField)+1,a[r.parentField]=t===n?r.root:t,r.idField in a||(a[r.idField]="menu_"+Nex.uuid()),r._data[a[r.idField]]=a;var s=a[r.parentField];r._childrens[s]=r._childrens[s]===n?[]:r._childrens[s];var l=r._childrens[s];l.push(a);var d=a[r.levelField];r._levelData[d]=r._levelData[d]===n?[]:r._levelData[d];var c=r._levelData[d];c.push(a),r.childField in a&&$.isArray(a[r.childField])&&a[r.childField].length&&i._parseMenuData(a[r.childField],a[r.idField]),o+1===e.length&&i.updateLastNodes(s)}return i},updateLastNodes:function(e){var t,n=this.configs,e=e===t?n.root:e,i=n._childrens[e];i.length&&(n._firstNodes[e]=i[0],n._lastNodes[e]=i[i.length-1])},_clearParseCache:function(){var e=this.configs;return e._childrens={},e._data={},e._childrens={},e._levelData={},e._firstNodes={},e._lastNodes={},this},setItems:function(e){return this.destroyMenu(),this._clearParseCache(),this._parseMenuData(e),this},addChildren:function(e,t){var n=this,i=(this.configs,$.isArray(t)?t:[t]);return n._parseMenuData(i,e),this},addItems:function(){return this.addChildren.apply(this,arguments)},resetMenuList:function(e){var t=this.getMenuItem(e);return t.length&&t.remove(),this},isSplitLine:function(e){this.configs;return e.splitLine?!0:!1},isLeaf:function(e){var t,n=this,i=this.configs;if(e===i.root)return!1;var r=$.isPlainObject(e)?e:n._getNode(e);if(r===!1&&!n._isRoot(e))return!0;if(n._isRoot(e))return!1;if(r.leaf===t){if(r.isCmp&&r[i.childField])return!1;var o=r[i.idField],a=n.getChildrens(o);return a.length?!1:i.childField in r&&r[i.childField].length?!1:!0}return!!r.leaf},getAllChildrens:function(e){var t=this,n=this.configs,i=[],e=t._undef(e,n.root),r=function(e){var o=t.getChildrens(e);if(o.length){i=i.concat(o);for(var a=0;a<o.length;a++)r(o[a][n.idField])}};return r(e),i},getChildrens:function(e){var t,n=this.configs,e=e===t?n.root:e;return n._childrens[e]===t?[]:n._childrens[e]},_getParentsList:function(e){var t=this,n=this.configs,i=(n.root,[]),r=$.isPlainObject(e)?e:t._getNode(e);if(r===!1)return[];for(var o=r[n.idField],a=t._getParentID(o);;){if(!(a in n._data))break;if(i.push(a),a=t._getParentID(a),a===n.root)break}return i.reverse()},_isFirstNode:function(e){var t=this,n=this.configs,i=t._getParentID(e);return n._firstNodes[i][n.idField]===e?!0:!1},_isLastNode:function(e){var t=this,n=this.configs,i=t._getParentID(e);return n._lastNodes[i][n.idField]===e?!0:!1},_getMenuItemTpl:function(e){var t=this,n=this.configs,i=$.isPlainObject(e)?e:t._getNode(e);if(i===!1)return"";var r=i[n.idField],o=([n.id,"_",i[n.idField]].join(""),t._getParentID(r)),a="";n._firstNodes[o][n.idField]===r&&(a="nex-menu-first",n._firstNodes[n.root][n.idField]===r&&(a+=" nex-menu-first-all")),n._lastNodes[o][n.idField]===r&&(a="nex-menu-last"),i[n.disabledField]&&(a+=" nex-menu-item-disabled"),i.cls&&(a+=" "+i.cls);var s={splitLine:i.splitLine,menuId:n.id,itemId:r,showMenuIcon:n.showMenuIcon,cls:a,iconCls:i[n.iconClsField],icon:i[n.iconField],arrow:i.arrow,arrowCls:i.arrowCls,text:i[n.textField],isLeaf:t.isLeaf(r),showTips:n.itemTips,tips:""};if(n.itemTips){var l=[n.itemTipsTag,'="'],d=t._undef(i.tips,i[n.textField]);$.isFunction(n.itemTipsFilter)&&(d=n.itemTipsFilter.call(t,d,s)),d&&(d=Nex.htmlEncode(d)),s.tipsMsg=d,s.tipsTag=n.itemTipsTag,l.push(d),l.push('"'),s.tips=l.join("")}if(n.itemFilter&&$.isFunction(n.itemFilter)){var c=n.itemFilter.call(t,s);if(c===!1)return"";c!==undef&&(s=c)}n.itemFormat&&$.isFunction(n.itemFormat)&&(s.text=n.itemFormat.call(t,s.text,s)||s.text);var c=t.fireEvent("onBeforeCreateItem",[r,s,n]);if(c===!1)return"";var u="";u=t.isSplitLine(s)?t.tpl(n.splitLineTpl,s):t.tpl(n.itemTpl,s);var h={itemId:r,itemTpl:u,itemData:s};return t.fireEvent("onCreateItem",[h,n]),h.itemTpl},_isRoot:function(e){var t=this.configs;return e===t.root?!0:!1},_bindUpBtnEvent:function(e,t){var n=this,i=this.configs,t=t||o.parent(),r=$(">.nex-menu-items-wraper",t),o=$(">.nex-menu-down",t);e.bind({mouseenter:function(){var t=parseInt(r.css("margin-top"))||0,a=$(this).attr("menuid");n.hideAllSubSubMenu(a),o.show(),i._t_down&&clearInterval(i._t_down),i._t_down=setInterval(function(){t+=i._speedNum,t=Math.min(t,0),r.css({"margin-top":t}),t>=0&&(e.hide(),clearInterval(i._t_down))},i._speedTime)},mouseleave:function(){clearInterval(i._t_down)}})},_bindDownBtnEvent:function(e,t){var n=this,i=this.configs,t=t||e.parent(),r=$(">.nex-menu-up",t),o=$(">.nex-menu-items-wraper",t),a=$(t).height(),s=o.outerHeight(),l=s-a;e.bind({mouseenter:function(){var t=-(parseInt(o.css("margin-top"))||0),a=$(this).attr("menuid");n.hideAllSubSubMenu(a),r.show(),i._t_down&&clearInterval(i._t_down),i._t_down=setInterval(function(){t+=i._speedNum,t=Math.min(t,l),o.css({"margin-top":-t}),t>=l&&(e.hide(),clearInterval(i._t_down))},i._speedTime)},mouseleave:function(){clearInterval(i._t_down)}})},_checkMenuHeight:function(e,t){var n=this,i=this.configs;if(!t)return!1;var r=$(t).height(),o=$(">.nex-menu-items-wraper",t),a=o.outerHeight();if($(">.nex-menu-up,>.nex-menu-down",t).remove(),r>=a)return!1;var s=(parseInt(o.css("marginTop"))||0,$('<div class="nex-menu-up '+i.upBtnCls+'" menuid="'+e+'"></div>')),l=$('<div class="nex-menu-down '+i.downBtnCls+'" menuid="'+e+'"></div>');t.append(s),t.append(l),o.css("marginTop",0),s.hide(),l.show(),n._bindUpBtnEvent(s,t),n._bindDownBtnEvent(l,t),n.fireEvent("onMenuScrollBtnCreate",[e,s,l,i])},_bindMenuEvent:function(e){var t=this,n=this.configs,i=n._data,r=function(e,r,o,a){var s=$(this).attr("menuid"),l=t._getNode(s),d=!0;return e in l&&$.isFunction(l[e])&&(d=l[e].apply(t,[this,s,i[s],r])),d!==!1&&(d=t.fireEvent(e,[this,s,i[s],r,n])),d===!1?(r.stopPropagation(),r.preventDefault()):o&&($.isFunction(o)?o.apply(t,[this,s,i[s],r]):null),a&&($.isFunction(a)?a.apply(t,[this,s,i[s],r]):null),d},o={"click._meun":function(e){r.call(this,"onClick",e,function(){1==n.expandOnEvent&&t._displayMenu.apply(t,arguments)},t._clickItem)},"dblclick._meun":function(e){r.call(this,"onDblClick",e)},"keydown._meun":function(e){r.call(this,"onKeyDown",e)},"keyup._meun":function(e){r.call(this,"onKeyUp",e)},"keypress._meun":function(e){r.call(this,"onKeyPress",e)},"mouseenter._meun":function(e){r.call(this,"onMouseOver",e,function(){t._setOverCls.apply(t,arguments),0==n.expandOnEvent&&t._displayMenu.apply(t,arguments)})},"mouseleave._meun":function(e){r.call(this,"onMouseOut",e,function(){t._unsetOverCls.apply(t,arguments)})},"mousedown._meun":function(e){r.call(this,"onMouseDown",e)},"mouseup._meun":function(e){r.call(this,"onMouseUp",e)},"contextmenu._meun":function(e){r.call(this,"onContextMenu",e)}};return e.undelegate(">.nex-menu-item").delegate(">.nex-menu-item",o),t},bindMenuEvent:function(e){var t=this.configs,n=function(e){return!1};return $(e).parent().bind({"contextmenu._menu":n}),this._bindMenuEvent(e),this.fireEvent("onBindMenuEvents",[e,t]),this},getRootMenu:function(){var e=this.configs,t=[e.id,"_",e.root].join("");return $("#"+t)},getMenu:function(e){var t=this.configs,n=[t.id,"_",e].join("");return $("#"+n)},getMenuShadow:function(e){var t=this.configs,n=[t.id,"_",e,"_shadow"].join("");return $("#"+n)},getMenuWraper:function(e){var t=this.configs,n=[t.id,"_",e,"_items_wraper"].join("");return $("#"+n)},getMenuBody:function(e){return this.getMenuWraper(e)},getMenuItem:function(e){var t=this.configs,n=[t.id,"_",e,"_item"].join("");return $("#"+n)},_bulidMenu:function(e){var t=this,n=this.configs,e=t._undef(e,n.root),i=t._getNode(e),r=[n.id,"_",e].join(""),o=$("#"+r),a=function(){var o=t._undef(n._childrens[e],[]),a=["nex-menu"];n.border&&a.push(n.borderCls),a.push(n.cls),a.push(i.subCls),Nex.topzIndex=Nex.topzIndex+2;var s=['<div id="',r,'" menu-cmpid="'+n.id+'" style="z-index:',Nex.topzIndex,'" class="',a.join(" "),'">'];if(s.push('<div class="nex-menu-items-wraper" id="'+r+'_items_wraper">'),!i.isCmp){s.push(n.showMenuVLine?'<div class="nex-menu-line-v"></div>':"");for(var l=0;l<o.length;l++)s.push(t._getMenuItemTpl(o[l]))}s.push("</div></div>"),s=$(s.join(""));var d=$(n.renderTo);if(d.append(s),n.padding&&s.css("padding",n.padding),s.css(n.style),i.isCmp&&i[n.childField]){var c=$("#"+r+"_items_wraper");t.parseItems(c,i[n.childField])}return s},s=function(r){var o=$(n.renderTo);r._removeStyle("width height");var a=i.width||n.width,s=i.height||n.height;a=$.isFunction(a)?a.call(t,e):a,s=$.isFunction(s)?s.call(t,e):s,a="auto"==a?0:a,s="auto"==s?0:s;var l=o.is("body")?$(window):o,d=$.isFunction(n.maxWidth)?n.maxWidth.call(t,e):n.maxWidth,c=$.isFunction(n.maxHeight)?n.maxHeight.call(t,e):n.maxHeight,u=$.isFunction(n.minWidth)?n.minWidth.call(t,e):n.minWidth,h=$.isFunction(n.minHeight)?n.minHeight.call(t,e):n.minHeight,f=a>0?a:r._outerWidth(),g=f;n.maxWidth||(d=l.width()-n.shadowWidth),u>0&&(f=Math.max(f,u)),d>0&&(f=Math.min(f,d)),(a>0||g!=f)&&r._outerWidth(f);var p=s>0?s:r._outerHeight(),v=p;n.maxHeight||(c=l.height()-n.shadowWidth),h>0&&(p=Math.max(p,h)),c>0&&(p=Math.min(p,c)),(s>0||v!=p)&&r._outerHeight(p)};return o.length||(o=a(),o.disableSelection(),t.bindMenuEvent($(">.nex-menu-items-wraper",o)),t.fireEvent("onCreateMenu",[o,e,n])),o.css({left:-99999,top:-99999}).show(),s(o),i.isCmp||n.showMenuMore&&t._checkMenuHeight(e,o),o},_createMenu:function(e){var t,n=this;this.configs;if(e===t)return!1;var i=n._getNode(e);if(i===!1&&!n._isRoot(e))return!1;var r=n._bulidMenu(e);return r},_showMenu:function(e){var t=this,n=this.configs,e=Nex.unDefined(e,n.root),i=t.fireEvent("onBeforeShowMenu",[e,n]);if(i===!1)return!1;var r=t._createMenu(e);return r&&($("#"+n.id+"_"+e+"_item").addClass("nex-menu-item-active"),t.fireEvent("onShowMenu",[e,r,n])),r},_showRootMenu:function(e,t){var n=this,i=this.configs,r=this._showMenu();if(!r)return!1;var e=n._undef(e,null),o=n._undef(t,{});Nex.isArray(e)&&(e={left:e[0],top:e[1]});var a=e?{at:e}:{};return o=$.extend({},$._isPlainObject(i.showAt)?i.showAt:{at:i.showAt},a,o),this._showAt(r,null,o,0),n.bindCloseEvents(),!0},showRootMenu:function(e,t){var n=this,i=this.configs,r=n.fireEvent("onBeforeShowRootMenu",[e,t,i]);return r===!1?n:(n._showRootMenu.apply(this,arguments),n.fireEvent("onShowRootMenu",[i]),n)},showRoot:function(){return this.showRootMenu.apply(this,arguments)},_showSubMenu:function(e,t){var n=this,i=this.configs,r=n._isRoot(e),o=$("#"+i.id+"_"+e+"_item");if(!r&&!o.length)return!1;var a=n._undef(t,{}),s=n._showMenu(e),l=r?null:o,d=r?$._isPlainObject(i.showAt)?i.showAt:{at:i.showAt}:$._isPlainObject(i.subShowAt)?i.subShowAt:{at:i.subShowAt},c=l?{at:l}:{};return a=$.extend({},d,c,a),s?(n._showAt(s,null,a,r?0:1),!0):!1},showSubMenu:function(e){var t=this,n=this.configs,i=this._getNode(e);if(t.hideAllSubMenu(e),i&&i[n.disabledField])return t;var r=t.fireEvent("onBeforeShowSubMenu",[e,n]);return r===!1?t:t.isLeaf(e)?t:(t._showSubMenu(e),t.fireEvent("onShowSubMenu",[e,n]),t)},_hide:function(e,t){e.css({left:-99999,top:-99999}).hide(),t&&$.isFunction(t)&&t()},hideMenu:function(e){var t,n=this,i=this.configs;if(e===t)return n;var r=[i.id,"_",e].join(""),o=$("#"+r);if(!o.length)return n;var a=$("#"+r+"_shadow"),s=n.fireEvent("onBeforeHideMenu",[e,i]);if(s===!1)return n;if(i.hideToRemove){var l=n._getNode(e);n._hide(o,function(){o.remove(),l.isCmp&&Nex.gc(),a.length&&a.remove()})}else n._hide(o,function(){a.length&&a.hide()});return $("#"+i.id+"_"+e+"_item").removeClass("nex-menu-item-active"),n},hideAllSubSubMenu:function(e){for(var t=this,n=this.configs,e=t._undef(e,n.root),i=t.getAllChildrens(e),r=0;r<i.length;r++){var o=i[r][n.idField],a=t.isLeaf(o);a||t.hideMenu(o)}},hideAllMenu:function(){return this.hideAllSubMenu(this.configs.root,1),this},hideAllSubMenu:function(e,t){var n=this,i=this.configs,e=n._undef(e,i.root);e=n._isRoot(e)?e:n._getParentID(e);var r=n.getAllChildrens(e);t&&n.hideMenu(e);for(var o=0;o<r.length;o++){var a=r[o][i.idField],s=n.isLeaf(a);s||n.hideMenu(a)}return n},hideRoot:function(){return this.hideAllMenu(),this.unbindCloseEvents(),this},hideRootMenu:function(){return this.hideRoot.apply(this,arguments)},destroyMenu:function(){var e=this.configs,t=e.hideToRemove;return e.hideToRemove=!0,this.hideAllMenu(),e.hideToRemove=t,this},hideLeveMenu:function(e){var t,n=this,i=this.configs;if(e===t)return!0;for(var r=i._levelData[e],o=0;o<r.length;o++)n.hideMenu(r[o][i.idField]);return!0},_setShadow:function(e){var t=this.configs,n=$(e).attr("id")+"_shadow",i=$("#"+n);
if(i.length)return i.show(),i.width($(e).outerWidth()),i.height($(e).outerHeight()),i.css({left:$(e).css("left"),top:$(e).css("top")}),i.css("zIndex",$(e).css("z-index")-1),!0;var i=$('<div class="nex-menu-shadow" id="'+n+'">'+(Nex.IEVer<=8?'<iframe frameborder="0" class="nex-menu-shadow-iframe" style="width:99%;height:99%;"></iframe>':"")+"</div>");return i.appendTo(t.renderTo),i.width($(e).outerWidth()),i.height($(e).outerHeight()),i.css({left:$(e).css("left"),top:$(e).css("top")}),i.css("zIndex",$(e).css("z-index")-1),!0},_showAt:function(e,n,i){var r=this,o=this.configs,a={},i=r._undef(i,{}),s={visibleEdge:o.shadowWidth};if(n&&(s.at=n),$.extend(a,o._showAt,i,s),a.at||(a.at={left:0,top:0}),!e)return!1;var l=r.fireEvent("onBeforeShowAt",[t,a,o]);if(l!==!1){var d=function(){o.showShadow&&r._setShadow(e),r.fireEvent("onShowAt",[t,a,o])};return r._show(e,a,d),!0}},_show:function(e,t,n){var i=this,r=$.extend({},t||{});if(n&&$.isFunction(n)){var o="onShow."+i.C("id");r[o]=function(){n()}}$(e).showAt(r)},unbindCloseEvents:function(){var e=this.configs;return $(document).unbind(".menu_"+e.id),$(window).unbind(".menu_"+e.id),this},bindCloseEvents:function(){var e=this,t=this.configs;return t.hideOnBlur?(e.unbindCloseEvents(),$(document).one("contextmenu.menu_"+t.id+" mousedown.menu_"+t.id,function(n){var i=n.target||n.srcElement;$(i).closest('[menu-cmpid="'+t.id+'"]').length?e.bindCloseEvents():(e.hideRoot(),e.unbindCloseEvents())}),$(window).one("resize.menu_"+t.id,function(){e.hideRoot(),e.unbindCloseEvents()}),e):e},showAt:function(){return this.show.apply(this,arguments)},show:function(e,t){return this.showRootMenu.apply(this,arguments),this},hide:function(){return this.hideRootMenu(),this}}),t}),define("Nex/button/Button",["require","Nex/container/Container","Nex/menu/Menu"],function(e){e("Nex/container/Container"),e("Nex/menu/Menu");var t=Nex.define("Nex.button.Button",{extend:"Nex.container.Container",alias:"Nex.Button",xtype:"button",configs:function(e){return{prefix:"nexbutton-",tag:"span",renderTo:document.body,autoDestroy:!0,autoResize:!1,_hasBodyView:!1,_checkScrollBar:!1,selectionable:!1,denyEvents:!0,tabIndex:Nex.tabIndex++,width:"auto",height:"auto",borderCls:[e.borderCls,"nex-button-border"].join(" "),containerCls:[e.containerCls,"nex-button"].join(" "),autoScroll:!1,autoScrollCls:"",autoFocus:!1,splitBtn:!1,toggleBtn:!1,pressed:!1,plain:!1,skin:"default",cls:"",bodyCls:"",bodyStyle:{},toggleCls:"",pressedCls:"",activeCls:"",overCls:"",focusCls:"",plainCls:"",disabledCls:"",cssText:"",align:"center",removeTextSize:!1,iconAlign:"left",icon:"",iconCls:"",arrowAlign:"right",showArrow:!1,arrow:"",arrowCls:"",disabled:!1,callBack:null,callback:null,toggleHandler:$.noop,text:"",views:{},menuConf:{},menu:[],events:{}}}});return t.override({initContainer:function(){var e=this.configs;e.containerCls+=" nex-button-skin-"+e.skin,this.callParent(arguments)},initComponent:function(e){var t=this;this.configs;t.callParent(arguments),t.setBody(),t.initButton()},getBody:function(){var e=this,t=e.configs;return t.views.body},setBody:function(){var e=this,t=e.configs,n=e.getContainer(),i=$('<span class="nex-button-left '+t.bodyCls+'" id="'+t.id+'_left" ></span>'),r=$('<span class="nex-button-right" id="'+t.id+'_right"></span>');return t.views.body=i,t.views.body2=r,n.append(i),n.append(r),i.css(t.bodyStyle),e.fireEvent("onBodyCreate",[i,r,t]),e},doSetViewSize:function(e,t){var n=this,i=n.configs,r=n.getContainer(),o=n.getBody();if(n.callParent(arguments),"auto"!==i.realWidth){var e=r._width();if(o._outerWidth(e),!i.removeTextSize){var a=0;a="top"===i.iconAlign||"bottom"===i.iconAlign?0:$("#"+i.id+"_icon")._width();var s=0;s="top"===i.arrowAlign||"bottom"===i.arrowAlign?0:$("#"+i.id+"_arrow")._width();var l=a+s;$("#"+i.id+"_text")._outerWidth($("#"+i.id+"_left")._width()-l)}}if("auto"!==i.realHeight){var d=i.views.body2,t=r._height();o._outerHeight(t),d.height(t)}},initButton:function(){var e=this;e.configs;e.createButton()},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onCreate.over",e._setFocus,e),e.bind("onCreate.over",e.toggleBtnCls,e),e.bind("onCreate.over",e._onCreate,e),e.bind("onContainerCreate.over",e._setPlain,e),e.bind("onFocus.focus",e._setFoucsCls,e),e.bind("onBlur.focus",e._unsetFoucsCls,e),e.bind("onMouseDown.focus",e._setPressedCls,e),e.bind("onMouseUp.focus",e._unsetPressedCls,e),e.bind("onMouseOver.over",e.onMouseOver,e),e.bind("onMouseOut.over",e.onMouseOut,e),e.bind("onClick.click",e._click,e),e.bind("onKeyDown.click",e._click2,e),e.bind("onClick.menu",e._showMenu,e),e},createButton:function(){var e=this;e.configs;return e.setInnerButton(),e.bindButtonEvent(),!0},setInnerButton:function(){var e=this,t=e.configs,n=e.getBody(),i=['<table class="nex-button-layout-table" cellpadding="0" cellspacing="0" border="0"><tr><td align="'+t.align+'" valign="middle"><div class="nex-button-wraper" id="'+t.id+'_wraper">'],r="";if(t.icon&&(r="background-image:url("+t.icon+")"),(t.icon||t.iconCls)&&i.push('<span id="'+t.id+'_icon" class="nex-button-inner nex-button-icon ',t.iconCls,'" style="',r,'"></span>'),i.push('<span id="'+t.id+'_text" class="nex-button-inner nex-button-text">',t.text,"</span>"),t.showArrow||t.menu.length||t.items.length){var o="";t.arrow&&(o="background-image:url("+t.arrow+");"),i.push('<span id="'+t.id+'_arrow" class="nex-button-inner nex-button-arrow '+t.arrowCls+'" style="'+o+'"></span>')}i.push("</div></td></tr></table>");var a=$(i.join(""));n.append(a),e.setIconAlign(),e.setArrowAlign(),e.fireEvent("onButtonInnerCreate",[a])},bindButtonEvent:function(){var e=this,t=e.C(),n=e.getContainer(),i=function(n,i){var r=e.fireEvent(n,[this,i,t]);r===!1&&(i.stopPropagation(),i.preventDefault())},r={focusin:function(e){i.call(this,"onFocus",e)},focusout:function(e){i.call(this,"onBlur",e)},click:function(e){i.call(this,"onClick",e)},dblclick:function(e){i.call(this,"onDblClick",e)},keydown:function(e){i.call(this,"onKeyDown",e)},keyup:function(e){i.call(this,"onKeyUp",e)},keypress:function(e){i.call(this,"onKeyPress",e)},mouseenter:function(e){i.call(this,"onMouseEnter",e)},mouseleave:function(e){i.call(this,"onMouseLeave",e)},mouseover:function(e){i.call(this,"onMouseOver",e)},mouseout:function(e){i.call(this,"onMouseOut",e)},mousedown:function(e){i.call(this,"onMouseDown",e)},mouseup:function(e){i.call(this,"onMouseUp",e)},contextmenu:function(e){i.call(this,"onContextMenu",e)}};return n.bind(r),e.fireEvent("onSetButtonEvent",[n,t]),!0},focus:function(){var e=this,t=(e.configs,e.el);t.focus()},blur:function(){var e=this,t=(e.configs,e.el);t.blur()},_setFocus:function(){var e=this,t=e.configs;t.autoFocus&&(clearTimeout(t._ft),t._ft=setTimeout(function(){e.focus()},0))},_setPlain:function(){var e=this,t=e.configs,n=e.el;t.plain&&(n.addClass("nex-button-plain"),t.plainCls&&n.addClass(t.plainCls))},_setFoucsCls:function(e){var t=this,n=t.configs,e=t.el;e.addClass("nex-button-focus"),n.focusCls&&e.addClass(n.focusCls)},_unsetFoucsCls:function(e){var t=this,n=t.configs,e=t.el;e.removeClass("nex-button-focus"),n.focusCls&&e.removeClass(n.focusCls)},_setPressedCls:function(e){var t=this,n=t.configs,e=t.el;e.addClass("nex-button-pressed"),n.pressedCls&&e.addClass(n.pressedCls),$(document).one("mouseup",function(){t._unsetPressedCls()})},_unsetPressedCls:function(e){var t=this,n=t.configs,e=t.el;e.removeClass("nex-button-pressed"),n.pressedCls&&e.removeClass(n.pressedCls)},_showMenu:function(e,t){var n=this,i=n.configs,e=$(e);i.disabled||i.menu.length&&!i.splitBtn&&(e.hasClass("nex-button-active")?(e.removeClass("nex-button-active"),i.activeCls&&e.removeClass(i.activeCls),n._menu&&n._menu.hideRoot()):(e.addClass("nex-button-active"),i.activeCls&&e.addClass(i.activeCls),n._menu=Nex.Menu.create($.extend({},i.menuConf,{items:i.menu},{onClick:function(t,i,r,o){e.removeClass("nex-button-active"),n.fireEvent("onItemClick",[t,i,r,o])}})),n._menu.show(e,{xAlign:"left",yAlign:"bottom",zAlign:"y"}),setTimeout(function(){$(document).one("mousedown",function(){e.removeClass("nex-button-active")})},0)))},_showSplitMenu:function(e,t){var n=this,i=n.configs,r=n.el;if(i.splitBtn){var o=$(".nex-button-arrow",r);o.hasClass("nex-button-arrow-active")?(o.removeClass("nex-button-arrow-active"),r.removeClass("nex-button-active"),i.activeCls&&r.removeClass(i.activeCls),n._menu&&n._menu.hideRoot()):(o.addClass("nex-button-arrow-active"),r.addClass("nex-button-active"),i.activeCls&&r.addClass(i.activeCls),n._menu=new Nex.menu($.extend(i.menuConf,{data:i.menu},{onClick:function(e,t,a,s){o.removeClass("nex-button-arrow-active"),r.removeClass("nex-button-active"),i.activeCls&&r.removeClass(i.activeCls),n.fireEvent("onItemClick",[e,t,a,s])}})),n._menu.show(e,{xAlign:"left",yAlign:"bottom"}),setTimeout(function(){$(document).one("mousedown",function(){o.removeClass("nex-button-arrow-active"),r.removeClass("nex-button-active"),i.activeCls&&r.removeClass(i.activeCls)})},0))}},_onCreate:function(){this.disabled(this.C("disabled"))},onMouseOver:function(e,t){var n=this,i=this.configs,e=n.el;e.addClass("nex-button-hover"),i.overCls&&e.addClass(i.overCls)},onMouseOut:function(e,t){var n=this,i=this.configs,e=n.el;e.removeClass("nex-button-hover"),i.overCls&&e.removeClass(i.overCls),i.plain&&n._unsetFoucsCls()},toggleBtnCls:function(){var e=this,t=this.configs,n=e.el;t.pressed?(n.addClass("nex-button-toggle"),t.toggleCls&&n.addClass(t.toggleCls)):(n.removeClass("nex-button-toggle"),t.toggleCls&&n.removeClass(t.toggleCls))},_click:function(e,t){var n=this,i=this.configs;i.disabled||($.isFunction(i.callBack)&&i.callBack.call(i.context||n,e,t),$.isFunction(i.callback)&&i.callback.call(i.context||n,e,t),i.toggleBtn&&(i.pressed=!i.pressed,n.toggleBtnCls(),i.toggleHandler.call(i.context||n,i.pressed,i)))},_click2:function(e,t){var n=this,i=this.configs;i.disabled||13===t.keyCode&&n._click()},disabled:function(e){var t,n=this,i=this.configs,e=e===t?!0:e,r=n.el;return i.disabled=!!e,e?(r.addClass("nex-button-disabled"),i.disabledCls&&r.addClass(i.disabledCls),r.removeAttr("tabindex")):(r.removeClass("nex-button-disabled"),i.disabledCls&&r.removeClass(i.disabledCls),r.attr("tabindex",i.tabIndex)),!0},enabled:function(){return this.disabled(!1)},setText:function(e){var t=this,n=t.configs;e=$.isFunction(e)?e.call(this,n):e,n.text=t._undef(e,n.text);var i=$("#"+n.id+"_text");i.html(n.text)},setArrowAlign:function(e){var t=this,n=t.configs,e=t._undef(e,n.arrowAlign);n.arrowAlign=e;var i=$("#"+n.id+"_wraper"),r=$("#"+n.id+"_arrow");if(!r.length)return t;switch(r.removeClass("nex-button-inner-block"),e){case"left":i.prepend(r);break;case"top":i.before(r),r.addClass("nex-button-inner-block");break;case"right":i.append(r);break;case"bottom":i.append(r),r.addClass("nex-button-inner-block")}return t},setIconAlign:function(e){var t=this,n=t.configs,e=t._undef(e,n.iconAlign);n.iconAlign=e;var i=$("#"+n.id+"_wraper"),r=$("#"+n.id+"_icon"),o=$("#"+n.id+"_text");if(!r.length)return t;switch(r.removeClass("nex-button-inner-block"),e){case"left":o.before(r);break;case"top":o.before(r),r.addClass("nex-button-inner-block");break;case"right":o.after(r);break;case"bottom":i.append(r),r.addClass("nex-button-inner-block")}return t},setIcon:function(e,t){var n=this,i=n.configs,t=n._undef(t,i.iconAlign);n.getBody();i.icon=n._undef(e,i.icon);var e=$("#"+i.id+"_icon"),r=$("#"+i.id+"_text");if(i.icon||i.iconCls){var o="";i.icon&&(o="background-image:url("+i.icon+")"),e.remove(),e=$(['<span id="',i.id,'_icon" class="nex-button-inner nex-button-icon ',i.iconCls,'" style="',o,'"></span>'].join("")),r.before(e),n.setIconAlign(t)}else e.remove();return n.doSetViewSize(),n},setIconCls:function(e,t){var n=this,i=n.configs,t=n._undef(t,i.iconAlign);n.getBody();i.iconCls=n._undef(e,i.iconCls);var r=$("#"+i.id+"_icon"),o=$("#"+i.id+"_text");if(i.icon||i.iconCls){var a="";i.icon&&(a="background-image:url("+i.icon+")"),r.remove(),r=$(['<span id="',i.id,'_icon" class="nex-button-inner nex-button-icon ',i.iconCls,'" style="',a,'"></span>'].join("")),o.before(r),n.setIconAlign(t)}else r.remove();return n.doSetViewSize(),n}}),t}),define("Nex/accordion/Accordion",["require","Nex/panel/Panel"],function(e){e("Nex/panel/Panel");var t=Nex.define("Nex.accordion.Accordion",{extend:"Nex.panel.Panel",alias:"Nex.Accordion",xtype:"accordion",configs:function(e){return{prefix:"nexaccordion-",autoResize:!0,containerCls:[e.containerCls,"nex-accordion"].join(" "),autoScrollCls:[e.autoScrollCls,"nex-accordion-auto-scroll"].join(" "),borderCls:[e.borderCls,"nex-accordion-border"].join(" "),autoScroll:!1,border:!1,expandOnEvent:"click",lazyLoad:!0,items:[],disabledItems:!0,renderTo:document.body,width:"auto",height:"auto",singleExpand:!0}}});return t.override({initComponent:function(e){var t=this;t.callParent(arguments),t.accordions=[],t.setAccordionItems()},accordionRendered:!1,accordions:[],setAccordionItems:function(){var e=this,t=e.configs,n=e.getBody();if(!e.accordionRendered){e.accordionRendered=!0;var i=Nex.isArray(t.items)?t.items:[t.items];return $.each(i,function(i,r){r.id=Nex.unDefined(r.id,Nex.uuid());var o=$.extend({cls:"",collapsible:!0,defaults:t.defaults,showHeader:!0},r);o.bodyPadding=o.padding,o.collapsed=!0,o.cls="nex-accordion-item "+o.cls,t.lazyLoad?(o.html="",o.items=[]):(o.html=r.html,o.items=r.items),o.border=!1,o.padding=0,o.renderTo=n;var a=Nex.Create("panel",o);a.on("@onHeaderClick._sys",function(){"click"==t.expandOnEvent&&this.toggleCollapse()}),a.on("@onHeaderDblClick._sys",function(){"dblclick"==t.expandOnEvent&&this.toggleCollapse()});a.on("@onHeaderMouseOver._sys",function(){"mouseover"==t.expandOnEvent&&this.expand()}),a.one("@onExpand",function(){var n=this.getBody();t.lazyLoad&&(e.addComponent(n,r.html,!0,t.defaults),e.addComponent(n,r.items,!0,t.defaults))});a.on("@onExpanding",function(){var n=this;t.singleExpand&&$.each(e.accordions,function(e,t){n.configs.id!=t.configs.id&&(t.collapsed||t.collapse())})}),e.accordions.push(a),e.fireEvent("onAccordionItemCreate",[a,t])}),e.fireEvent("onAccordionsCreate",[e.accordions,t]),e}},doSetViewSize:function(){var e=this,t=(this.configs,e.getBody()),n=e.accordions;if(e.callParent(arguments),e.isAutoWidth()||$.each(n,function(e,n){n.width(t._width())}),!e.isAutoHeight()){var i=0,r=t._height(),o=0;$.each(n,function(e,t){var n=t.getHeader();i+=n._outerHeight()}),o=r-(i-i/n.length),$.each(n,function(e,t){t.height(o)})}},getItemData:function(e){for(var t=this.configs,n=Nex.isArray(t.items)?t.items:[t.items],i=0;i<n.length;i++)if(n[i].id==e)return n[i];return null},getItemPanel:function(e){for(var t=this.accordions,n=0;n<t.length;n++)if(t[n].configs.id==e)return t[n];return null}}),t}),define("Nex/util/Date",["require","exports","module","Nex"],function(require,exports,module){require("Nex"),Nex.addUtil("Date",{now:function(e){var t=new Date;return e&&this.add(t,"d",e),t},isArray:function(e){var t=Array.isArray,n=Object.prototype.toString;return t?t.call(Array,e):"[object Array]"==n.call(e)},isFunction:function(e){var t=Object.prototype.toString;return"[object Function]"==t.call(e)},pad:function(e,t){for(var n=""+e,t=t||2;n.length<t;n="0"+n);return n},isDate:function(e){return"[object Date]"==Object.prototype.toString.call(e)},isLeapYear:function(e){return e=this.isDate(e)?e.getFullYear():parseInt(e,10),e%4===0&&e%100!==0||e%400===0},format:function(e,t,n){var i=this,e=e||this.now(),r=t||"YYYY-MM-DD",o=n||["","","","","","",""];return r=r.replace(/yyyy|YYYY/,function(){return e.getFullYear()}),r=r.replace(/yy|YY/,function(){var t=e.getYear()%100;return i.pad(t)}),r=r.replace(/MM/,function(){var t=e.getMonth()+1;return i.pad(t)}),r=r.replace(/M/g,function(){return e.getMonth()+1}),r=r.replace(/w/g,function(){return o[e.getDay()]}),r=r.replace(/W/g,function(){return i.weekOfYear(e)}),r=r.replace(/WW/g,function(){return i.pad(i.weekOfYear(e))}),r=r.replace(/dd|DD/,function(){return i.pad(e.getDate())}),r=r.replace(/d|D/g,function(){return e.getDate()}),r=r.replace(/q|Q/g,function(){return i.getQuarter(e.getMonth()+1)}),r=r.replace(/o|O/g,function(){return i.dayOfYear(e)}),r=r.replace(/oo|OO/g,function(){i.pad(i.dayOfYear(e),3)}),r=r.replace(/hh|HH/,function(){return i.pad(e.getHours())}),r=r.replace(/h|H/g,function(){return e.getHours()}),r=r.replace(/mm/,function(){return i.pad(e.getMinutes())}),r=r.replace(/m/g,function(){return e.getMinutes()}),r=r.replace(/ss|SS/,function(){return i.pad(e.getSeconds())}),r=r.replace(/s|S/g,function(){return e.getSeconds()})},strToDate:function(dateStr,fmt){var undef;if(this.isDate(dateStr))return dateStr;if(dateStr===undef)return this.now();if(fmt)return this.parseDate(dateStr,fmt);var data=dateStr,reCat=/(\d{1,4})/gm,t=data.match(reCat);return t[1]=t[1]-1,eval("var d = new Date("+t.join(",")+");"),d},clone:function(e){var e=this.strToDate(e);return new Date(e.getTime())},parseDate:function(e,t){var n=this;if(this.isDate(e))return e;var i=/YYYY|yyyy|YY|yy|MM|M|w|WW|W|DD|dd|D|d|A|a|q|Q|OO|oo|O|o|HH|hh|H|h|mm|m|SS|ss|S|s/g,r=["YYYY-MM-DD","YYYY-M-D","YYYY/MM/DD","YYYY/M/D","DD/MM/YYYY","D/M/YYYY","YYYYMMDD","YYYY.MM.DD","YYYY.M.D"],t=t?n.isArray(t)?t:[t]:[];r=t.concat(r);for(var o=(function(e,t){var r={};t=t.replace(/\.|\\|\/|\+|\?|\$|\*|\^|\(|\)|\||\<|\>|\{|\}/g,function(e){return"\\"+e});var o=0,a=t.replace(i,function(e){var t="";switch(r[o++]=e,e){case"yyyy":case"YYYY":t="(\\d{4})";break;case"yy":case"YY":case"MM":case"dd":case"DD":case"WW":case"HH":case"hh":case"mm":case"ss":t="(\\d{2})";break;case"q":case"Q":t="(\\d{1})";break;case"oo":case"OO":t="(\\d{3})";break;case"o":case"O":t="(\\d{1,3})";break;case"a":case"A":t="((?:pm|PM|am|AM))";break;case"w":t="(\\S)";break;default:t="(\\d\\d?)"}return t}),s=new RegExp(a,"g").exec(e);if(!s)return null;s.splice(0,1);var l={};for(k in r)l[r[k]]=s[k];var d=new Date,c=n.dateObject(d);if(c["M+"]="1",c["d+"]="1",c["h+"]="00",c["m+"]="00",c["s+"]="00","yyyy"in l||"YYYY"in l)c["y+"]=l.YYYY||l.yyyy;else if("yy"in l||"YY"in l){var u=(c["y+"]+"").substring(0,2);c["y+"]=l.YY||l.yy,c["y+"]=u+c["y+"]}return("MM"in l||"M"in l)&&(c["M+"]=l.MM||l.M),("DD"in l||"dd"in l)&&(c["d+"]=l.DD||l.dd),("D"in l||"d"in l)&&(c["d+"]=l.D||l.d),("HH"in l||"hh"in l||"H"in l||"h"in l)&&(c["h+"]=l.HH||l.hh||l.H||l.h),("mm"in l||"m"in l)&&(c["m+"]=l.mm||l.m),("SS"in l||"ss"in l||"S"in l||"s"in l)&&(c["s+"]=l.SS||l.ss||l.S||l.s),new Date(c["y+"],parseInt(c["M+"],10)-1,c["d+"],c["h+"],c["m+"],c["s+"])}),a=null,s=0;s<r.length&&(n.isFunction(r[s])?a=r[s].call(this,e):r[s]&&(a=o.call(this,e,r[s])),!a);s++);return a?a:new Date},getQuarter:function(e){var t=0;return 4>e&&(t=1),e>3&&7>e&&(t=2),e>6&&10>e&&(t=3),e>9&&(t=4),t},add:function(e,t,n){n=parseInt(n,10);var i;switch(i=this.strToDate(e),t){case"y":i.setFullYear(i.getFullYear()+n);break;case"m":var r=i.getDate();i.setDate(1),i.setMonth(i.getMonth()+n);var o=this.maxDay(i);i.setDate(Math.min(r,o));break;case"d":i.setDate(i.getDate()+n);break;case"q":i.setMonth(i.getMonth()+3*n);break;case"w":i.setDate(i.getDate()+7*n);break;case"h":i.setHours(i.getHours()+n);break;case"n":i.setMinutes(i.getMinutes()+n);break;case"s":i.setSeconds(i.getSeconds()+n);break;case"l":i.setMilliseconds(i.getMilliseconds()+n)}return i},addDate:function(){return this.add.apply(this,arguments)},reduce:function(e,t,n){return this.add(e,t,-1*parseInt(n,10))},reduceDate:function(e,t,n){return this.add(e,t,-1*parseInt(n,10))},diff:function(e,t,n){switch(e=this.strToDate(e),t=this.strToDate(t),n){case"d":case"w":e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate());break;case"h":e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());break;case"n":e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());break;case"s":e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}var i=e.getTime(),r=t.getTime(),o=NaN;switch(n){case"y":o=t.getFullYear()-e.getFullYear();break;case"m":o=12*(t.getFullYear()-e.getFullYear())+t.getMonth()-e.getMonth();break;case"q":o=4*(t.getFullYear()-e.getFullYear())+this.getQuarter(t.getMonth()+1)-this.getQuarter(e.getMonth()+1);break;case"d":o=Math.floor(r/864e5)-Math.floor(i/864e5);break;case"w":o=Math.floor((r+3456e5)/6048e5)-Math.floor((i+3456e5)/6048e5);break;case"h":o=Math.floor(r/36e5)-Math.floor(i/36e5);break;case"n":o=Math.floor(r/6e4)-Math.floor(i/6e4);break;case"s":o=Math.floor(r/1e3)-Math.floor(i/1e3);break;case"l":o=r-i}return o},diffDate:function(){return this.diff.apply(this,arguments)},toArray:function(e){var t=[];return e=this.strToDate(e),t[0]=e.getFullYear(),t[1]=e.getMonth()+1,t[2]=e.getDate(),t[3]=e.getHours(),t[4]=e.getMinutes(),t[5]=e.getSeconds(),t},isVaild:function(e){var t,n=/(\d{1,4})/gm,i=e.match(n);if(!i.length)return!1;var r=this.toArray(e);return i[0]!==t&&r[0]!=i[0]?!1:i[1]!==t&&r[1]!=i[1]?!1:i[2]!==t&&r[2]!=i[2]?!1:i[3]!==t&&r[3]!=i[3]?!1:i[4]!==t&&r[4]!=i[4]?!1:i[5]!==t&&r[5]!=i[5]?!1:!0},dateObject:function(e){return e=this.strToDate(e),{"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()}},part:function(e,t,n){e=this.strToDate(e);var i="",r=n||["","","","","","",""];switch(t){case"y":i=e.getFullYear();break;case"m":i=e.getMonth()+1;break;case"d":i=e.getDate();break;case"w":i=r[e.getDay()];break;case"ww":i=this.weekOfYear(e);break;case"h":i=e.getHours();break;case"n":i=e.getMinutes();break;case"s":i=e.getSeconds()}return i},maxDay:function(e){var t=this.strToDate(e);return t=this.clone(t),t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t.getDate()},getDays:function(e){for(var t=[],n=this.maxDay(e),i=1;n>=i;i++)t.push(i);return t},firstDay:function(e){var e=this.clone(e);return e.setDate(1)},lastDay:function(e){var e=this.clone(e);return e.setDate(this.maxDay(e)),e},getMonths:function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},getYears:function(){for(var e=[],t=1900;2099>=t;t++)e.push(t);return e},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},dayOfYear:function(e,t){var n=this.strToDate(e,t),i=this.clone(n);return i.setMonth(0),i.setDate(1),this.diff(i,n,"d")+1},weekOfYear:function(e){return this.iso8601Week(this.strToDate(e))},weekOfMonth:function(e){},error:function(e){}})}),define("Nex/date/Calendar",["require","Nex/container/Container","Nex/util/Date"],function(e){e("Nex/container/Container"),e("Nex/util/Date");var t=Nex.define("Nex.date.Calendar","Nex.container.Container",{xtype:"calendar",alias:"Nex.Calendar",Date:Nex.util.Date,configs:function(e){return{prefix:"nexcal-",autoScroll:!1,denyEvents:"focusin focusout focus blur scroll keydown keyup keypress mousewheel mouseover mouseout".split(/\s+/),disabledItems:!0,width:"auto",height:"auto",borderCls:e.borderCls+" nex-calendar-border",containerCls:e.containerCls+" nex-calendar",autoScrollCls:e.autoScrollCls+" nex-calendar-auto-scroll",dateFormat:"YYYY-MM-DD",sepStr:",",dayNames:["","","","","","",""],dayNamesShort:["","","","","","",""],dayNamesMin:["","","","","","",""],weekHeader:"",monthNames:["","","","","","","","","","","",""],monthNamesShort:["","","","","","","","","","","",""],prevMonthTitle:"",nextMonthTitle:"",prevYearTitle:"",nextYearTitle:"",firstDay:0,weekIndex:"firstDay",systemDate:null,currentDate:null,_dateCalcReg:/([\-|\+]\d+)(y|m|d|w|q)/i,value:"",getFormater:null,setFormater:null,autoSelectToday:!1,_selectDate:{},multiSelect:!1,autoFillOthers:!1,autoChangeMonth:!0,showOtherMonths:!0,_showPrevMonths:!0,_showNextMonths:!0,otherMonthsDisabled:!1,showWeek:!1,showDateTips:!0,dateTipsTag:"title",dateTipsFormat:"YYYY-MM-DD",dateTipsFilter:null,dateFilter:null,maxDate:null,minDate:null,disabledDate:[],enabledDate:[],numberOfMonths:1,topTitleFormat:"YYYYM",topTitleFilter:null,showChangeMonthBtn:!0,_showChangeMonthPrevBtn:!0,_showChangeMonthRightBtn:!0,showChangeYearBtn:!0,_showChangeYearNextBtn:!0,_showChangeYearRightBtn:!0,ymChangeEnable:!0,autoShowymPickerIndex:null,ymPickerDuration:100,ymPickerAnim:"easeOutQuad",ymPickerAutoClose:!0,yPickerDelay:300,yPickerPoll:50}},initComponent:function(){this.callParent(arguments),this._initCalendar(),this._resizeAuto()},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onDateClick.cal",e._onDateClick,e),Nex.IEVer<8&&e.bind("onResize.cal",e._resizeAuto,e),e},_initCalendar:function(){var e=this;this.configs;e._initSystemDate()._setCalendar()},_initSystemDate:function(){var e=this,t=this.configs;return null===t.systemDate&&(t.systemDate=new Date),e.Date.isDate(t.systemDate)||(t.systemDate=e.Date.parseDate(t.systemDate,t.dateFormat)||new Date),t._currentDate=t.currentDate,t.currentDate=t.currentDate||new Date(t.systemDate.getTime()),e.Date.isDate(t.currentDate)||(t.currentDate=e.Date.parseDate(t.currentDate,t.dateFormat)),""===t.value&&t.autoSelectToday&&(t.value=0),e._parseValue(),e._parseMaxMinDate(),e},getSystemDate:function(){return this.configs.systemDate},__parse:function(e,t){var n=this,i=this.configs;if("number"===$.type(e))n.Date.add(t,"d",e);else if("string"===$.type(e)&&i._dateCalcReg.test(e)){var r=e.split(/\s+/gi);$.each(r,function(e,r){var o=i._dateCalcReg.exec(r);n.Date.add(t,o[2],o[1])})}else t=n.Date.parseDate(e,i.dateFormat);return t},_parseValue:function(e){var t=this,n=[],i=this.configs,r=i.currentDate,e=t._undef(e,i.value);e=$.isArray(e)?e:(e+"").split(i.sepStr),i._selectDate={};for(var o=0;o<e.length;o++)if(""!==e[o]&&null!==e[o]){var a=t.__parse(e[o],t.Date.clone(r));n.push(a),i._selectDate[t.format(a,"YYYYMMDD")]=!0}return i.value=n,i.value.sort(function(e,t){return e-t}),i._currentDate||(i.currentDate=t._getCurrentDate()),t.fireEvent("onParseDefaultDate",[i]),t},_parseMaxMinDate:function(){var e=this,t=this.configs,n=t.currentDate;null!==t.maxDate&&(t.maxDate=e.Date.parseDate(t.maxDate,t.dateFormat)),null!==t.minDate&&(t.minDate=e.Date.parseDate(t.minDate,t.dateFormat));var i=$.isArray(t.disabledDate)?t.disabledDate:[t.disabledDate],r=$.isArray(t.enabledDate)?t.enabledDate:[t.enabledDate];return t.disabledDate=[],t.enabledDate=[],$.each(i,function(i,r){var o=e.__parse(r,e.Date.clone(n));t.disabledDate.push(o)}),$.each(r,function(i,r){var o=e.__parse(r,e.Date.clone(n));t.enabledDate.push(o)}),e},_isEqual:function(e,t){return this.format(e,"YYYYMMDD")===this.format(t,"YYYYMMDD")?!0:!1},_isEqualDate:function(e,t){return this._isEqual(e,t)},_isEqualMonth:function(e,t){return this.format(e,"YYYYMM")===this.format(t,"YYYYMM")?!0:!1},_isEqualYear:function(e,t){return this.format(e,"YYYY")===this.format(t,"YYYY")?!0:!1},_inDisabledList:function(e){for(var t=this,n=this.configs,i=!1,r=n.disabledDate,o=0;o<r.length;o++)if(t._isEqual(e,r[o])){i=!0;break}return i},_inEnabledList:function(e){for(var t=this,n=this.configs,i=!1,r=n.enabledDate,o=0;o<r.length;o++)if(t._isEqual(e,r[o])){i=!0;break}return i},isDisabledDate:function(e){var t=this,n=this.configs,e=t.Date.parseDate(e,n.dateFormat);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var i=!1;return null!==n.maxDate&&(i=e>n.maxDate?!0:!1),null===n.minDate||i||(i=e<n.minDate?!0:!1),i||(i=t._inDisabledList(e)),i&&(i=!t._inEnabledList(e)),i},setDisabledDate:function(e){var t=this,n=this.configs,i=n.currentDate,e=$.isArray(e)?e:[e];return $.each(e,function(e,r){if(""!==r&&null!==r){var o=t.__parse(r,t.Date.clone(i)),a=t.format(o,"YYYYMMDD");n.disabledDate.push(o),$("#"+n.id+"_"+a).addClass("nex-cal-date-disabled")}}),t},setEnabledDate:function(e){var t=this,n=this.configs,i=n.currentDate,e=$.isArray(e)?e:[e];return $.each(e,function(e,r){if(""!==r&&null!==r){var o=t.__parse(r,t.Date.clone(i)),a=t.format(o,"YYYYMMDD");n.enabledDate.push(o),$("#"+n.id+"_"+a).removeClass("nex-cal-date-disabled")}}),t},_getCurrentDate:function(){for(var e=this,t=this.configs,n=t.numberOfMonths,i=e.Date,r=t.value,o=r.length,a=t.currentDate,s=0;o>s;s++){for(var l=!0,d=0,c=r[s],u=s+1;o>u;u++){var h=r[u];if(d=Math.abs(i.diff(c,h,"m")),d+1>n){l=!1;break}}if(l){a=c;break}}return a},format:function(e,t){return this.Date.format(e,t)},_getTheadHtml:function(e){var t=e||this.configs,n=t.dayNamesMin,i=['<tr class="nex-cal-row nex-cal-row-h">'];t.showWeek&&(i.push('<th class="nex-cal-cell nex-cal-cell-w">'),i.push(t.weekHeader),i.push("</th>"));for(var r=7+t.firstDay,o=t.firstDay;r>o;o++){var a=o%7;i.push('<th class="nex-cal-cell nex-cal-cell-h nex-cal-day'+a+'" data-day="'+a+'">'),i.push(n[a]),i.push("</th>")}return i.push("</tr>"),i.join("")},_getDateRange:function(e,t){var n=this,i=t||this.configs,r=e||i.currentDate,o=(n.Date.maxDay(r),new Date(r.getTime()));o.setDate(1);var a,s;if(i.showOtherMonths){var l=o.getDay();if(l!=i.firstDay){var d=l<i.firstDay?7+l:l;n.Date.add(o,"d",i.firstDay-d)}else n.Date.add(o,"d",-7);a=n.Date.clone(o),s=n.Date.clone(n.Date.add(o,"d",41))}else{s=n.Date.lastDay(o);var c=s.getDay(),u=c<i.firstDay?7+c:c;n.Date.add(s,"d",u-c);var l=o.getDay(),d=l<i.firstDay?7+l:l;n.Date.add(o,"d",i.firstDay-d),a=n.Date.clone(o)}return[a,s]},_getTbodyHtml:function(e){for(var t=this,n=this.configs,i=e||this.configs,r=t._getDateRange(i.currentDate,i),o=t.Date.diff(r[0],r[1],"d")+1,a=r[0],s=(r[1],[]),l=[],d=0,c=0;o>c;c++)c%7==0&&(l[d]=[]),l[d].push(t.Date.clone(a)),c%7==6&&d++,t.Date.add(a,"d",1);if(i.autoFillOthers)for(var u=0;6>u;u++){var h=l[u]||[];l[u]=h;for(var f=h.length;7>f;f++)h[f]=null}var g=function(){var e=[];return e.push('<td class="nex-cal-pad">'),e.push("&nbsp;"),e.push("</td>"),e.join("")},p=l.length,v=p?l[0][6]:null;if(v)for(var m=0;p>m;m++){var _=l[m];if(0==m){var x=_[6];if(t._isOtherMonth(x,i.currentDate)&&!i._showPrevMonths)continue}if(m==p-1){var b=_[0];if(t._isOtherMonth(b,i.currentDate)&&!i._showNextMonths)continue}if(s.push('<tr class="nex-cal-row nex-cal-row-b">'),i.showWeek){var w=0;"firstDay"!=i.weekIndex&&(w=parseInt(i.weekIndex,10)<i.firstDay?7-i.firstDay+i.weekIndex:i.weekIndex-i.firstDay);var y=t.Date.weekOfYear(_[w]);s.push('<td class="nex-cal-cell nex-cal-cell-w" data-week="'+y+'">'),s.push(y),s.push("</td>")}for(var d=0;7>d;d++){var C=_[d];if(null!==C&&t.Date.isDate(C)){var D=C.getDay(),S=t.Date.dateObject(C),$=t._isOtherMonth(C,i.currentDate);if(!$||i.showOtherMonths){if($){if(C.getTime()<i.currentDate.getTime()&&!i._showPrevMonths){s.push(g());continue}if(C.getTime()>i.currentDate.getTime()&&!i._showNextMonths){s.push(g());continue}}var N="";i.showDateTips&&(N=t._dateTipsFilter(C));var T=t._isToday(C),E=["nex-cal-cell","nex-cal-cell-b","nex-cal-day"+D];t.fireEvent("onSetDateClass",[{"class":E,data:C},n]),$&&E.push("nex-cal-other-month"),T&&E.push("nex-cal-today"),t.isDisabledDate(C)&&E.push("nex-cal-date-disabled"),s.push('<td id="'+i.id+"_"+t.format(C,"YYYYMMDD")+'" calid="'+i.id+'" class="'+E.join(" ")+'" data-year="'+S["y+"]+'" data-month="'+S["M+"]+'" data-date="'+S["d+"]+'" '+N+">"),s.push(t._dateFiter(t.format(C,"d"),C)),s.push("</td>")}else s.push(g())}else s.push(g())}s.push("</tr>")}return s.join("")},_getCalendarHtml:function(e){var t=this,n=this.configs;"string"===$.type(e)&&(e={currentDate:e});var e=e||{},i=$.extend({},n);e=$.extend({},i,e);var r=['<table class="nex-cal-table" cellpadding="0" cellspacing="0" border="0">',"<thead>"+t._getTheadHtml(e)+"</thead>","<tbody>"+t._getTbodyHtml(e)+"</tbody>","</table>"];return r.join("")},_dateTipsFilter:function(e){var t=this,n=this.configs,i="",r="";i+=n.dateTipsTag+'="',r+=$.isFunction(n.dateTipsFilter)?n.dateTipsFilter.call(t,t.format(e,n.dateTipsFormat),e):t.format(e,n.dateTipsFormat);var o={value:r,date:e};return t.fireEvent("onDateTipsFilter",[o,n]),i+=Nex.htmlEncode(o.value),i+='"'},_dateFiter:function(e,t){var n=this,i=this.configs,r=e;
$.isFunction(i.dateFilter)&&(r=i.dateFilter.call(n,r,t));var o={value:r,date:t};return n.fireEvent("onDateFilter",[o,i]),o.value},_isToday:function(e){var t=this,n=this.configs,i=n.systemDate;"string"===$.type(e)&&(e=t.Date.strToDate(e));var r=t.Date.dateObject(i),o=t.Date.dateObject(e);return r["y+"]!=o["y+"]?!1:r["M+"]!=o["M+"]?!1:r["d+"]!=o["d+"]?!1:!0},_isOtherMonth:function(e,t){var n=this,i=this.configs,r=t||i.currentDate;"string"===$.type(e)&&(e=n.Date.strToDate(e));var o=n.Date.dateObject(r),a=n.Date.dateObject(e);return o["y+"]!=a["y+"]?!0:o["M+"]!=a["M+"]?!0:!1},_setCalendarItemHeader:function(e,t){var n=this,i=this.configs,t=t||this.configs,r=$("#"+i.id+"_item"+e),o=$('<div id="'+i.id+"_item"+e+'_header" class="nex-cal-item-header"></div>');r.append(o);var a=n.format(t.currentDate,i.topTitleFormat);$.isFunction(t.topTitleFilter)&&(a=t.topTitleFilter.call(n,t.currentDate));var s=['<div class="nex-cal-item-title">','<div class="nex-cal-prev-icons">',t.showChangeYearBtn&&t._showChangeYearNextBtn?'<a href="javascript:void(0);" title="'+i.prevYearTitle+'" class="nex-cal-aicon nex-cal-prevyear"></a>':"",t.showChangeMonthBtn&&t._showChangeMonthPrevBtn?'<a href="javascript:void(0);" title="'+i.prevMonthTitle+'" class="nex-cal-aicon nex-cal-prevmonth"></a>':"","</div>",'<span class="nex-cal-ymlabel">'+a+"</span>",'<div class="nex-cal-next-icons">',t.showChangeMonthBtn&&t._showChangeMonthRightBtn?'<a href="javascript:void(0);" title="'+i.nextMonthTitle+'" class="nex-cal-aicon nex-cal-nextmonth"></a>':"",t.showChangeYearBtn&&t._showChangeYearRightBtn?'<a href="javascript:void(0);" title="'+i.nextYearTitle+'" class="nex-cal-aicon nex-cal-nextyear"></a>':"","</div>","</div>"];return o.html(s.join("")),n},_setCalendarItemBody:function(e,t){var n=this,i=this.configs,t=t||this.configs,r=$("#"+i.id+"_item"+e),o=$('<div id="'+i.id+"_item"+e+'_body" class="nex-cal-item-body">'+n._getCalendarHtml(t)+"</div>");return r.append(o),n},_setCalendarItemFooter:function(e,t){var n=this,i=this.configs,t=t||this.configs,r=$("#"+i.id+"_item"+e),o=$('<div id="'+i.id+"_item"+e+'_footer" class="nex-cal-item-footer"></div>');return r.append(o),n},getCurrentDate:function(){return this.configs.currentDate},setCurrentDate:function(e){var t=this.configs;return t.currentDate=this.Date.parseDate(e,t.dateFormat),this},_setCalendarItemEvents:function(){var e=this,t=this.configs,n=e.getDom(),i=function(n,i,r){var o=$(this),a=new Date(o.data("year"),parseInt(o.data("month"),10)-1,o.data("date")),s=e.fireEvent(n,[a,this,i,t]);s===!1?(i.stopPropagation(),i.preventDefault()):$.isFunction(r)&&r.call(this,a)},r={"click.cal":function(e){i.call(this,"onDateClick",e)},"mouseenter.cal":function(e){i.call(this,"onDateOver",e,function(){$(this).hasClass("nex-cal-date-disabled")||$(this).addClass("nex-cal-date-over")})},"mouseleave.cal":function(e){i.call(this,"onDateOut",e,function(){$(this).hasClass("nex-cal-date-disabled")||$(this).removeClass("nex-cal-date-over")})},"mousedown.cal":function(e){i.call(this,"onDateMouseDown",e)},"mouseup.cal":function(e){i.call(this,"onDateMouseUp",e)},"contextmenu.cal":function(e){i.call(this,"onDateContextMenu",e)},"dblclick.cal":function(e){i.call(this,"onDateDblClick",e)}};return n.undelegate(".cal").delegate('[calid="'+t.id+'"]',r).delegate(".nex-cal-prevyear",{"click.cal":function(n){var i=e.fireEvent("onPrevYear",[t]);i!==!1&&e.prevYear()}}).delegate(".nex-cal-nextyear",{"click.cal":function(n){var i=e.fireEvent("onNextYear",[t]);i!==!1&&e.nextYear()}}).delegate(".nex-cal-prevmonth",{"click.cal":function(n){var i=e.fireEvent("onPrevMonth",[t]);i!==!1&&e.prevMonth()}}).delegate(".nex-cal-nextmonth",{"click.cal":function(n){var i=e.fireEvent("onNextMonth",[t]);i!==!1&&e.nextMonth()}}).delegate(".nex-cal-ymlabel",{"click.cal":function(n){var i=$(this).closest(".nex-cal-item"),r=i.attr("citem"),o=i.data("year"),a=parseInt(i.data("year"),10),s=new Date(o,a-1),l=e.fireEvent("onItemTitleClick",[s,r,t]);l!==!1&&t.ymChangeEnable&&e.showYearMonthPicker(r)}}),e},_getMonthPickerHtml:function(e){for(var t=this.configs,n=[[0,1,2,3],[4,5,6,7],[8,9,10,11]],i="",r=0;r<n.length;r++){var o=n[r];i+="<tr>";for(var a=0;a<o.length;a++)i+='<td width="25%" class="nex-cal-mpicker-b nex-cal-mpicker-'+o[a]+'" data-month="'+(o[a]+1)+'" id="'+t.id+"_"+e+"_m"+o[a]+'">'+t.monthNames[o[a]]+"</td>";i+="</tr>"}var s=['<table class="nex-cal-mpicker-table" cellpadding="0" cellspacing="0" border="0">',i,"</table>"];return s.join("")},_getYearPickerHtml:function(e){},_getYearMonthPickerHtml:function(e){var t=this,n=this.configs,i=['<div id="'+n.id+"_item"+e+'_ympicker" class="nex-cal-ympicker">','<div id="'+n.id+"_item"+e+'_ypicker_wrap" class="nex-cal-ypicker-wrap">','<span class="prev-ypicker"></span><input class="nex-cal-ypicker" id="'+n.id+"_item"+e+'_ypicker" type="text" value=""><span class="next-ypicker"></span>',"</div>",'<div id="'+n.id+"_item"+e+'_line" class="nex-cal-ympicker-line"></div>','<div id="'+n.id+"_item"+e+'_mpicker" class="nex-cal-mpicker-wrap">',t._getMonthPickerHtml(e),"</div>","</div>"];return i.join("")},__activePicker:null,hideYearMonthPicker:function(e,t){var n=this,i=this.configs,e=n._undef(e,n.__activePicker);if(null===e)return $.isFunction(t)&&t(),n;n.__activePicker=null;var r=$("#"+i.id+"_item"+e+"_ympicker");r.stop(!0).animate({top:-1*r._outerHeight(),opacity:0},i.ymPickerDuration||1,i.ymPickerAnim,function(){$.isFunction(t)&&t(),n.fireEvent("onYearMonthPickerHide",[r,e,i])})},showYearMonthPicker:function(e){var t=this,n=this.configs,e=t._undef(e,1),i=$("#"+n.id+"_item"+e),r=$("#"+n.id+"_item"+e+"_body"),o=$("#"+n.id+"_item"+e+"_ympicker"),a=!1;o.length||(o=$(t._getYearMonthPickerHtml(e)),r.append(o),t.setYearMonthPickerEvents(e),a=!0,t.fireEvent("onYearMonthPickerCreate",[o,e,n]));var s=i.data("year"),l=i.data("month");return t.__activePicker!==e||a?(t.hideYearMonthPicker(t.__activePicker),t.setYearMonthPickerSize(e),t.setYearMonthPickerValue(e,s,l),t.__activePicker=e,o.stop(!0).animate({top:0,opacity:1},n.ymPickerDuration||1,n.ymPickerAnim,function(){t.fireEvent("onYearMonthPickerShow",[o,e,n])})):t.hideYearMonthPicker(e),t},setYearMonthPickerSize:function(e){var t=this.configs,n=$("#"+t.id+"_item"+e+"_body"),i=n.width(),r=n.height(),o=$("#"+t.id+"_item"+e+"_ympicker");o._outerHeight(r),o._outerWidth(i);var a=Math.min(o.height(),r),s=Math.min(o.width(),i),l=a-$("#"+t.id+"_item"+e+"_ypicker_wrap")._outerHeight(!0)-$("#"+t.id+"_item"+e+"_line")._outerHeight(!0),d=$("#"+t.id+"_item"+e+"_mpicker");d._outerHeight(l),d._outerWidth(s)},setYearMonthPickerValue:function(e,t,n){var i=this.configs,r=$("#"+i.id+"_item"+e+"_ympicker");n--,$(".nex-cal-month-selected",r).removeClass("nex-cal-month-selected"),$("#"+i.id+"_item"+e+"_ypicker").val(t),$("#"+i.id+"_"+e+"_m"+n).addClass("nex-cal-month-selected")},_selectMonthPicker:function(e,t,n,i){var r=this,o=this.configs,a=$("#"+o.id+"_item"+e+"_ympicker");$(".nex-cal-month-selected",a).removeClass("nex-cal-month-selected"),$(i).addClass("nex-cal-month-selected");var s=new Date(t,n-1);r.Date.add(s,"m",-1*e),o.ymPickerAutoClose&&r.hideYearMonthPicker(e,function(){r.changeMonth(s.getFullYear(),s.getMonth()+1)})},setYearMonthPickerEvents:function(e){var t=this,n=this.configs,i=$("#"+n.id+"_item"+e+"_ympicker");$("#"+n.id+"_item"+e+"_ypicker_wrap").disableSelection();var r=0,o=0;i.undelegate(".cal").delegate(".nex-cal-mpicker-b",{"click.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker").val(),o=parseInt($(this).data("month"),10),a=t.fireEvent("onMonthPickerClick",[r,o,this,i,n]);a!==!1&&t._selectMonthPicker(e,r,o,this)},"mouseenter.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker").val(),o=parseInt($(this).data("month"),10),a=t.fireEvent("onMonthPickerOver",[r,o,this,i,n]);a!==!1&&$(this).addClass("nex-cal-mpicker-over")},"mouseleave.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker").val(),o=parseInt($(this).data("month"),10),a=t.fireEvent("onMonthPickerOut",[r,o,this,i,n]);a!==!1&&$(this).removeClass("nex-cal-mpicker-over")},"dblclick.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker").val(),o=parseInt($(this).data("month"),10),a=t.fireEvent("onMonthPickerDblClick",[r,o,this,i,n])}}).delegate(".nex-cal-ypicker",{"click.cal":function(e){var i=$(this).val(),r=t.fireEvent("onYearPickerClick",[i,this,e,n]);r!==!1&&$(this).select()},"mouseente.calr":function(e){var i=$(this).val(),r=t.fireEvent("onYearPickerOver",[i,this,e,n]);r!==!1&&$(this).addClass("nex-cal-ypicker-over")},"mouseleave.cal":function(e){var i=$(this).val(),r=t.fireEvent("onYearPickerOut",[i,this,e,n]);r!==!1&&$(this).removeClass("nex-cal-ypicker-over")},"focus.cal":function(e){var i=$(this).val(),r=t.fireEvent("onYearPickerFocus",[i,this,e,n]);r!==!1&&($(this).addClass("nex-cal-ypicker-focus"),setTimeout(function(){$(this).select()},0))},"blur.cal":function(e){var i=$(this).val(),r=t.fireEvent("onYearPickerBlur",[i,this,e,n]);r!==!1&&$(this).removeClass("nex-cal-ypicker-focus")}}).delegate(".prev-ypicker",{"click.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(r.val(),10);var o=t.fireEvent("onYearPickerPrevClick",[y,this,i,n]);o!==!1&&(y--,y=Math.max(0,y),r.val(y))},"mousedown.cal":function(i){var a=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(a.val(),10);var s=t.fireEvent("onYearPickerPrevMouseDown",[y,this,i,n]);s!==!1&&(r=setTimeout(function(){o=setInterval(function(){y--,y=Math.max(0,y),a.val(y)},n.yPickerPoll)},n.yPickerDelay))},"mouseup.cal":function(i){var a=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(a.val(),10);var s=t.fireEvent("onYearPickerPrevMouseDownUp",[y,this,i,n]);s!==!1&&(clearTimeout(r),clearTimeout(o))},"mouseleave.cal":function(){clearTimeout(r),clearTimeout(o)}}).delegate(".next-ypicker",{"click.cal":function(i){var r=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(r.val(),10);var o=t.fireEvent("onYearPickerNextClick",[y,this,i,n]);o!==!1&&(y++,r.val(y))},"mousedown.cal":function(i){var a=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(a.val(),10);var s=t.fireEvent("onYearPickerNextMouseDown",[y,this,i,n]);s!==!1&&(r=setTimeout(function(){o=setInterval(function(){y++,a.val(y)},n.yPickerPoll)},n.yPickerDelay))},"mouseup.cal":function(i){var a=$("#"+n.id+"_item"+e+"_ypicker");y=parseInt(a.val(),10);var s=t.fireEvent("onYearPickerNextMouseDownUp",[y,this,i,n]);s!==!1&&(clearTimeout(r),clearTimeout(o))},"mouseleave.cal":function(){clearTimeout(r),clearTimeout(o)}})},getYearMonthPickerDate:function(e){var t=this,n=this.configs,e=t._undef(e,0),i=$("#"+n.id+"_item"+e+"_ypicker").val(),r=$("#"+n.id+"_item"+e+"_mpicker").find(".nex-cal-month-selected:first").data("month");return new Date(i,parseInt(r,10))},setYearMonthPickerDate:function(e,t,n){return this.setYearMonthPickerValue(e,t,n)},_setCalendarHeader:function(){var e=this,t=this.configs,n=$('<div class="nex-cal-header" id="'+t.id+'_header"></div>');return e.el.append(n),e.headerEl=n,e.fireEvent("onCalendarHeaderCreate",[n,t]),e},getBody:function(){return this.bodyEl},_setCalendarBody:function(){var e=this,t=this.configs,n=$('<div class="nex-cal-body" id="'+t.id+'_body"></div>');return e.el.append(n),e.bodyEl=n,e.fireEvent("onCalendarBodyCreate",[n,t]),e},_setCalendarFooter:function(){var e=this,t=this.configs,n=$('<div class="nex-cal-footer" id="'+t.id+'_footer"></div>');return e.el.append($('<div class="nex-cal-clear"></div>')).append(n).append($('<div class="nex-cal-clear"></div>')),e.footerEl=n,e.fireEvent("onCalendarFooterCreate",[n,t]),e},_setCalendar:function(){var e=this;this.configs;return e._setCalendarHeader()._setCalendarBody()._setCalendarFooter()._setCalendarItemEvents()._setCalendarItems()._afterRender(),e},_getCalendarItemsTpl:function(e){var t=this.configs,e=this._undef(e,1),n=[];n.push('<table cellpadding="0" cellspacing="0" border="0" class="nex-cal-items-table" id="'+t.id+'_items_table">',"<tbody>","<tr>");for(var i=0;e>i;i++){n.push('<td class="nex-cal-item-table-td" citem="'+i+'">','<div id="'+t.id+"_item"+i+'" citem='+i+' class="nex-cal-item"></div>',"</td>");var r=!0;i==e-1&&(r=!1);var o={show:r},a=this.fireEvent("onSetItemSplitTd",[o,i,e,t]);a!==!1&&o.show&&n.push('<td class="nex-cal-item-split-td" citem="'+i+'">','<div class="nex-cal-item-split-line"></div>',"</td>")}return n.push("</tr>","</tbody>","</table>"),n.join("")},_setCalendarItems:function(){var e=this,t=this.configs,n=parseInt(t.numberOfMonths,10)||1;e.bodyEl.html(e._getCalendarItemsTpl(n));for(var i=n-1,r=0;n>r;r++){var o=$.extend({},t);o.currentDate=new Date(t.currentDate.getTime()),e.Date.add(o.currentDate,"m",r),0==r?(o._showChangeMonthPrevBtn=!0,o._showChangeYearNextBtn=!0,o._showPrevMonths=!0):(o._showChangeMonthPrevBtn=!1,o._showChangeYearNextBtn=!1,o._showPrevMonths=!1),r==i?(o._showChangeMonthRightBtn=!0,o._showChangeYearRightBtn=!0,o._showNextMonths=!0):(o._showChangeMonthRightBtn=!1,o._showChangeYearRightBtn=!1,o._showNextMonths=!1),t.showOtherMonths&&(0==r||r==i?o.showOtherMonths=!0:o.showOtherMonths=!1);var a=$("#"+t.id+"_item"+r),s=e.Date.dateObject(o.currentDate);a.attr("data-year",s["y+"]),a.attr("data-month",s["M+"]),e.fireEvent("onBeforeCalendarItemCreate",[o,r,t]),e._setCalendarItemHeader(r,o)._setCalendarItemBody(r,o)._setCalendarItemFooter(r,o),e.fireEvent("onCalendarItemCreate",[a,r,t])}return t._isInit||e._refreshCalendarItemsSize(),e._afterRenderItems(),e.fireEvent("onCalendarItemsRender",[t]),this},_currentDate:null,_afterRenderItems:function(){this._currentDate=this.Date.clone(this.getCurrentDate()),this._refreshSelectDate()},_refreshItems:function(){this._setCalendarItems(),this._resizeAuto()},refreshItems:function(e){return!e&&this._currentDate&&this._isEqualMonth(this._currentDate,this.getCurrentDate())?this:(this._refreshItems(),this.fireEvent("onRefreshCalendarItems",[this.configs]),this)},refreshCalendar:function(e){return this.refreshItems(e)},prevMonth:function(e){var t=this,n=this.configs,e=t._undef(e,1);return t.Date.add(n.currentDate,"m",-1*Math.abs(e)),t.refreshItems(),t},nextMonth:function(e){var t=this,n=this.configs,e=t._undef(e,1);return t.Date.add(n.currentDate,"m",Math.abs(e)),t.refreshItems(),t},prevYear:function(e){var t=this,n=this.configs,e=t._undef(e,1);return t.Date.add(n.currentDate,"y",-1*Math.abs(e)),t.refreshItems(),t},nextYear:function(e){var t=this,n=this.configs,e=t._undef(e,1);return t.Date.add(n.currentDate,"y",Math.abs(e)),t.refreshItems(),t},_resizeAuto:function(){var e=this,t=this.configs;if((6==Nex.IEVer||7==Nex.IEVer)&&e.isAutoWidth()){var n=$("#"+t.id+"_items_table")._width();e.getBody().width(n)}},_isOutside:function(e){for(var t=this,n=this.configs,i=n.numberOfMonths,r=0;i>r;r++){var o=t.Date.clone(n.currentDate);if(!t._isOtherMonth(e,t.Date.add(o,"m",r)))return!1}return!0},_onDateClick:function(e,t,n){var i=this,r=this.configs;if(!$(t).hasClass("nex-cal-date-disabled")){var o=i.fireEvent("onBeforeDateSelected",[e,t,n]);o!==!1&&(i._isOutside(e)&&r.autoChangeMonth&&(e>r.currentDate?i.nextMonth():i.prevMonth()),i.toggleSelectDate(e))}},_afterRender:function(){var e=this.configs;this.fireEvent("onCalendarCreate",[e]),null===e.autoShowymPickerIndex||isNaN(parseInt(e.autoShowymPickerIndex,10))||this.showYearMonthPicker(Math.min(e.autoShowymPickerIndex,e.numberOfMonths-1))},_setHeightAuto:function(){var e=this,t=e.configs,n=(t.views,e.getBody()),i=e.getContainer();i._removeStyle("height",!0),n&&n._removeStyle("height",!0),$(".nex-cal-item-body",n)._removeStyle("height",!0)},_setWidthAuto:function(){var e=this,t=e.configs,n=(t.views,e.getBody()),i=e.getContainer();i._removeStyle("width",!0),n&&n._removeStyle("width",!0)},doSetViewSize:function(){var e=this,t=(e.configs,e.getContainer());if(e.callParent(arguments),e.isAutoHeight())t.addClass("nex-cal-height-auto");else{t.removeClass("nex-cal-height-auto");var n=t._height()-e.headerEl._outerHeight()-e.footerEl._outerHeight();e.bodyEl._outerHeight(n)}e.isAutoWidth()?t.addClass("nex-cal-width-auto"):(t.removeClass("nex-cal-width-auto"),e.bodyEl._outerWidth(t._width())),e._refreshCalendarItemsSize()},_refreshCalendarItemsSize:function(){var e=this,t=e.configs;if(!e.isAutoHeight()){var n=e.bodyEl._height();$(".nex-cal-item-table-td,.nex-cal-item-split-td",e.bodyEl).each(function(){$(this)._outerHeight(n)}),$(".nex-cal-item",e.bodyEl).each(function(){var e=$(this),t=e._height()-$(">.nex-cal-item-header",e)._outerHeight()-$(">.nex-cal-item-footer",e)._outerHeight();$(">.nex-cal-item-body",e)._outerHeight(t)})}return!e.isAutoWidth(),e.fireEvent("onSetCalendarItemsSize",[t]),e},_refreshSelectDate:function(){var e=this,t=e.configs,n=null;return $.each(t._selectDate,function(i,r){n=i,r&&t.multiSelect&&e._selectDate(i,!0)}),!t.multiSelect&&n&&e._selectDate(n,!0),e},_unselectAll:function(){var e=this,t=e.configs;return t._selectDate={},$(".nex-cal-date-selected",e.bodyEl).removeClass("nex-cal-date-selected"),e},isSelected:function(e,t){var n=this,i=n.configs,r=n._parseSDate(e,t);return i._selectDate[r]?!0:!1},_parseSDate:function(e,t){var n,i=this,r=i.configs,e=e||r.currentDate,o=i.Date;return t!==!0?(o.isDate(e)||(e=o.strToDate(e,t)),n=i.format(e,"YYYYMMDD")):n=e,n},_selectDate:function(e,t){var n=this,i=n.configs,r=n._parseSDate(e,t),o=i.id+"_"+r;return i.multiSelect||n._unselectAll(),$("#"+o).addClass("nex-cal-date-selected"),i._selectDate[r]=!0,e},_unselectDate:function(e,t){var n=this,i=n.configs,r=n._parseSDate(e,t),o=i.id+"_"+r;return $("#"+o).removeClass("nex-cal-date-selected"),i._selectDate[r]=!1,delete i._selectDate[r],e},unselectAll:function(){var e=this,t=this.fireEvent("onDateUnSelectedAll",[date,m,this.configs]);return t===!1?this:(this._unselectAll(),e.fireEvent("onDateChange",[this.getValue(),this.configs]),this)},unselectDate:function(e,t){var n=this,i=this.fireEvent("onDateSelected",[e,t,this.configs]);return i===!1?this:(this._unselectDate(e,t),n.fireEvent("onDateChange",[this.getValue(),this.configs]),this)},selectDate:function(e,t){var n=this,i=n.configs,r=n.fireEvent("onDateSelected",[e,t,i]);return r===!1?n:(n._selectDate(e,t),n.fireEvent("onDateChange",[this.getValue(),i]),n)},toggleSelectDate:function(e,t){var n=this,i=n.configs;n._parseSDate(e,t);return i.multiSelect&&n.isSelected(e,t)?n.unselectDate(e,t):n.selectDate(e,t),n},_selectDateRange:function(e,t){var n,i=this,r=i.configs;if(e===n)return i;t=t===n?e:t,e=i.Date.parseDate(e,r.dateFormat),t=i.Date.parseDate(t,r.dateFormat);var o=i.Date.diff(e,t,"d");e=i.Date.clone(e),t=i.Date.clone(t);var a,s,l;l=i.getCurrentDate(),a=i.Date.clone(l),a.setDate(1),i.Date.add(a,"d",-7),s=i.Date.clone(a),s=i.Date.add(s,"d",42*r.numberOfMonths);for(var d=function(e){return Math.abs(o)<42*r.numberOfMonths?!1:a>e?!0:e>s?!0:!1},c=0>o?t:e,u=0;u<=Math.abs(o);u++)d(c)?r._selectDate[i.format(c,"YYYYMMDD")]=!0:i._selectDate(c),i.Date.add(c,"d",1);return i},selectDateRange:function(e,t){var n=this,i=n.configs;return n._selectDateRange(e,t),n.fireEvent("onDateChange",[this.getValue(),i]),n.fireEvent("onSelectDateRange",[e,t,i]),n},today:function(){this.goAndSelectDate(this.configs.systemDate)},goAndSelectDate:function(e,t){var n=this;n.configs;return n.selectDate(e),n.goToDate(e),n},goToDate:function(e){var t=this,n=t.configs;return n.currentDate=t.Date.parseDate(e,n.dateFormat),t.refreshItems(),t},changeMonth:function(e,t){var n=this,i=n.configs;return i.currentDate.setFullYear(e),i.currentDate.setMonth(t-1),n.refreshItems(),n},changeYear:function(e){var t=this,n=t.configs;return n.currentDate.setFullYear(e),t.refreshItems(),t},setValue:function(e){var t=this,n=(t.configs,[].slice.apply(arguments));return t.fireEvent("onSetValue",[n]),t._parseValue(n[0]),t.refreshItems(!0),this},setDate:function(){return this.setValue.apply(this,arguments)},getValue:function(){var e=this,t=e.configs,n=[];$.each(t._selectDate,function(i,r){if(r){var o=e.Date.parseDate(i,"YYYYMMDD");n.push(e.format(o,t.dateFormat))}});var i=null;if($.isFunction(t.getFormater)){var r=t.getFormater.call(e,n);i=r===undef?i:r}else i=t.multiSelect?n:n[0];var o={value:i};return e.fireEvent("onGetValue",[o]),o.value},getStrValue:function(){var e=this.getValue();return $.isArray(e)&&(e=e.join(this.configs.sepStr)),e},getDate:function(){return this.getValue.apply(this,arguments)},getStrDate:function(){return this.getStrValue.apply(this,arguments)}});return t.addStatics(Nex.util.Date),t}),define("Nex/date/DatePicker",["require","Nex/date/Calendar","Nex/showat/ShowAt","Nex/button/Button"],function(e){return e("Nex/date/Calendar"),e("Nex/showat/ShowAt"),e("Nex/button/Button"),Nex.define("Nex.date.DatePicker","Nex.date.Calendar",{xtype:"datepicker",alias:"Nex.DatePicker",configs:function(e){return{"onStart._sys0001":function(){this._setDatePickerCls()},"onCalendarFooterCreate._sys0001":function(e,t){var n=$('<div id="'+t.id+'_footer_inner" class="nex-cal-footer-inner"></div>');e.append(n),this._setFooterBtns(n)},"onYearMonthPickerShow._sys0001":function(e,t,n){this._setAutoCloseYearMonthPicker.apply(this,arguments)},"onYearMonthPickerHide._sys0001":function(e,t,n){this._unsetAutoCloseYearMonthPicker.apply(this,arguments)},"onDateClick._sys0001":function(){this.checkToSubmit()},borderCls:e.borderCls+" nex-datepicker-border",containerCls:e.containerCls+" nex-datepicker",display:"absolute",showAt:{},_showAt:{xAlign:"left",yAlign:"bottom"},showOkBtn:!1,showCancelBtn:!1,showTodayBtn:!1,okText:"",cancelText:"",todayText:"",btns:[],submitToString:!0,autoSubmit:!0}},initComponent:function(){this.callParent(arguments),"absolute"===this.configs.display&&this.showPos()},_setDatePickerCls:function(){var e=this,t=e.configs;t.containerCls+=" nex-datepicker-"+t.display},_setAutoCloseYearMonthPicker:function(e,t,n){if(n.ymPickerAutoClose){var i=this,r=n.id+"_"+t;$(document).bind("mousewheel.cal_"+r+" contextmenu.cal_"+r+" mousedown.cal_"+r,function(e){var r=e.target||e.srcElement;$(r).closest("#"+n.id+"_item"+t).size()||i.hideYearMonthPicker(t)}),$(window).bind("resize.cal_"+r,function(){i.hideYearMonthPicker(t)})}},_unsetAutoCloseYearMonthPicker:function(e,t,n){if(n.ymPickerAutoClose){var i=n.id+"_"+t;$(document).unbind(".cal_"+i),$(window).unbind(".cal_"+i)}},_selectToday:function(){this.selectDate(this.getSystemDate()),this.submit(),this.hide()},_setFooterBtns:function(e){var t=this,n=t.configs;t.addComponent(n.btns,e),n.showTodayBtn&&Nex.Create("button",{text:n.todayText,renderTo:e,context:this,cls:"nex-cal-btns nex-cal-today-btn",overCls:"nex-cal-today-btn-over",pressedCls:"nex-cal-today-btn-click",callBack:function(){this._selectToday()}}),n.showCancelBtn&&Nex.Create("button",{text:n.cancelText,context:this,renderTo:e,cls:"nex-cal-btns nex-cal-cancel-btn",overCls:"nex-cal-cancel-btn-over",pressedCls:"nex-cal-cancel-btn-click",callBack:function(){this.hide()}}),n.showOkBtn&&Nex.Create("button",{text:n.okText,context:this,cls:"nex-cal-btns nex-cal-ok-btn",overCls:"nex-cal-ok-btn-over",pressedCls:"nex-cal-ok-btn-click",renderTo:e,callBack:function(){this.submit(),this.hide()}})},submit:function(){var e=this.configs;return this.fireEvent("onSubmit",[e.submitToString?this.getStrValue():this.getValue()])},showPos:function(e){var t=this,n=t.configs,e=t._undef(e,{}),i=$.extend({},n._showAt,n.showAt,e);this.show(),t.getDom().showAt(i)},checkToSubmit:function(){var e=this,t=e.configs;if(t.autoSubmit){var n=this.submit();n!==!1?this.hide():""}}})}),define("Nex/date/DateRangePicker",["require","Nex/date/DatePicker"],function(e){return e("Nex/date/DatePicker"),Nex.define("Nex.date.DateRangePicker","Nex.date.DatePicker",{xtype:"daterangepicker",alias:"Nex.DateRangePicker",configs:function(){return{"onStart._sys0002":function(){this.configs.multiSelect=!0,this._setDateRangePickerCls()},"onDateClick._sys0001":function(){},"onGetValue._sys0001":function(e){var t=e.value;$.isArray(t)&&(t.length>1&&(t[1]=t[t.length-1],t.length=2),1==t.length&&t.push(t[0]))},multiSelect:!0,numberOfMonths:2,sepStr:"  "}},_parseValue:function(e){var t=this,n=this.configs,e=t._undef(e,n.value);e=$.isArray(e)?e:(e+"").split(n.sepStr),1===e.length&&e.push(e[0]),e.length>1&&(e[1]=e[e.length-1],e.length=2),t.callParent(arguments)},_refreshSelectDate:function(){var e=this,t=e.configs,n=null,i=null;return $.each(t._selectDate,function(e,t){i=e,n=n?n:e}),n?(e.selectDateRange(n,i),e):void 0},_unselectAll:function(){var e=this,t=e.configs;return t._selectDate={},$(".nex-cal-date-selected",e.bodyEl).removeClass("nex-cal-date-selected nex-cal-date-start nex-cal-date-end nex-cal-date-dequal"),e},_selectDateRange:function(e,t){var n,i=this,r=i.configs;if(e===n)return i;if(i._unselectAll(),t=t===n?e:t,e=i.Date.parseDate(e,r.dateFormat),t=i.Date.parseDate(t,r.dateFormat),e>t){var o=e;e=t,t=o}i.callParent(arguments);var a=i.format(e,"YYYYMMDD"),s=i.format(t,"YYYYMMDD");return a!==s?($("#"+r.id+"_"+a).addClass("nex-cal-date-start"),$("#"+r.id+"_"+s).addClass("nex-cal-date-end")):$("#"+r.id+"_"+a).addClass("nex-cal-date-dequal"),r._selectDate={},r._selectDate[a]=!0,r._selectDate[s]=!0,i},_startDate:!1,_endDate:!1,_selectStart:function(e,t){var n=this,i=n.configs;return e=n.Date.parseDate(e,t||i.dateFormat),n._startDate=e,n._endDate=!1,n._unselectAll(),n._selectDate(e,t||i.dateFormat),n},selectStart:function(e,t){var n=this,i=n.configs;return n._selectStart(e,t),n.fireEvent("onSelectStart",[e,t,i]),n},_selectEnd:function(e,t){var n=this,i=n.configs;return e=n.Date.parseDate(e,t||i.dateFormat),n._endDate=e,n.selectDateRange(n._startDate,n._endDate),n._startDate=!1,n._endDate=!1,n},selectEnd:function(e,t){var n=this,i=n.configs;return n._selectEnd(e,t),n.fireEvent("onSelectEnd",[e,t,i]),n},_selectToday:function(){var e=this.getSystemDate();this._selectStart(e),this._selectEnd(e),this.submit(),this.hide()},toggleSelectDateRange:function(e){var t=this;t.configs;t._startDate?(t.selectEnd(e),t.checkToSubmit()):t.selectStart(e)},_setDateRangePickerCls:function(){var e=this,t=e.configs;t.containerCls+=" nex-daterangepicker-"+t.display},_onDateClick:function(e,t,n){var i=this,r=this.configs;if(!$(t).hasClass("nex-cal-date-disabled")){var o=i.fireEvent("onBeforeDateSelected",[e,t,n]);o!==!1&&(i._isOutside(e)&&r.autoChangeMonth&&(e>r.currentDate?i.nextMonth():i.prevMonth()),i.toggleSelectDateRange(e))}}})}),define("Nex/date/WeekPicker",["require","Nex/date/DateRangePicker"],function(e){return e("Nex/date/DateRangePicker"),Nex.define("Nex.date.WeekPicker","Nex.date.DateRangePicker",{xtype:"weekpicker",alias:"Nex.WeekPicker",configs:function(e){return{numberOfMonths:1}},_getWeekRange:function(e){var t=this,n=(t.configs,e.getDay());n=n?n:7;var i=t.Date.add(e,"d",1-n),r=t.Date.clone(i);return r=t.Date.add(r,"d",6),[i,r]},_parseValue:function(e){var t=this,n=this.configs,i=n.currentDate,e=t._undef(e,n.value);e=$.isArray(e)?e:(e+"").split(n.sepStr),e.length>1&&(e[0]=e[e.length-1],e.length=1);var r=null;e.length&&(r=t.__parse(e[0],i)),r&&(e=t._getWeekRange(r)),t.superclass.superclass._parseValue.call(t,e)},_selectToday:function(){var e=this.getSystemDate(),t=this._getWeekRange(e);this._selectStart(t[0]),this._selectEnd(t[1]),this.submit(),this.hide()},toggleSelectDateRange:function(e){var t=this,n=(t.configs,t._getWeekRange(e));t.selectStart(n[0]),t.selectEnd(n[1]),t.checkToSubmit()}})}),define("Nex/route/Route",["require","Nex"],function(e){e("Nex");var t=Nex.define("Nex.route.Route",{extend:"Nex.AbstractComponent",xtype:"route",alias:"Nex.Route",configs:function(){return{prefix:"nexroute-",routes:{},autoDestroy:!1,removeHTag:!0,removeHTagData:/^#/,location:window.location,doc:document,hashChangeFirstOnRoute:!0,hashChangeOnRoute:!0,hash:"",caseInsensitiveMatch:!1,events:{}}}});return t.supportHashChange=function(e){var t=document.documentMode;return"onhashchange"in window&&(void 0===t||t>7)}(window),t.supportPushState=!!history.pushState,t.override({routes:[],history:[],currentUrl:"/",currentUrlInfo:{},currentUrlData:{},currentParams:{},initComponent:function(e){var t=this;t.callParent(arguments),t.routes=[],t.history=[],t.currentUrlInfo={},t.currentUrlData={},t.currentParams={},t.initRoute()},_getHash:function(e){var t=this,n=t.C();return e=e||n.location.href,"#"+decodeURIComponent(e).replace(/^[^#]*#?(.*)$/,"$1")},getHash:function(e){var t=this,n=t.C();return n.hash=t._getHash(e),t.onGetHash(n),t.fireEvent("onGetHash",[n]),n.hash},onGetHash:function(e){e.removeHTag&&(e.hash=e.hash.replace(e.removeHTagData,""))},initRoute:function(){var e=this,t=e.C();$(document).ready(function(){var n=e.getHash();e.onInitHashChange(n),e.fireEvent("onInitHashChange",[n,t]),$(window).bind("hashchange."+t.id,function(){var n=e.getHash();e.onHashChange(n),e.fireEvent("onHashChange",[n,t])})})},onInitHashChange:function(e){var t=this,n=this.configs,i=n.routes;for(var r in i)t.when(r,i[r]);setTimeout(function(){n.hashChangeFirstOnRoute&&t.checkRoute(e)},10)},onHashChange:function(e){this.configs.hashChangeOnRoute&&this.checkRoute(e)},reload:function(){var e=this;this.configs;return e.checkRoute(e.currentUrl),e},redirectTo:function(e,t){var t=this._undef(t,!0);return t?this.configs.location.hash=e:this.checkRoute(e),this},redirect:function(){return this.redirectTo.apply(this,arguments)},path:function(e,t){return this.redirectTo.apply(this,arguments)},checkRoute:function(e){var t=this,n=(this.configs,"");t.currentUrl=e,t.history.push(e);var i={hash:e},r=t.fireEvent("onVisitPage",[i]);if(r!==!1){if(t.currentUrl=i.hash===e?t.currentUrl:i.hash,e){var o=Nex.parseUrl(e);n=o.pathname?o.pathname:n}t.currentUrlInfo=o;var a={};if(e&&o&&o.search){o.search=o.search.replace(/^\?/,"");var s=o.search.split("&");$.each(s,function(e,t){if(t){var n=t.split("=");a[n[0]]=n[1]?n[1]:""}})}var l=t.parseRoute(n)||{};return t.currentUrlData=l,t.currentParams=$.extend(l.pathParams,a),l&&$.isFunction(l.callback)&&l.callback.call(t,t.currentParams),t}},checkUrl:function(){return this.checkRoute.apply(this,arguments)},pathRegExp:function(e,t){t=t||{};var n=t.caseInsensitiveMatch,i={originalPath:e,regexp:e},r=i.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(e,t,n,i){var o="?"===i?i:null,a="*"===i?i:null;return r.push({name:n,optional:!!o}),t=t||"",""+(o?"":t)+"(?:"+(o?t:"")+(a&&"(.+?)"||"([^/]+)")+(o||"")+")"+(o||"")}).replace(/([\/$\*])/g,"\\$1"),i.regexp=new RegExp("^"+e+"$",n?"i":""),i},switchRouteMatcher:function(e,t){var n=t.keys,i={};if(!t.regexp)return null;var r=t.regexp.exec(e);if(!r)return null;for(var o=1,a=r.length;a>o;++o){var s=n[o-1],l="string"==typeof r[o]?decodeURIComponent(r[o]):r[o];s&&l&&(i[s.name]=l),!s&&l&&(i[o-1]=l)}return i},parseRoute:function(e){var t,n,i=this,r=(this.configs,this.routes);return $.each(r,function(r,o){!n&&o&&(t=i.switchRouteMatcher(e,o))&&(n=$.extend({pathParams:t,params:t},o))}),n||(n={pathParams:{},params:{}},$.isFunction(i._otherwise)?n.callback=i._otherwise:n.callback=function(){null!==i._otherwise&&i.redirectTo(i._otherwise+"",!1)}),n},removeRoute:function(e){var t=this,n=t.routes,i="regexp"===$.type(e)?e.toString():e+"";return $.each(n,function(e,t){t.originalPath==i&&(n[e]=null)}),t},when:function(e,t){var n=this,i=this.configs;if(1===arguments.length){if($.isPlainObject(e)&&$.each(e,function(e,t){n.when(e,t)}),$.isFunction(e)){var r=e.call(n);r&&n.when(r)}return n}if(null===t)return n.removeRoute(e);if("string"===$.type(t)){var o=t;t=function(){n.redirectTo(o,!1)}}var a=n.routes;return"regexp"===$.type(e)?a.push({callback:t,originalPath:e.toString(),regexp:e,keys:[]}):a.push($.extend({callback:t},n.pathRegExp(e,{caseInsensitiveMatch:i.caseInsensitiveMatch}))),n},_otherwise:null,otherwise:function(e){return this._otherwise=e,this},destroy:function(){var e=this,t=this.configs;return $(window).unbind("."+t.id),e.callParent(arguments),this},stop:function(){var e=this,t=this.configs;return t.hashChangeFirstOnRoute=!1,t.hashChangeOnRoute=!1,e},start:function(){var e=this,t=this.configs;return t.hashChangeFirstOnRoute=!0,t.hashChangeOnRoute=!0,e}}),t}),define("Nex/tooltip/ToolTip",["require","Nex/window/Window"],function(e){e("Nex/window/Window");var t=Nex.define("Nex.tooltip.ToolTip",{extend:"Nex.window.Window",alias:"Nex.ToolTip",xtype:"tooltip",configs:function(e){
return e._showAt.visibleable=!1,e._showAt.yAlign="bottom",{prefix:"nextooltip-",border:!0,autoResize:!1,borderCls:[e.borderCls,"nex-tooltip-border"].join(" "),containerCls:[e.containerCls,"nex-tooltip"].join(" "),tabIndex:-1,autoScroll:!1,autoSizeOnShow:!1,draggable:!1,resizeable:!1,showHeader:!1,showArrow:!0,arrowWrapSize:"",arrowSize:7,arrowOffset:5,arrowDir:"",arrowAlign:"",arrowBorderWidth:1,backColor:"",borderColor:"",borderWidth:1,borderStyle:"solid",textColor:"",autoChangeDir:!0,dir:"bottom",dirAlign:"center",offset:0}}});return t.override({initComponent:function(){var e=this.configs;this.callParent(arguments),e._showAt.visibleable=e.autoChangeDir,("bottom"==e.dir||"top"==e.dir||"center"==e.dir)&&(e._showAt.zAlign="y",e._showAt.offsetY=e.offset,e._showAt.yAlign=e.dir,e._showAt.xAlign=e.dirAlign,-1==Nex.inArray(e.dirAlign,["left","center","right"])&&(e._showAt.xAlign="center")),("left"==e.dir||"right"==e.dir)&&(e._showAt.zAlign="x",e._showAt.offsetX=e.offset,e._showAt.xAlign=e.dir,e._showAt.yAlign=e.dirAlign,-1==Nex.inArray(e.dirAlign,["top","center","bottom"])&&(e._showAt.xAlign="center"))},sysEvents:function(){var e=this;e.configs;return e.callParent(arguments),e.bind("onResetPosition._sys",e._setArrow,e),e},initCss:function(){var e=this,t=e.configs;e.callParent(arguments),t.backColor&&e.setBackColor(t.backColor),t.borderColor&&e.setBorderColor(t.borderColor),t.textColor&&e.setTextColor(t.textColor)},setBackColor:function(e){return this.addCssRules("background-color:"+e),this},setBorderColor:function(e){var t=this.configs;return this.addCssRules("border:"+parseInt(t.borderWidth)+"px "+t.borderStyle+" "+e),this},setTextColor:function(e){return this.addCssRules("color:"+e),this},setContent:function(){return this.html.apply(this,arguments),this.resetPosition(),this},_showBeforeEffect:function(){var e=this.el;this.configs;e._show(),this._setArrow(),e.hide()},arrowEl:null,_direction:"bottom",_setArrow:function(){this.refreshArrow()},refreshArrow:function(){var e=this,t=e.configs;if(t.showArrow){e.arrowEl&&e.arrowEl.remove();var n=e.getDirection();if("center"!=n){var i=e.createArrow(n);e.arrowEl=i,e.el.append(i),e.refreshArrowPos(),e.setArrowStyle()}}},refreshArrowPos:function(){var e=this,t=this.configs,n=e._currShowAt.configs,i=e.getDirection();e._direction=i;var r={at:n.at,el:e.arrowEl,autoShow:!1,parent:e.el,xAlign:n.xAlign,yAlign:n.yAlign,zAlign:n.zAlign};-1!==Nex.inArray(i,["top","bottom"])&&(r.zAlign="y"),-1!==Nex.inArray(i,["left","top"])&&(r.zAlign="x"),"y"==r.zAlign&&("center"!=n.yAlign&&(r.offsetX=t.arrowOffset),t.arrowAlign&&(r.xAlign=t.arrowAlign),t.arrowDir&&(r.yAlign=t.arrowDir)),"x"==r.zAlign&&("center"!=n.xAlign&&(r.offsetY=t.arrowOffset),t.arrowAlign&&(r.yAlign=t.arrowAlign),t.arrowDir&&(r.xAlign=t.arrowDir));var o=Nex.Create("showAt",r),a=o.getShowPos();e.fireEvent("onGetArrowPos",[a]),"y"==r.zAlign&&e.arrowEl.css("left",a.left),"x"==r.zAlign&&e.arrowEl.css("top",a.top)},setArrowStyle:function(){var e=this,t=e.configs,n=e._direction;e.addCssRules(".nex-tooltip-arrow-top .nex-tooltip-arrow","border-top-color:"),e.addCssRules(".nex-tooltip-arrow-bottom .nex-tooltip-arrow","border-bottom-color:"),e.addCssRules(".nex-tooltip-arrow-left .nex-tooltip-arrow","border-left-color:"),e.addCssRules(".nex-tooltip-arrow-right .nex-tooltip-arrow","border-right-color:"),e.addCssRules(".nex-tooltip-arrow-top .nex-tooltip-arrow-bg","border-top-color:"),e.addCssRules(".nex-tooltip-arrow-bottom .nex-tooltip-arrow-bg","border-bottom-color:"),e.addCssRules(".nex-tooltip-arrow-left .nex-tooltip-arrow-bg","border-left-color:"),e.addCssRules(".nex-tooltip-arrow-right .nex-tooltip-arrow-bg","border-right-color:"),t.borderColor&&e.addCssRules(".nex-tooltip-arrow-"+n+" .nex-tooltip-arrow","border-"+n+"-color:"+t.borderColor),t.backColor&&e.addCssRules(".nex-tooltip-arrow-"+n+" .nex-tooltip-arrow-bg","border-"+n+"-color:"+t.backColor)},getShowAtPos:function(){var e=this,t=e.configs,n=e.callParent(arguments);if(t.showArrow){var i=e.getDirection(),r=t.arrowWrapSize?t.arrowWrapSize:t.arrowSize;-1!==Nex.inArray(i,["top","bottom"])&&(n.top+="top"==i?-1*r:parseInt(r,10)),-1!==Nex.inArray(i,["left","right"])&&(n.left+="left"==i?-1*r:parseInt(r,10))}return n},getDirection:function(){var e=this._currShowAt,t="center";if(this.configs.arrowDir)return this.configs.arrowDir;if(!e)return t;var n=e.configs;return"y"==n.zAlign&&("top"==n.yAlign||"bottom"==n.yAlign)&&(t=n.yAlign),"x"==n.zAlign&&("left"==n.xAlign||"right"==n.xAlign)&&(t=n.xAlign),t},_getTopArrow:function(){var e=this.configs,t=e.arrowSize,n=e.arrowBorderWidth,i=t-n,r=['<b class="nex-tooltip-arrow nex-tooltip-arrow-border" style="border-width: '+t+'px;left:0px; z-index:1;"></b>','<b class="nex-tooltip-arrow nex-tooltip-arrow-bg" style="border-width: '+i+"px; left:"+n+'px; z-index:2;"></b>'];return r.join("")},_getBottomArrow:function(){var e=this.configs,t=e.arrowSize,n=e.arrowBorderWidth,i=t-n,r=['<b class="nex-tooltip-arrow nex-tooltip-arrow-border" style="border-width: '+t+'px;left:0px; z-index:1;"></b>','<b class="nex-tooltip-arrow nex-tooltip-arrow-bg" style="border-width: '+i+"px; left:"+n+"px; top:"+2*n+'px; z-index:2;"></b>'];return r.join("")},_getLeftArrow:function(){var e=this.configs,t=e.arrowSize,n=e.arrowBorderWidth,i=t-n,r=['<b class="nex-tooltip-arrow nex-tooltip-arrow-border" style="border-width: '+t+'px;left:0px; z-index:1;"></b>','<b class="nex-tooltip-arrow nex-tooltip-arrow-bg" style="border-width: '+i+"px; left:0px; top:"+n+'px; z-index:2;"></b>'];return r.join("")},_getRightArrow:function(){var e=this.configs,t=e.arrowSize,n=e.arrowBorderWidth,i=t-n,r=['<b class="nex-tooltip-arrow nex-tooltip-arrow-border" style="border-width: '+t+'px;left:0px; z-index:1;"></b>','<b class="nex-tooltip-arrow nex-tooltip-arrow-bg" style="border-width: '+i+"px; left:"+2*n+"px; top:"+n+'px; z-index:2;"></b>'];return r.join("")},getArrow:function(e){switch(e){case"top":return this._getTopArrow();case"bottom":return this._getBottomArrow();case"left":return this._getLeftArrow();case"right":return this._getRightArrow()}},createArrow:function(e){var t=this.configs,e=e||"bottom",n=['<div class="nex-tooltip-arrow-wrap nex-tooltip-arrow-',e,'">',this.getArrow(e),"</div>"],i=$(n.join(""));return i.width(2*t.arrowSize),i.height(2*t.arrowSize),i}}),t}),define("Nex/mixins/DataLoader",["require","Nex/Ajax"],function(e){return e("Nex/Ajax"),Nex.define("Nex.mixins.DataLoader",{extend:"Nex.EventObject",configs:function(e){return{url:"",ajaxClass:"Nex.Ajax",ajaxCache:!0,ajaxOptions:{},ajaxMethod:"GET",ajaxDataType:"json",ajaxDataFilter:null,ajaxData:{},ajaxSend:null}},loadAsyncData:function(e,t,n){var i=this,r=i.configs,o=[].slice.apply(arguments),a={};Nex.isFunction(o[0])||(a=o[0],o.splice(0,1));var e=o[0],t=o[1],n=o[2],s=$.extend(r.ajaxData||{},a),l=$.extend({},{type:r.ajaxMethod,cache:r.ajaxCache,dataType:r.ajaxDataType,dataFilter:r.ajaxDataFilter});return $.extend(l,r.ajaxOptions),l.data=$.extend(l.data||{},s),l.$caller=i,l.url=r.url,l.success=function(t){$.isFunction(e)&&e(t),i.fireEvent("onLoadAsyncDataSuccess",[t,r])},l.error=function(e){$.isFunction(t)&&t(e),i.fireEvent("onLoadAsyncDataError",[e,r])},l.complete=function(e){$.isFunction(n)&&n(e),i.fireEvent("onLoadAsyncDataEnd",[r]),i.fireEvent("onLoadAsyncDataComplete",[e,r])},i.fireEvent("onBeforeLoadAsyncData",[l,r])!==!1?(i.onLoadAsyncDataStart(l,r),i.fireEvent("onLoadAsyncDataStart",[l,r]),i.ajaxSend(l),i):void 0},onLoadAsyncDataStart:function(){},ajaxSend:function(e){var t=this,n=t.configs;return $.isFunction(n.ajaxSend)?n.ajaxSend.call(t,e):Nex.Create(n.ajaxClass,e),t}})}),define("Nex/tree/Tree",["require","Nex/panel/Panel","Nex/mixins/DataLoader"],function(e){e("Nex/panel/Panel"),e("Nex/mixins/DataLoader");var t=Nex.define("Nex.tree.Tree",{extend:"Nex.panel.Panel",alias:"Nex.Tree",xtype:"treepanel tree",mixins:["Nex.mixins.DataLoader"],configs:function(e){return{prefix:"nextree-",renderTo:document.body,containerCls:[e.containerCls,"nex-tree"].join(" "),bodySelectionable:!1,data:[],showExpanderIcon:!0,showTreeLines:!0,showTreeIcon:!0,animate:!0,animateTime:100,singleExpand:!1,expandOnEvent:2,expandOnLoad:!1,simpleData:!1,root:"0",iconField:"icon",iconClsField:"iconCls",idField:"id",textField:"text",openField:"open",levelField:"_level",parentField:"pid",childrenField:"children",leafField:"leaf",sortable:!0,sortField:"order",sortOrder:"asc",groupNode:!0,nodesSort:1,singleSelect:!0,enableSelected:!0,allowDrag:!1,allowDrop:!1,removeOnCollapse:!0,events:{}}}});return t.override({initComponent:function(e){var t=this;t.callParent(arguments),t.initTree(),t.initTreeEvents()},dataSource:[],_dataHashMaps:{},_dataChildrens:{},_dataLevels:{},_firstNodes:{},_lastNodes:{},selection:{},initTree:function(){this.initTreeData()},initTreeData:function(e){var t=this,n=t.configs;return t.dataSource=[],t._dataHashMaps={},t._dataChildrens={},t._dataLevels={},t._firstNodes={},t._lastNodes={},t.selection={},t.dataToTree(e||n.data),e&&(n.data=e),t},doRenderContent:function(){var e=this,t=e.configs;e.callParent(arguments);var n=e.getRootId(),i=e.getDataMaps(),r=e.getBody();if(r.empty(),e.expandNode(n),t.expandOnLoad===!0)e.expandAll(n);else{for(var o in i)i[o][t.openField]&&e.expandNode(o);Nex.isNumeric(t.expandOnLoad)&&e.expandLevel(t.expandOnLoad)}},initTreeEvents:function(){var e=this,t=(this.configs,e.getBody()),n=function(t,n){var i=$(this).attr("treeid"),r=e._getNode(i);return r?(n.helper=$(this),e[t]&&Nex.isFunction(e[t])&&e[t].call(e,i,r,n),e.fireEvent(t,[i,r,n])===!1?!1:void 0):void 0};t.undelegate(".tree").delegate(".nex-tree-expander-icon","click.tree dblclick.tree",function(e){var t=$(this).parent();if(!t.hasClass("nex-tree-loading")){var i="";switch(e.type){case"click":i="onNodeExpanderClick";break;case"dblclick":i="onNodeExpanderDblClick"}i&&(n.call(t,i,e),e.stopPropagation(),e.preventDefault(),$(document).trigger(e.type))}}).delegate(".nex-tree-item-wraper",["click.tree","dblclick.tree","keydown.tree","keyup.tree","keypress.tree","mouseenter.tree","mouseleave.tree","contextmenu.tree","mousedown.tree","mouseup.tree"].join(" "),function(e){var t="";switch(e.type){case"click":t="onNodeClick";break;case"dblclick":t="onNodeDblClick";break;case"contextmenu":t="onNodeContextMenu";break;case"keydown":t="onNodeKeyDown";break;case"keyup":t="onNodeKeyUp";break;case"keypress":t="onNodeKeyPress";break;case"mousedown":t="onNodeMouseDown";break;case"mouseup":t="onNodeMouseUp";break;case"mouseenter":t="onNodeMouseOver";break;case"mouseleave":t="onNodeMouseOut"}t&&n.call(this,t,e)===!1&&(e.stopPropagation(),e.preventDefault())})},getDataMaps:function(){return this._dataHashMaps},onNodeClick:function(e,t,n){var i=this,r=this.configs;n.hepler;1==r.expandOnEvent&&i.toggleNode(e),r.enableSelected&&i.selectNode(e)},onNodeDblClick:function(e,t,n){var i=this,r=this.configs;2==r.expandOnEvent&&i.toggleNode(e)},onNodeMouseOver:function(e,t,n){$(n.helper).addClass("nex-tree-item-over")},onNodeMouseOut:function(e,t,n){$(n.helper).removeClass("nex-tree-item-over")},onNodeExpanderClick:function(e,t,n){var i=this;this.configs;i.toggleNode(e)},_getNode:function(e,t){var n,i=this,r=(this.configs,i._dataHashMaps[e]);return r===n?null:t===n?r:r[t]},getNode:function(e,t){return this._getNode(e,t)},getParentID:function(e){var t=this,n=this.configs,i=t.getRootId(),r=t._getNode(e,n.parentField);return e+""==i+""?i:r},_parseSimpleData:function(e,t){for(var n,i=this,r=this.configs,o={},a=0;a<e.length;a++){var s=e[a];s[r.parentField]===n?(s[r.parentField]=t===n?i.getRootId():t,s[r.levelField]=t===n?0:i._getNode(t,r.levelField)+1):s[r.levelField]=i._getNode(s[r.parentField],r.levelField)+1,r.idField in s&&!Nex.isEmpty(s[r.idField])||(s[r.idField]=Nex.uuid()),i._dataHashMaps[s[r.idField]]=s;var l=s[r.parentField];i._dataChildrens[l]=i._dataChildrens[l]===n?[]:i._dataChildrens[l];var d=i._dataChildrens[l];d.push(s);var c=s[r.levelField];i._dataLevels[c]=i._dataLevels[c]===n?[]:i._dataLevels[c];var u=i._dataLevels[c];u.push(s),o[l]=!0}},getRootId:function(){return this.configs.root},getData:function(e){function t(e){var r=n.getChildrens(e);return $.each(r,function(e,r){n.isLeaf(r)||(r[i.childrenField]=t(r[i.idField]))}),r}var n=this,i=this.configs,r=Nex.unDefined(e,i.simpleData),o=n.getRootId();return r?n.getAllChildrens(o):t(o)},setData:function(e){return this.initTreeData(e||[]).doRenderContent(),this},dataToTree:function(e,t){var n,i=this,r=this.configs;if(r.simpleData)return i._parseSimpleData(e||[],t),i;for(var o=r.childrenField,a=0,s=e.length;s>a;a++){var l=e[a];l[r.levelField]=t===n?0:i._getNode(t,r.levelField)+1,l[r.parentField]=t===n?i.getRootId():t,r.idField in l||(l[r.idField]=Nex.uuid()),i._dataHashMaps[l[r.idField]]=l;var d=l[r.parentField];i._dataChildrens[d]=i._dataChildrens[d]===n?[]:i._dataChildrens[d];var c=i._dataChildrens[d];c.push(l);var u=l[r.levelField];i._dataLevels[u]=i._dataLevels[u]===n?[]:i._dataLevels[u];var h=i._dataLevels[u];h.push(l),o in l&&l[o].length&&i.dataToTree(l[o],l[r.idField])}return i},_updateChildrens:function(e,t){return this._dataChildrens[e]=Nex.isArray(t)?t:[t],this},_groupNodes:function(e){var t=this,n=this.configs,i=e||[];if(!n.groupNode)return i;for(var r=[],o=[],a=i.length,s=0;a>s;s++)t.isLeaf(i[s])?o.push(i[s]):r.push(i[s]);return 1==n.nodesSort?i=r.concat(o):2==n.nodesSort&&(i=o.concat(r)),i},groupNodes:function(e){var n,i=this,r=this.configs,e=e===n?r.root:e,o=i.getNodeEl(e),a=i._isRoot(e);if(!o)return!1;if(!a&&!t._getNode(e,r.openField))return!1;var s=i._groupNodes(i.getDisplayNodes(e));return $.each(s,function(e,t){var n=t[r.idField],a=i.getNodeEl(n);a&&o.append(a)}),!0},sortNodes:function(e){return this.groupNodes(e)},_updateLastNodes:function(e,t){var n,i=this,e=(this.configs,e===n?i.getRootId():e),r=t||[];r.length?(i._firstNodes[e]=r[0],i._lastNodes[e]=r[r.length-1]):(i._firstNodes[e]=null,i._lastNodes[e]=null)},updateLastNodes:function(e){return this.refreshDisplayNodes(e),this},resetNodesOrder:function(e){var t=this,n=this.configs,i=t.getChildrens(e),r="asc"===n.sortOrder?!0:!1,o=i.length||0,a={};$.each(i,function(e,t){var i=r?e:--o;t[n.sortField]=i,a[t[n.idField]]=i}),t.fireEvent("onResetOrder",[a,i,n])},_sortItems:function(e){var t=this,n=this.configs;if(!Nex.isArray(e)||!e.length)return e;var i="asc"==n.sortOrder?!0:!1;return e.sort(function(e,r){return e[n.sortField]=t._undef(e[n.sortField],0),r[n.sortField]=t._undef(r[n.sortField],0),e[n.sortField]>r[n.sortField]?i?1:-1:e[n.sortField]===r[n.sortField]?0:i?-1:1}),e},unSelectNode:function(e){var t,n=this,i=this.configs;if(e===t)return n;if(!n.isSelected(e))return n;var r=n.fireEvent("onBeforeUnSelectNode",[e,i]);if(r===!1)return n;var o=n.getNodeEl(e);return o.removeClass("nex-tree-item-selected"),n.selection[e]=!1,n.fireEvent("onUnSelectNode",[e,i]),n},selectNode:function(e){var t,n=this,i=this.configs;if(e===t)return n;for(var r in n.selection)if(n.selection[r]&&i.singleSelect){if(e+""==r+"")continue;n.unSelectNode(r)}if(!i.singleSelect&&n.selection[e])return n.unSelectNode(e),n;if(n.isSelected(e))return n;var o=n.fireEvent("onBeforeSelectNode",[e,i]);if(o===!1)return n;var a=n.getNodeEl(e);return a.addClass("nex-tree-item-selected"),n.selection[e]=!0,n.fireEvent("onSelectNode",[e,i]),n},isSelected:function(e){return!!this.selection[e]},getSelectedNodes:function(){var e=[];for(tid in this.selection)this.selection[tid]&&e.push(this.getNode(tid));return e},isLeaf:function(e){var t,n=this,i=this.configs,r=n.getRootId();if(e===r)return!1;var o=Nex.isPlainObject(e)?e:n._getNode(e);if(!o&&!n._isRoot(e))return!0;if(n._isRoot(e))return!1;if(o[i.leafField]===t){var a=o[i.idField],s=n.getChildrens(a);return s.length?!1:!0}return!!o[i.leafField]},getAllChildrens:function(e){var t=this,n=this.configs,i=[],e=t._undef(e,t.getRootId()),r=function(e){var o=t.getChildrens(e);if(o.length){i=i.concat(o);for(var a=0;a<o.length;a++)r(o[a][n.idField])}};return r(e),i},getChildrens:function(e){for(var t,n=this,e=(this.configs,e===t?n.getRootId():e),i=n._dataChildrens[e]===t?[]:n._dataChildrens[e],r=[],o=0,a=i.length;a>o;o++){var s=i[o];r.push(s)}return i.concat([])},getLevelData:function(e){return this._dataLevels[e]||[]},_removeChildrenData:function(e){var t,n=this,i=this.configs;if(e===t)return!1;var r=n._getNode(e);if(!r)return!1;var o=n.getParentID(e),a=n.getChildrens(o);Nex.array_splice(function(t,n){return n[i.idField]+""==e+""?!0:void 0},a),n._updateChildrens(o,a);var s=n.getLevelData(r.levelField);return Nex.array_splice(function(t,n){return n[i.idField]+""==e+""?!0:void 0},s),n.updateLastNodes(o),delete n._dataHashMaps[e],!0},_addChildren:function(e,t){var n=this,i=(this.configs,Nex.isArray(t)?t:[t]);return n.dataToTree(i,e),n.resetNodesOrder(e),n.refreshTree(e),n.resetNodesOrder(e),!0},addChildren:function(e,t){var n=this,i=this.configs,r=(Nex.isArray(t)?t:[t],n.fireEvent("onBeforeAddChildren",[e,t,i]));return r===!1?!1:(n._addChildren(e,t),n.fireEvent("onAddChildren",[e,t,i]),!0)},_removeChildren:function(e,t){var n,i=this,r=this.configs,t=t===n?!0:t;if(e===n)return!1;var o=i.getParentID(e);if(o===!1)return!1;var a=i._removeChildrenData(e);return a?(i.getNodeCt(e).remove(),r.showTreeLines&&t&&i.refreshTreeAllItem(o),!0):!1},removeChildren:function(e,t){var n,i=this,r=this.configs;if(e===n)return!1;var o=i.fireEvent("onBeforeRemoveChildren",[e,r]);if(o===!1)return!1;var a=i._removeChildren(e);return i.fireEvent("onRemoveChildren",[e,r]),a},_addNodeData:function(e,t,n){var i=this,r=(this.configs,Nex.isArray(t)?t:[t]),n=i._undef(n,!0),o=i.getChildrens(e);i.dataToTree(r,e);var a=[];a=n?o.concat(r):r.concat(o),i._updateChildrens(e,a),i.resetNodesOrder(e)},_addNode:function(e,t,n,i){var r,o=this,a=this.configs;if(e===r)return!1;var s=o._getNode(e),l=o._isRoot(e);if(!s&&!l)return!1;var i=o._undef(i,!1),n=o._undef(n,!0),d=$.isArray(t)?t:[t];if(o._addNodeData(e,d,n),!o.isExpanded(e))return i&&o.expandNode(e),o.refreshTreeItem(e),!0;l&&(s={},s[a.openField]=!0),s[a.openField]||i&&o.expandNode(e);for(var c=[],u=0;u<d.length;u++){var h=$(o.getNodeHtml(d[u]));c.push(h)}n||c.reverse();for(var f=o.getNodeChildEl(e),g=0;g<c.length;g++)f[n?"append":"prepend"](c[g]);return a.showTreeLines&&o.refreshTreeAllItem(e),!0},addNode:function(e,t,n,i){var r,o=this,a=this.configs;if(e===r)return!1;var s=o._getNode(e),l=o._isRoot(e);if(!s&&!l)return!1;var d=o.fireEvent("onBeforeAddNode",[e,t,n,i,a]);if(d===!1)return!1;var c=o._addNode(e,t,n,i);return o.fireEvent("onAddNode",[e,t,n,i,a]),c},_removeNode:function(e){for(var t=this,n=(this.configs,Nex.isArray(e)?e:[e]),i={},r=0;r<n.length;r++)i[t.getParentID(n[r])]=!0,t._removeChildren(n[r],!1);return $.each(i,function(e,n){n&&t.refreshTreeAllItem(e)}),!0},removeNode:function(e){var t=this,n=this.configs,i=t.fireEvent("onBeforeRemoveNode",[e,n]);if(i===!1)return!1;var r=t._removeNode(e);return t.fireEvent("onRemoveNode",[e,n]),r},_afterNodeData:function(e,t,n){var i=this,r=this.configs,o=$.isArray(t)?t:[t],n=i._undef(n,!0),a=i.getParentID(e);if(a===!1)return!1;var s=i.getChildrens(a);i.dataToTree(o,a);for(var l=0;l<s.length;l++){var d=s[l];if(d[r.idField]+""==e+"")break}Nex.array_insert(l,o,s,!n),i._updateChildrens(a,s),i.resetNodesOrder(a)},_afterNode:function(e,t,n,i){var r,o=this,a=this.configs;if(e===r)return!1;var s=o._getNode(e);if(!s)return!1;var i=o._undef(i,!1),n=o._undef(n,!0),l=$.isArray(t)?t:[t],d=o.getParentID(e);if(d===!1)return!1;o._afterNodeData(e,l,n);var c=o._isRoot(d);c&&(s={},s[a.openField]=!0);var u=o.getNodeChildEl(d);if(!u.size())return i&&o.expandNode(d),o.refreshTreeItem(e),!0;s[a.openField]||i&&o.expandNode(d),a.showTreeLines&&o.refreshTreeAllItem(d);for(var h=[],f=0;f<l.length;f++){var g=$(o.getNodeHtml(l[f]));h.push(g)}n&&h.reverse();for(var g=o.getNodeCt(e),p=0;p<h.length;p++)g[n?"after":"before"](h[p]);return!0},afterNode:function(e,t,n,i){var r,o=this,a=this.configs;if(e===r)return!1;var s=o._getNode(e);if(!s)return!1;var l=o.fireEvent("onBeforeAfterNode",[e,t,n,i,a]);if(l===!1)return!1;var d=o._afterNode(e,t,n,i);return o.fireEvent("onAfterNode",[e,t,n,i,a]),d},_moveNode:function(e,t,n){var i=this,r=this.configs,n=n||2;if(e==t)return!1;var o=i._getNode(e);return o?(o=$.extend({},o),delete o[r.childrenField],i._removeChildren(e),2==n?i._addNode(t,o,!0):1==n?i._afterNode(t,o,!1):i._afterNode(t,o,!0),i.refreshTreeItem(t),!0):!1},moveNode:function(e,t,n){var i=this,r=this.configs,o=i.fireEvent("onBeforeMoveNode",[e,t,n,r]);if(o===!1)return!1;var a=i._moveNode(e,t,n||2);return i.fireEvent("onMoveNode",[e,t,n||2,r]),a},_getParentsList:function(e){var t=this,n=this.configs,i=(n.root,[]),r=$.isPlainObject(e)?e:t._getNode(e);if(!r)return[];for(var o=t.getDataMaps(),a=r[n.idField],s=t.getParentID(a);;){if(!(s in o))break;if(i.push(s),s=t.getParentID(s),s===n.root)break}return i.reverse()},isFirstNode:function(e,t){var n=this,i=this.configs,t=Nex.unDefined(t,n.getParentID(e)),r=n._firstNodes[t]||{};return r[i.idField]+""==e+""?!0:!1},isLastNode:function(e,t){var n=this,i=this.configs,t=Nex.unDefined(t,n.getParentID(e)),r=n._lastNodes[t]||{};return r[i.idField]+""==e+""?!0:!1},getNodeSpacers:function(e){var t=this,n=this.configs,i=[],r=$.isPlainObject(e)?e:t._getNode(e);if(!r)return[];var o=r[n.idField];i=t._getParentsList(o);for(var a=[],s=0;s<i.length;s++){var l=i[s];t._isRoot(l)||(t.isLastNode(l)?a.push("nex-tree-empty"):a.push(n.showTreeLines?"nex-tree-line":"nex-tree-empty"))}if(n.showExpanderIcon)if(t.isLeaf(o)){var d=t.getDataMaps(),c=0;for(var u in d)if(c++,c>=2)break;c>1?t.isLastNode(o)?a.push(n.showTreeLines?"nex-tree-elbow-end":"nex-tree-empty"):a.push(n.showTreeLines?"nex-tree-elbow":"nex-tree-empty"):a.push("nex-tree-empty")}else t.isLastNode(o)?a.push(n.showTreeLines?"nex-tree-expander-icon nex-tree-expander-end":"nex-tree-expander-icon nex-tree-expander-nl"):a.push(n.showTreeLines?"nex-tree-expander-icon nex-tree-expander":"nex-tree-expander-icon nex-tree-expander-nl");return t.fireEvent("onGetSpacers",[o,a]),a},getNodeCt:function(e){var t=this,n=this.configs,e=Nex.unDefined(e,t.getRootId());return t._isRoot(e)?$("#"+n.id+"_"+e+"_child"):$("#"+n.id+"_"+e)},getNodeEl:function(e){var t=this,n=this.configs,e=Nex.unDefined(e,t.getRootId());return $("#"+n.id+"_"+e+"_wraper")},getNodeTextEl:function(e){return $(">.nex-tree-text",this.getNodeEl(e))},getNodeChildEl:function(e){var t=this,n=this.configs,e=Nex.unDefined(e,t.getRootId());return $("#"+n.id+"_"+e+"_child")},createSpacer:function(e,t){var t=t?'style="'+t+'"':"";return['<span class="nex-tree-indent ',e,'" ',t,"></span>"].join("")},getNodeHtml:function(e,t){var n=this,i=this.configs,t=Nex.unDefined(t,!1),r=[],o=$.isPlainObject(e)?e:n._getNode(e);if(!o)return"";var a=o[i.idField],s=n.getRootId(),r=n.getNodeSpacers(o),l=[i.id,"_",o[i.idField]].join("");if(!t){var d="";n.isFirstNode(a)&&(d="nex-tree-first",n.isFirstNode(a,s)&&(d+=" nex-tree-first-all")),n.isLastNode(a)&&(d="nex-tree-last"),d=[d],n.fireEvent("onGetNodeCls",[a,d])}n.fireEvent("onGetNodeSpacers",[a,r]),t||n.isSelected(a)&&d.push("nex-tree-item-selected");var c=[];t||c.push(['<li id="',l,'" class="nex-tree-item" treeid="',a,'"><div id="',l,'_wraper" treeid="',a,'" class="nex-tree-item-wraper ',d.join(" "),'">'].join(""));for(var u=0,h=r.length;h>u;u++)c.push(n.createSpacer(r[u]));if(i.showTreeIcon){var f=o[i.iconClsField],g="";o[i.iconField]&&(g="background-image:url("+o[i.iconField]+");");var p=["nex-tree-icon"];n.isLeaf(a)?(p.push("nex-tree-leaf"),void 0!==f&&p.push(f)):(p.push("nex-tree-parent"),void 0!==f&&p.push(f)),c.push(n.createSpacer(p.join(" "),g))}return n.fireEvent("onCreateNodeSpacers",[a,c]),c.push(['<span class="nex-tree-text">',o[i.textField],"</span>"].join("")),t||(c.push("</div></li>"),n.fireEvent("onCreateNode",[a,c])),c.join("")},refreshTreeItem:function(e){var t,n=this;if(e===t||n._isRoot(e))return n;var i=n.getNodeEl(e);return i.length&&(i.html(n.getNodeHtml(e,!0)),n.isLeaf(e)&&n.getNodeChildEl(e).remove()),n},refreshTreeAllItem:function(e){var t=this,n=this.configs,i=Nex.isArray(e)?e:t.getAllDisplayNodes(e,!1);t.refreshTreeItem(e);for(var r=0;r<i.length;r++){var o=i[r];t.refreshTreeItem(o[n.idField])}},_isRoot:function(e){return e+""==this.getRootId()+""?!0:!1},getDisplayNodes:function(e,t){var n=this,i=this.configs,e=n._undef(e,n.getRootId()),t=n._undef(t,!0),r=i.sortable,o=(n.getParentID(e),n.getChildrens(e));if(r){var a=n.fireEvent("onBeforeSortTreeData",[e,o,i]);a!==!1&&(o=n._sortItems(o),n.fireEvent("onSortTreeData",[e,o,i]))}return t&&(o=n._groupNodes(o)),n._updateChildrens(e,o),n.fireEvent("onGetDisplayNodes",[e,o,i]),n._updateLastNodes(e,o),o},refreshDisplayNodes:function(e){return this.getDisplayNodes.apply(this,arguments)},getAllDisplayNodes:function(e,t){var n=this,i=this.configs,r=[],o=[];r=n.getDisplayNodes.apply(n,arguments);for(var a=0,s=r.length;s>a;a++){var l=r[a],d=l[i.idField];n.isLeaf(d)||(o=o.concat(n.getAllDisplayNodes(d,t)))}return r.concat(o)},_bulidTree:function(e){var t=this,n=this.configs,e=t._undef(e,n.root);if(t.isLeaf(e))return!1;var i=t.getBody(),r=t._isRoot(e),o=[n.id,"_",e,"_child"].join(""),a=$("#"+o),s=t.fireEvent("onBeforeBulidTree",[a,e,n]);if(s===!1)return!1;var l=function(){var a=t.getDisplayNodes(e),s=['<ul id="',o,'">'],l=[];t.fireEvent("onGetTreeNodesStart",[e,l,n]);for(var d=0,c=a.length;c>d;d++)l.push(t.getNodeHtml(a[d]));t.fireEvent("onGetTreeNodes",[e,l,n]),s.push(l.join("")),s.push("</ul>"),s=$(s.join("")),s.hide();var u=r?i:$("#"+n.id+"_"+e);return u.append(s),s};return a.length||(a=l(),t.fireEvent("onBulidTree",[e,a,n])),a},showLeafLoading:function(e){var t=this,n=t.configs;t._isRoot(e)?t.showLoading():$("#"+n.id+"_"+e+"_wraper").addClass("nex-tree-loading")},hideLeafLoading:function(e){var t=this,n=t.configs;t._isRoot(e)?t.hideLoading():$("#"+n.id+"_"+e+"_wraper").removeClass("nex-tree-loading")},isExpandNode:function(e){var t,n=this,i=this.configs;if(e===t)return!1;if(n._isRoot(e))return!0;var r=n._getNode(e);return r===!1?!1:!!r[i.openField]},toggleNode:function(e){var t=this,n=(this.configs,t._getNode(e));return n?(t.isExpanded(e)?t.collapseNode(e):t.expandNode(e),t):t},parseAsyncData:function(e){var t=this;t.configs;return t.dataToTree(Nex.isArray(e)?e:[e]),t},_loadTreeData:function(e,t,n,i){var r=this,o=this.configs,a={};return a[o.idField]=e,r.loadAsyncData(a,function(e){r.parseAsyncData(e),Nex.isFunction(t)&&t(e)},n,i),r},isExpanded:function(e){var t=this,n=this.configs,i=t.getNodeChildEl(e);return i.length&&(t.getNode(e,n.openField)||t._isRoot(e))?!0:!1},isCollapsed:function(e){var t=this,n=this.configs,i=t.getNodeChildEl(e);return i.length&&(t.getNode(e,n.openField)||t._isRoot(e))?!1:!0},_expandNode:function(e,t,n){function i(){o.fireEvent("onExpandNode",[e,a]),t&&Nex.isFunction(t)&&t()}var r,o=this,a=this.configs,s=[],n=Nex.unDefined(n,a.animate);if(e===r)return!1;var l=o._getNode(e);if(!l&&!o._isRoot(e))return!1;s=o._getParentsList(e);for(var d=0;d<s.length;d++){var c=s[d],u=o._getNode(c);if(u&&(u[a.openField]=!0),!o.getNodeChildEl(c).length){var h=o._bulidTree(c);h&&(h.show(),$("#"+a.id+"_"+c+"_wraper").addClass("nex-tree-open"))}}if(a.singleExpand){var f=o.getChildrens(o.getParentID(e));$.each(f,function(t,n){var i=n[a.idField];e!=i&&!o.isLeaf(i)&&n[a.openField]&&o.collapseNode(i)})}var h=o._bulidTree(e);if(!h)return!1;var g=o.getNodeEl(e);return l&&(l[a.openField]=!0),g.addClass("nex-tree-open"),n&&$(">.nex-tree-item",h).length?h.stop(!0,!0).slideDown(a.animateTime,function(){i()}):(h.show(),i()),!0},expandNode:function(e,t,n){var i=this,r=this.configs,e=i._undef(e,i.getRootId());if(!i._isRoot(e)){if(i.isLeaf(e))return i;if(i.isExpanded(e))return i;var o=i.fireEvent("onBeforeExpandNode",[e,r]);if(o===!1)return i}i.isEmptyData(e)&&r.url?(i.showLeafLoading(e),i._loadTreeData(e,function(){i.hideLeafLoading(e),i._expandNode(e,t,n);for(var o=i.getAllChildrens(e),a=0;a<o.length;a++)o[a][r.openField]&&i.expandNode(o[a][r.idField],null,n)})):i._expandNode(e,t,n)},_collapseNode:function(e,t,n){function i(){o.fireEvent("onCollapseNode",[e,a]),a.removeOnCollapse&&c.remove(),t&&Nex.isFunction(t)&&t()}var r,o=this,a=this.configs,n=Nex.unDefined(n,a.animate);if(e===r)return!1;var s=o._getNode(e);if(s===!1||o._isRoot(e))return!1;var l=o._isRoot(e);if(l)return!1;var d=o.getNodeEl(e),c=o.getNodeChildEl(e);return s[a.openField]=!1,d.removeClass("nex-tree-open"),n?c.size()&&c.stop(!0,!0).slideUp(a.animateTime,function(){i()}):(c.hide(),i()),!0},collapseNode:function(e){var t=this,n=this.configs,e=t._undef(e,n.root);if(t.isCollapsed(e))return t;var i=t.fireEvent("onBeforeCollapseNode",[e,n]);return i===!1?t:void t._collapseNode(e)},expandLevel:function(e){var t=this,n=this.configs,i=t.getLevelData(e);return $.each(i,function(e,i){var r=i[n.idField];t.isLeaf(r)||t.expandNode(r)}),t},collapseLevel:function(e){var t=this,n=this.configs,i=t.getLevelData(e);return $.each(i,function(e,i){var r=i[n.idField];t.isLeaf(r)||t.collapseNode(r)}),t},expandChildrens:function(e){for(var t=this,n=this.configs,e=t._undef(e,n.root),i=t.getChildrens(e),r=0;r<i.length;r++)t.isLeaf(i[r])||t.expandNode(i[r][n.idField])},expandAll:function(e){var t=this,n=this.configs,e=t._undef(e,n.root);t._isRoot(e);t.expandNode(e,function(){for(var i=t.getAllChildrens(e),r=0;r<i.length;r++){var o=i[r][n.idField],a=t.isLeaf(o);a||t.expandAll(o)}})},collapseChildrens:function(e){for(var t=this,n=this.configs,e=t._undef(e,n.root),i=t.getChildrens(e),r=0;r<i.length;r++)t.isLeaf(i[r])||t.collapseNode(i[r][n.idField])},collapseAll:function(e){var t=this,n=this.configs,e=t._undef(e,n.root),i=t.getAllChildrens(e);t.collapseNode(e);for(var r=0;r<i.length;r++){var o=i[r][n.idField],a=t.isLeaf(o);a||t.collapseNode(o)}},isEmptyData:function(e){var t=this,n=this.configs,e=t._undef(e,n.root),i=t.getChildrens(e);return i.length?!1:!0},refreshTree:function(e){var t=this,n=this.configs,i=t.getRootId(),e=t._undef(e,i),r=t._isRoot(e);if(r)t.getNodeCt(e).remove(),t.expandNode(e,null,!1);else{var o=t._getNode(e);if(!o)return t;t.getNodeCt(e);t.getNodeChildEl(e).remove(),t.refreshTreeItem(e),o[n.openField]&&t.expandNode(e,null,!1)}for(var a=t.getAllChildrens(e),s=0;s<a.length;s++)a[s][n.openField]&&t.expandNode(a[s][n.idField],null,!1);return t}}),t}),define("Nex/menu/ContextMenu",["require","Nex/menu/Menu"],function(e){return e("Nex/menu/Menu"),$.fn.contextMenu=function(e,t){var n=[];if(!this.length)return this;var i=this.selector;if("object"==typeof e||"function"==typeof e){if(t=e,this.data(i)){if($.isFunction(t)){var r=t.call(this.data(i));r&&this.data(i).C(r,!0)}else this.data(i).C(t);return this}$.isFunction(t)&&(t=t.call()||{}),t.autoShow=!1,n.push(1==t.which?"click._cmenu":"contextmenu._cmenu",function(e){s.context=this,a.show([e.pageX,e.pageY]),e.preventDefault(),e.stopPropagation()})}else if(e&&("object"==typeof t||"function"==typeof t)){if(e=String(e),i+="."+e,this.data(i)){if($.isFunction(t)){var r=t.call(this.data(i));r&&this.data(i).C(r,!0)}else this.data(i).C(t);return this}t.autoShow=!1,n.push(1==t.which?"click._cmenu":"contextmenu._cmenu",e,function(e){s.context=this,a.show([e.pageX,e.pageY]),e.preventDefault(),e.stopPropagation()})}if(!n.length){if("remove"==e){var o=this.data(i);return o.destroyMenu(),this.off("._cmenu"),this}if("remove"==t){var o=this.data(i+"."+e);return o.destroyMenu(),this.off("._cmenu",e),this}return arguments.length?this.data(i+"."+e):this.data(i)}var a=Nex.Create("menu",t),s=a.configs;return this.data(i,a),this.on.apply(this,n),1==t.which&&a.bind("@onBindMenuEvents._contextmenu",function(e){$(e).click(function(e){e.preventDefault(),e.stopPropagation()})}),this},$}),define("Nex/form/Display",["require","Nex/form/AbstractForm"],function(e){e("Nex/form/AbstractForm");var t=Nex.define("Nex.form.Display","Nex.form.AbstractForm",{alias:"Nex.DisplayField",xtype:"displayfield"});return t.setOptions(function(e){return{__inputType:"display",containerCls:[e.containerCls,"nex-form-display"].join(" "),cleanBtn:!1}}),t}),define("Nex/form/Radio",["require","Nex/form/Display"],function(e){e("Nex/form/Display");var t=Nex.define("Nex.form.Radio","Nex.form.Display",{
alias:"Nex.RadioField",xtype:"radiofield",configs:function(e){e.tpl;return{__inputType:"radio",containerCls:[e.containerCls,"nex-form-radio"].join(" "),showPlaceholder:!1,triggerBtnsPosition:"outer",radioLabelSelection:!1,labelvAlign:"top",width:"auto",itemDefault:{},items:[]}},initFormField:function(){var e=this;this.configs;e.initBoxItems(),e.callParent(arguments)},initBoxItems:function(){var e=this,t=this.configs;if(e._setRadios(t.items),e._setRadioEvents(),!t.radioLabelSelection){var n=e.getInput();n.disableSelection()}},_bindEvent:function(){var e=this,t=this.configs;e.callParent(arguments);var n=$("#"+t.id+"-input");n.unbind("focus blur").bind({focus2:function(i){if(!t.disabled&&!t.readOnly&&!n.hasClass("nex-form-field-focus")){e._focusValue=$(this).val(),n.addClass("nex-form-field-focus"),$("#"+t.id).addClass("nex-form-focus");var r=e.fireEvent("onFocus",[this,i]);return r===!1?!1:void 0}},blur2:function(i){if(!t.disabled&&!t.readOnly){var r=e._focusValue,o=$(this).val();n.removeClass("nex-form-field-focus"),$("#"+t.id).removeClass("nex-form-focus"),r!==o&&(t.value=o,e.fireEvent("onChange",[o,r]));var a=e.fireEvent("onBlur",[this,i]);return a===!1?!1:void 0}}})},_setRadios:function(e){var t=this,n=this.configs,i=t.getInput(),r=[],o=n.valueKey,a=n.textKey,e=t._undef(e,n.items);if(!$.isArray(e))return t;for(var s=e.length,l=0;s>l;l++){var d=t._parseItemData(e[l]);e[l]=d;var c=$.extend({cls:"",readOnly:!1,disabled:!1,display:"inline",width:"auto"},n.itemDefault,d);c.id=e[l].__id,t.isSplitLine(c)?r.push(t.tpl(n.dropdownItemSplitLineTpl,c)):r.push('<span id="'+c.id+'" tabindex="'+ ++Nex.tabIndex+'" class="nex-form-radio-item nex-form-radio-item-d-'+c.display+" "+(c.readOnly?"nex-form-radio-item-readonly":"")+" "+(c.disabled?"nex-form-radio-item-disabled":"")+" "+c.cls+'" value="'+encodeURIComponent(c[o])+'" style="'+(isNaN(parseInt(c.width))?"":"width:"+parseInt(c.width)+"px")+'"><span id="'+n.id+'-radio-icon" class="nex-form-radio-icon"></span><span class="nex-form-radio-text">'+c[a]+"</span></span>")}return i.html(r.join("")),t},resetRadios:function(e){var t=this,n=this.configs,i=t.getValue();return $.isArray(e)?(n.items=e,t._setRadios(e),t.checked(i,!1),t):t},setItems:function(e){return this.resetRadios.apply(this,arguments)},_setRadioEvents:function(){var e=this,t=this.configs,n=e.getInput(),i=function(n,i,r,o){if(!t.disabled&&!t.readOnly){var a=$(this),s=a.attr("id"),l=e.getItemDataById(s);if(!l.disabled&&!l.readOnly){var d;return $.isFunction(l[i])&&(d=l[i].call(e,l),d===!1)?!1:(d=e.fireEvent(n,[l[t.valueKey],l,this,r]),d===!1?!1:void($.isFunction(o)&&o.call(this,l)))}}},r=0,o=0;n.undelegate(">.nex-form-radio-item").delegate(">.nex-form-radio-item",{click:function(n){if(!t.disabled&&!t.readOnly){var r,o=$(this),a=o.attr("id"),s=e.getItemDataById(a);if(!s.disabled&&!s.readOnly)return $.isFunction(s.callBack)&&(r=s.callBack.call(e,s,n)),$.isFunction(s.callback)&&r!==!1&&(r=s.callback.call(e,s,n)),$.isFunction(s.handler)&&r!==!1&&(r=s.handler.call(e,s,n)),r!==!1&&(r=i.call(this,"onRaidoClick","click",n)),r===!1?!1:void(o.hasClass("nex-form-radio-item-checked")||e.setValue(s[t.valueKey]))}},dblclick:function(e){return i.call(this,"onRaidoDblClick","dblclick",e)},mouseenter:function(e){var t=i.call(this,"onRaidoOver","mouseover",e,function(e){e.disabled||e.readOnly||$(this).addClass("nex-form-radio-item-over")});return t===!1?!1:void 0},mouseleave:function(e){var t=i.call(this,"onRaidoOut","mouseout",e,function(e){e.disabled||e.readOnly||$(this).removeClass("nex-form-radio-item-over")});return t===!1?!1:void 0},mousedown:function(e){if(!t.disabled&&!t.readOnly){var n=i.call(this,"onRaidoMouseDown","mousedown",e,function(e){if(!e.disabled&&!e.readOnly){$(this).addClass("nex-form-radio-item-down");var t=$(this);r=setTimeout(function(){r=0,$(document).one("mouseup",function(){t.removeClass("nex-form-radio-item-down")})},0)}});return n===!1?!1:void 0}},mouseup:function(e){var t=i.call(this,"onRaidoMouseUp","mouseup",e,function(e){e.disabled||e.readOnly||($(this).removeClass("nex-form-radio-item-down"),r&&(clearTimeout(r),r=0))});return t===!1?!1:void 0},focus:function(e){n.trigger("focus2",[e]),o&&(clearTimeout(o),o=0)},blur:function(e){o=setTimeout(function(){o=0,n.trigger("blur2",[e])},0)}})},getCheckedLength:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-radio-item-checked",t).length},_unchecked:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-radio-item",t).removeClass("nex-form-radio-item-checked"),e},_uncheckedAll:function(){var e=this,t=this.configs,n=Nex.FormManager.get(t.name,t.group);return $.each(n,function(e,n){if(n._unchecked&&n._unchecked(),n.configs.id!==t.id){var i=n.getValue();n.getCheckedLength&&n.getCheckedLength()&&n.fireEvent("onChange",["",i])}}),e},unchecked:function(){return this.setValue(""),this},checked:function(e,t){var n=this,t=(this.configs,n.getInput(),n._undef(t,!0)),i=n.getItemData(e);i=$.isArray(i)?i[0]:i,i&&(t&&n._uncheckedAll(),$("#"+i.__id).addClass("nex-form-radio-item-checked"))},setRadioDisabled:function(e,t,n){var i=this,t=(this.configs,i._undef(t,!0)),n=i._undef(n,"disabled"),r=i.getItemData(e);return r=$.isArray(r)?r[0]:r,r&&(t?($("#"+r.__id).addClass("nex-form-radio-item-"+n),"disabled"===n?r.disabled=!0:"readonly"===n?r.readOnly=!0:r[n]=!0):($("#"+r.__id).removeClass("nex-form-radio-item-"+n),"disabled"===n?r.disabled=!1:"readonly"===n?r.readOnly=!1:r[n]=!1)),i},unsetRadioDisabled:function(e){return this.setRadioDisabled.apply(this,[e,!1])},setRadioReadOnly:function(){return this.setRadioDisabled.apply(this,[value,!0,"readonly"])},unsetRadioReadOnly:function(){return this.setRadioDisabled.apply(this,[value,!1,"readonly"])},getInputValue:function(){var e=this,t=(this.configs,e.getInput()),n=$(">.nex-form-radio-item-checked",t),i="";return n.length&&(i=decodeURIComponent(n.attr("value"))||""),i},setInputValue:function(e){var t=this;this.configs;return t.checked(e),t},getInputText:function(){var e=this,t=this.configs,n=e.getInputValue(),i=e.getItemData(n);return i=$.isArray(i)?i[0]:i,i?i[t.textKey]:""},setInputText:function(e){var t=this,n=this.configs,i="";return $.each(n.items,function(t,r){return r[n.textKey]===e?(i=r[n.valueKey],!1):void 0}),t.setValue(i),t}});return t}),define("Nex/form/Checkbox",["require","Nex/form/Radio"],function(e){e("Nex/form/Radio");Nex.define("Nex.form.Checkbox","Nex.form.Radio",{alias:"Nex.CheckboxField",xtype:"checkboxfield",configs:function(e){return{__inputType:"checkbox",containerCls:[e.containerCls,"nex-form-checkbox"].join(" "),checkboxLabelSelection:!1}},initBoxItems:function(){var e=this,t=this.configs;if(e._setCheckboxs(t.items),e._setCheckboxEvents(),!t.radioLabelSelection){var n=e.getInput();n.disableSelection()}},_setCheckboxs:function(e){var t=this,n=this.configs,i=t.getInput(),r=[],o=n.valueKey,a=n.textKey,e=t._undef(e,n.items);if(!$.isArray(e))return t;for(var s=e.length,l=0;s>l;l++){var d=t._parseItemData(e[l]);e[l]=d;var c=$.extend({cls:"",readOnly:!1,disabled:!1,display:"inline",width:"auto"},n.itemDefault,d);c.id=e[l].__id,t.isSplitLine(c)?r.push(t.tpl(n.dropdownItemSplitLineTpl,c)):r.push('<span id="'+c.id+'" tabindex="'+ ++Nex.tabIndex+'" class="nex-form-checkbox-item nex-form-checkbox-item-d-'+c.display+" "+(c.readOnly?"nex-form-checkbox-item-readonly":"")+" "+(c.disabled?"nex-form-checkbox-item-disabled":"")+" "+c.cls+'" value="'+encodeURIComponent(c[o])+'" style="'+(isNaN(parseInt(c.width))?"":"width:"+parseInt(c.width)+"px")+'"><span id="'+n.id+'-checkbox-icon" class="nex-form-checkbox-icon"></span><span class="nex-form-checkbox-text">'+c[a]+"</span></span>")}return i.html(r.join("")),t},resetCheckboxs:function(e){var t=this,n=this.configs,i=t.getValue();return $.isArray(e)?(n.items=e,t._setCheckboxs(e),t.setInputValue(i),t):t},setItems:function(e){return this.resetCheckboxs.apply(this,arguments)},_setCheckboxEvents:function(){var e=this,t=this.configs,n=e.getInput(),i=function(n,i,r,o){if(!t.disabled&&!t.readOnly){var a=$(this),s=a.attr("id"),l=e.getItemDataById(s);if(!l.disabled&&!l.readOnly){var d;return $.isFunction(l[i])&&(d=l[i].call(e,l),d===!1)?!1:(d=e.fireEvent(n,[l[t.valueKey],l,this,r]),d===!1?!1:void($.isFunction(o)&&o.call(this,l)))}}},r=0,o=0;n.undelegate(">.nex-form-checkbox-item").delegate(">.nex-form-checkbox-item",{click:function(n){if(!t.disabled&&!t.readOnly){var r,o=$(this),a=o.attr("id"),s=e.getItemDataById(a);if(!s.disabled&&!s.readOnly)return $.isFunction(s.callBack)&&(r=s.callBack.call(e,s,n)),$.isFunction(s.callback)&&r!==!1&&(r=s.callback.call(e,s,n)),$.isFunction(s.handler)&&r!==!1&&(r=s.handler.call(e,s,n)),r!==!1&&(r=i.call(this,"onCheckboxClick","click",n)),r===!1?!1:void(o.hasClass("nex-form-checkbox-item-checked")?e.unsetChecked(s[t.valueKey]):e.setChecked(s[t.valueKey]))}},dblclick:function(e){return i.call(this,"onRaidoDblClick","dblclick",e)},mouseenter:function(e){var t=i.call(this,"onRaidoOver","mouseover",e,function(e){e.disabled||e.readOnly||$(this).addClass("nex-form-checkbox-item-over")});return t===!1?!1:void 0},mouseleave:function(e){var t=i.call(this,"onRaidoOut","mouseout",e,function(e){e.disabled||e.readOnly||$(this).removeClass("nex-form-checkbox-item-over")});return t===!1?!1:void 0},mousedown:function(e){var t=i.call(this,"onRaidoMouseDown","mousedown",e,function(e){if(!e.disabled&&!e.readOnly){$(this).addClass("nex-form-checkbox-item-down");var t=$(this);r=setTimeout(function(){r=0,$(document).one("mouseup",function(){t.removeClass("nex-form-checkbox-item-down")})},0)}});return t===!1?!1:void 0},mouseup:function(e){var t=i.call(this,"onRaidoMouseUp","mouseup",e,function(e){e.disabled||e.readOnly||($(this).removeClass("nex-form-checkbox-item-down"),r&&(clearTimeout(r),r=0))});return t===!1?!1:void 0},focus:function(e){n.trigger("focus2",[e]),o&&(clearTimeout(o),o=0)},blur:function(e){o=setTimeout(function(){o=0,n.trigger("blur2",[e])},0)}})},getCheckedLength:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-checkbox-item-checked",t).length},_uncheckedAll:function(){var e=this,t=this.configs,n=e.getInput();return $(">.nex-form-checkbox-item",n).removeClass("nex-form-checkbox-item-checked"),$.each(t.items,function(e,t){t.checked=!1}),e},uncheckedAll:function(){return this.setValue(""),this},checkedAll:function(){var e=this,t=this.configs,n=[];return $.each(t.items,function(e,i){n.push(i[t.valueKey])}),e.setValue(n.join(t.multiSplit)),e},reverseChecked:function(){var e=this,t=this.configs,n=e.getValue();n=n.split(t.multiSplit);var i=[];return $.each(t.items,function(e,r){-1===$.inArray(r[t.valueKey],n)&&i.push(r[t.valueKey])}),e.setValue(i.join(t.multiSplit)),e},setCheckboxDisabled:function(e,t,n){var i=this,t=(this.configs,i._undef(t,!0)),n=i._undef(n,"disabled"),r=i.getItemData(e);return r=$.isArray(r)?r[0]:r,r&&(t?($("#"+r.__id).addClass("nex-form-checkbox-item-"+n),"disabled"===n?r.disabled=!0:"readonly"===n?r.readOnly=!0:r[n]=!0):($("#"+r.__id).removeClass("nex-form-checkbox-item-"+n),"disabled"===n?r.disabled=!1:"readonly"===n?r.readOnly=!1:r[n]=!1)),i},unsetCheckboxDisabled:function(e){return this.setCheckboxDisabled.apply(this,[e,!1])},setCheckboxReadOnly:function(e){return this.setCheckboxDisabled.apply(this,[e,!0,"readonly"])},unsetCheckboxReadOnly:function(e){return this.setCheckboxDisabled.apply(this,[e,!1,"readonly"])},_setChecked:function(e){this.setCheckboxDisabled.apply(this,[e,!0,"checked"])},setChecked:function(e){var t=this.getInputValue();this._setChecked(e);var n=this.getInputValue();return t!==n&&this.fireEvent("onChange",[n,t]),this},_unsetChecked:function(e){this.setCheckboxDisabled.apply(this,[e,!1,"checked"])},unsetChecked:function(e){var t=this.getInputValue();this._unsetChecked(e);var n=this.getInputValue();return t!==n&&this.fireEvent("onChange",[n,t]),this},getInputValue:function(){var e=this,t=this.configs,n=e.getInput(),i=$(">.nex-form-checkbox-item-checked",n),r=[];return i.length&&i.each(function(){r.push(decodeURIComponent($(this).attr("value")))}),r.join(t.multiSplit)},setInputValue:function(e){var t=this,n=this.configs;return t._uncheckedAll(),$.each((e+"").split(n.multiSplit),function(e,n){t._setChecked(n)}),t},getInputText:function(){var e=this,t=this.configs,n=e.getInputValue(),i=e.getItemData(n);i=$.isArray(i)?i:[i];var r=[];return $.each(i,function(e,n){r.push(n[t.textKey])}),r.join(t.multiSplit)},setInputText:function(e){var t=this,n=this.configs,i=[],e=e.split(n.multiSplit);return $.each(n.items,function(t,r){-1!==$.inArray(r[n.textKey],e)&&i.push(r[n.valueKey])}),t.setValue(i.join(n.multiSplit)),t}})}),define("Nex/form/ComboBox",["require","Nex/form/Text"],function(e){e("Nex/form/Text");var t=Nex.define("Nex.form.ComboBox","Nex.form.Text",{alias:"Nex.ComboBox Nex.ComboBoxField",xtype:"combobox comboboxfield",configs:function(e){return{__inputType:"text",containerCls:[e.containerCls,"nex-form-combobox"].join(" "),_inputCls:[],triggerToFocus:!0,triggerCls:"",triggerIconCls:""}},sysEvents:function(){var e=this;e.configs;return e.bind("onSetFormView._sys",e._setInputCls,e),e.callParent(arguments),e},_setSysTriggerBtns:function(){var e=this,t=e.configs,n=e.getInput();return e.addInnerTriggerBtn({cls:["nex-form-combobox-trigger",t.triggerCls].join(" "),iconCls:["nex-form-combobox-icon",t.triggerIconCls].join(" "),callBack:function(e,i){t.triggerToFocus||n.trigger("focus",[i])}}),e.callParent(arguments),e},_setInputCls:function(){var e=this,t=e.configs,n=$.isArray(t._inputCls)?t._inputCls:[t._inputCls],i=["nex-form-field-combobox"].concat(n);$("#"+t.id+"-input").addClass(i.join(" "))}});return t}),define("Nex/form/Hidden",["require","Nex/form/Text"],function(e){e("Nex/form/Text");var t=Nex.define("Nex.form.Hidden","Nex.form.Text",{alias:"Nex.HiddenField",xtype:"hiddenfield"});return t.setOptions(function(e){return{__inputType:"hidden",containerCls:[e.containerCls,"nex-form-hidden"].join(" "),width:"auto",height:"auto",showLabel:!1,cleanBtn:!1}}),t}),define("Nex/form/Password",["require","Nex/form/Text"],function(e){e("Nex/form/Text");var t=Nex.define("Nex.form.Password","Nex.form.Text",{alias:"Nex.PasswordField",xtype:"passwordfield"});return t.setOptions(function(e){return{__inputType:"password",containerCls:[e.containerCls,"nex-form-password"].join(" "),cleanBtn:!0}}),t}),define("Nex/form/SingleCheckbox",["require","Nex/form/Checkbox"],function(e){e("Nex/form/Checkbox");var t=Nex.define("Nex.form.SingleCheckbox","Nex.form.Checkbox",{alias:"Nex.SingleCheckboxField",xtype:"singlecheckboxfield",configs:function(e){return{__inputType:"singlecheckbox",containerCls:[e.containerCls,"nex-form-singlecheckbox"].join(" "),cleanBtn:!1,on:"1",off:"0",text:"",value:""}},_checkOptions:function(){var e=this.configs;this.callParent(arguments);var t=[{text:e.text,value:e.on}];return e.items=t,this},_setCheckboxs:function(){var e=this;this.configs;return e.callParent(arguments),e},unchecked:function(){var e=this,t=this.configs;return e.setValue(t.off),this},checked:function(e,t){var n=this,i=this.configs;return n.setValue(i.on),n},getInputValue:function(){var e=this,t=this.configs,n=e.callParent(arguments);return n===t.on+""?t.on:t.off}});return t}),define("Nex/form/Textarea",["require","Nex/form/AbstractForm"],function(e){e("Nex/form/AbstractForm");var t=Nex.define("Nex.form.Textarea","Nex.form.AbstractForm",{alias:"Nex.TextareaField",xtype:"textareafield",sysEvents:function(){var e=this;e.configs;e.callParent(arguments),e.bind("onSetViewSize._sys",e._setTextareaHeight,e)},_setTextareaHeight:function(){var e=this,t=e.configs,n=t.views.container,i=e.getInput();return i._outerHeight(n.height()),e}});return t.setOptions(function(e){var t=e.tpl;return t.inputTpl='<textarea <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> class="nex-form-field nex-form-field-<%=type%>"></textarea>',{__inputType:"textarea",containerCls:[e.containerCls,"nex-form-textarea"].join(" "),cleanBtn:!0,height:60,labelvAlign:"top",tpl:t}}),t}),require(["Nex/Ajax","Nex/ProgressBar","Nex/container/Container","Nex/grid/Grid","Nex/window/Window","Nex/tab/Tab","Nex/layout/Layout","Nex/button/Button","Nex/accordion/Accordion","Nex/date/WeekPicker","Nex/pager/Pager","Nex/route/Route","Nex/tooltip/ToolTip","Nex/tree/Tree","Nex/menu/ContextMenu","Nex/form/Manager","Nex/form/Checkbox","Nex/form/ComboBox","Nex/form/Display","Nex/form/Hidden","Nex/form/Password","Nex/form/Select","Nex/form/SingleCheckbox","Nex/form/Text","Nex/form/Textarea","Nex/form/Trigger"]),define("build-main",function(){});